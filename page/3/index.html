<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="重剑无锋，大巧不工">
<meta property="og:type" content="website">
<meta property="og:title" content="恋恋风辰的个人博客">
<meta property="og:url" content="http://www.limerence2017.com/page/3/index.html">
<meta property="og:site_name" content="恋恋风辰的个人博客">
<meta property="og:description" content="重剑无锋，大巧不工">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="恋恋风辰">
<meta property="article:tag" content="C++ python 大并发网络 逆向">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.limerence2017.com/page/3/"/>





  <title>恋恋风辰的个人博客</title>
  








<meta name="generator" content="Hexo 5.4.2"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">恋恋风辰的个人博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Tags
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.limerence2017.com/2024/10/12/cppbase13/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="恋恋风辰的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/12/cppbase13/" itemprop="url">零基础C++(13) 迭代器用法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2024-10-12T11:39:34+08:00">
                2024-10-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cppbase/" itemprop="url" rel="index">
                    <span itemprop="name">零基础C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="迭代器简介"><a href="#迭代器简介" class="headerlink" title="迭代器简介"></a>迭代器简介</h2><p>迭代器（<code>Iterator</code>）是C++标准模板库（<code>STL</code>）中的一个重要概念，它提供了一种方法，按顺序访问容器（如<code>vector, list, map</code>等）中的元素，而无需暴露容器的内部表示。迭代器就像是一个指针，但它比指针更加安全，因为它只能访问容器内的元素，并且它的类型与容器紧密相关。</p>
<h2 id="使用迭代器"><a href="#使用迭代器" class="headerlink" title="使用迭代器"></a>使用迭代器</h2><p>和指针不一样的是，获取迭代器不是使用取地址符，有迭代器的类型同时拥有返回迭代器的成员。比如，这些类型都拥有名为begin和end的成员，其中begin成员负责返回指向第一个元素（或第一个字符）的迭代器。如有下述语句：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> b = v.<span class="built_in">begin</span>(), e = v.<span class="built_in">end</span>(); <span class="comment">//b和e的类型相同</span></span><br></pre></td></tr></table></figure>

<p>end成员则负责返回指向容器（或string对象）“尾元素的下一位置（one past the end）”的迭代器，也就是说，该迭代器指示的是容器的一个本不存在的“尾后（off the end）”元素。</p>
<p>这样的迭代器没什么实际含义，仅是个标记而已，表示我们已经处理完了容器中的所有元素。end成员返回的迭代器常被称作尾后迭代器（off-the-end iterator）或者简称为尾迭代器（end iterator）。特殊情况下如果容器为空，则begin和end返回的是同一个迭代器。</p>
<p><strong>特殊情况下如果容器为空，则begin和end返回的是同一个迭代器。</strong></p>
<p>一般来说，我们不清楚（不在意）迭代器准确的类型到底是什么。在上面的例子中，使用auto关键字定义变量b和e，这两个变量的类型也就是begin和end的返回值类型，之后将对相关内容做更详细的介绍。</p>
<h2 id="迭代器运算"><a href="#迭代器运算" class="headerlink" title="迭代器运算"></a>迭代器运算</h2><p>符表3.6列举了迭代器支持的一些运算。使用==和！=来比较两个合法的迭代器是否相等，如果两个迭代器指向的元素相同或者都是同一个容器的尾后迭代器，则它们相等；否则就说这两个迭代器不相等。</p>
<p><img src="https://cdn.llfc.club/1728711512535.jpg" alt="https://cdn.llfc.club/1728711512535.jpg"></p>
<p>和指针类似，也能通过解引用迭代器来获取它所指示的元素，执行解引用的迭代器必须合法并确实指示着某个元素。</p>
<p>试图解引用一个非法迭代器或者尾后迭代器都是未被定义的行为。举个例子，利用下标运算符把string对象的第一个字母改为了大写形式，下面利用迭代器实现同样的功能：</p>
<h4 id="比较运算"><a href="#比较运算" class="headerlink" title="比较运算"></a>比较运算</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::string <span class="title">s</span><span class="params">(<span class="string">&quot;some string&quot;</span>)</span></span>;</span><br><span class="line"><span class="comment">//确保s非空</span></span><br><span class="line"><span class="keyword">if</span>(s.<span class="built_in">begin</span>() != s.<span class="built_in">end</span>())&#123;</span><br><span class="line">    <span class="comment">//第一个字母改为大写</span></span><br><span class="line">    <span class="keyword">auto</span> it = s.<span class="built_in">begin</span>();</span><br><span class="line">    *it = <span class="built_in">toupper</span>(*it);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>本例和原来的程序一样，首先检查s是否为空，显然通过检查begin和end返回的结果是否一致就能做到这一点。如果返回的结果一样，说明s为空；</p>
<p>如果返回的结果不一样，说明s不为空，此时s中至少包含一个字符。</p>
<p>我们在if内部，声明了一个迭代器变量it并把begin返回的结果赋给它，这样就得到了指示s中第一个字符的迭代器，接下来通过解引用运算符将第一个字符更改为大写形式。</p>
<p>和原来的程序一样，输出结果将是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Some string</span><br></pre></td></tr></table></figure>

<h4 id="自增运算"><a href="#自增运算" class="headerlink" title="自增运算"></a>自增运算</h4><p> 将迭代器从一个元素移动到另外一个元素迭代器使用递增（++）运算符。</p>
<p>来从一个元素移动到下一个元素。从逻辑上来说，迭代器的递增和整数的递增类似，整数的递增是在整数值上“加1”，迭代器的递增则是将迭代器“向前移动一个位置”。</p>
<p><strong>注意</strong></p>
<blockquote>
<p>因为end返回的迭代器并不实际指示某个元素，所以不能对其进行递增或解引用的操作。</p>
</blockquote>
<p>把字符串中的第一个单词改为大写</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">std::string s2 = <span class="string">&quot;another string&quot;</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it = s2.<span class="built_in">begin</span>(); it != s2.<span class="built_in">end</span>() &amp;&amp;</span><br><span class="line">    !<span class="built_in">isspace</span>(*it); ++it) &#123;</span><br><span class="line">    *it = <span class="built_in">toupper</span>(*it);</span><br><span class="line">&#125;</span><br><span class="line">std::cout &lt;&lt; s2 &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ANOTHER string</span><br></pre></td></tr></table></figure>

<p>循环首先用<code>s.begin</code>的返回值来初始化it，意味着it指示的是s中的第一个字符（如果有的话）。</p>
<p>条件部分检查是否已到达s的尾部，如果尚未到达，则将it解引用的结果传入<code>isspace</code>函数检查是否遇到了空白。</p>
<p>每次迭代的最后，执行<code>++it</code>令迭代器前移一个位置以访问s的下一个字符。</p>
<p>循环体内部和上一个程序if语句内的最后一句话一样，先解引用it，然后将结果传入<code>toupper</code>函数得到该字母对应的大写形式，再把这个大写字母重新赋值给it所指示的字符。</p>
<h2 id="关键概念：泛型编程"><a href="#关键概念：泛型编程" class="headerlink" title="关键概念：泛型编程"></a>关键概念：泛型编程</h2><p>原来使用C或Java的程序员在转而使用C++语言之后，会对for循环中使用<code>！=</code>而非<code>&lt;</code>进行判断有点儿奇怪，</p>
<p>C++程序员习惯性地使用<code>！=</code>，其原因和他们更愿意使用迭代器而非下标的原因一样：因为这种编程风格在标准库提供的所有容器上都有效。</p>
<p>之前已经说过，只有<code>string</code>和<code>vector</code>等一些标准库类型有下标运算符，而并非全都如此。与之类似，所有标准库容器的迭代器都定义了<code>==</code>和<code>！=</code>，但是它们中的大多数都没有定义<code>&lt;</code>运算符。因此，只要我们养成使用迭代器和！=的习惯，就不用太在意用的到底是哪种容器类型。</p>
<h2 id="迭代器类型"><a href="#迭代器类型" class="headerlink" title="迭代器类型"></a>迭代器类型</h2><p>就像不知道<code>string</code>和<code>vector</code>的<code>size_type</code>成员到底是什么类型一样，一般来说我们无须知道迭代器的精确类型。而实际上，那些拥有迭代器的标准库类型使用<code>iterator</code>和<code>const_iterator</code>来表示迭代器的类型：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 迭代器it, it能读写vector&lt;int&gt;的元素</span></span><br><span class="line">std::vector&lt;<span class="type">int</span>&gt;::iterator it;</span><br><span class="line"><span class="comment">// it2能读写string对象的字符</span></span><br><span class="line">std::string::iterator it2;</span><br><span class="line"><span class="comment">// it3只能读元素，不能写元素</span></span><br><span class="line">std::vector&lt;<span class="type">int</span>&gt;::const_iterator it3;</span><br><span class="line"><span class="comment">// it4只能读字符,不能写字符</span></span><br><span class="line">std::string::const_iterator it4;</span><br></pre></td></tr></table></figure>

<p><code>const_iterator</code>和指向常量的指针差不多，能读取但不能修改它所指的元素值。相反，<code>iterator</code>的对象可读可写。</p>
<p>如果<code>vector</code>对象或<code>string</code>对象是一个常量，只能使用<code>const_iterator</code>；如果<code>vector</code>对象或<code>string</code>对象不是常量，那么既能使用<code>iterator</code>也能使用<code>const_iterator</code>。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;<span class="type">int</span>&gt; numbers = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 const_iterator 遍历</span></span><br><span class="line">std::vector&lt;<span class="type">int</span>&gt;::const_iterator it;</span><br><span class="line"><span class="keyword">for</span> (it = numbers.<span class="built_in">cbegin</span>(); it != numbers.<span class="built_in">cend</span>(); ++it) &#123;</span><br><span class="line">    std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;  <span class="comment">// 读取元素值</span></span><br><span class="line">&#125;</span><br><span class="line">std::cout &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<h3 id="术语：迭代器和迭代器类型"><a href="#术语：迭代器和迭代器类型" class="headerlink" title="术语：迭代器和迭代器类型"></a>术语：迭代器和迭代器类型</h3><p>迭代器这个名词有三种不同的含义：可能是迭代器概念本身，也可能是指容器定义的迭代器类型，还可能是指某个迭代器对象。</p>
<p>重点是理解存在一组概念上相关的类型，我们认定某个类型是迭代器当且仅当它支持一套操作，这套操作使得我们能访问容器的元素或者从某个元素移动到另外一个元素。</p>
<p>每个容器类定义了一个名为iterator的类型，该类型支持迭代器概念所规定的一套操作。</p>
<h3 id="begin和end运算符"><a href="#begin和end运算符" class="headerlink" title="begin和end运算符"></a>begin和end运算符</h3><p>begin和end返回的具体类型由对象是否是常量决定，如果对象是常量，<code>begin</code>和<code>end</code>返回<code>const_iterator</code>；如果对象不是常量，返回<code>iterator</code>：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="type">const</span> std::vector&lt;<span class="type">int</span>&gt; cv;</span><br><span class="line"><span class="comment">//it1是 vector&lt;int&gt;的迭代器，</span></span><br><span class="line"><span class="keyword">auto</span> it1 = v.<span class="built_in">begin</span>();</span><br><span class="line"><span class="comment">//it2是const vector&lt;int&gt;的迭代器</span></span><br><span class="line"><span class="keyword">auto</span> it2 = cv.<span class="built_in">begin</span>();</span><br></pre></td></tr></table></figure>

<p><strong>c++11</strong></p>
<p>如果一个容器非常量，我们也可以通过分别是cbegin和cend：获取对应的常量迭代器</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//it3的类型是vector&lt;int&gt;::const_iterator</span></span><br><span class="line"><span class="keyword">auto</span> it3 = v.<span class="built_in">cbegin</span>();</span><br></pre></td></tr></table></figure>

<h3 id="结合解引用和成员访问操作"><a href="#结合解引用和成员访问操作" class="headerlink" title="结合解引用和成员访问操作"></a>结合解引用和成员访问操作</h3><p>解引用迭代器可获得迭代器所指的对象，如果该对象的类型恰好是类，就有可能希望进一步访问它的成员。例如，对于一个由字符串组成的vector对象来说，要想检查其元素是否为空，令it是该vector对象的迭代器，只需检查it所指字符串是否为空就可以了，其代码如下所示：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(*it).<span class="built_in">empty</span>()</span><br></pre></td></tr></table></figure>

<p><code>(*it).empty()</code>中的圆括号必不可少，该表达式的含义是先对it解引用，然后解引用的结果再执行点运算符。</p>
<p>如果不加圆括号，点运算符将由it来执行将报错</p>
<p><strong>完整案例</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;std::string&gt; vs = &#123;<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it = vs.<span class="built_in">begin</span>(); it != vs.<span class="built_in">end</span>(); ++it)&#123;</span><br><span class="line">    <span class="comment">//(*it)解引用获取string对象，再次调用empty()方法判断为空</span></span><br><span class="line">    <span class="keyword">if</span>((*it).<span class="built_in">empty</span>())&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;empty string&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>为了简化上述表达式，C++语言定义了箭头运算符（-&gt;）。箭头运算符把解引用和成员访问两个操作结合在一起，也就是说，<code>it-&gt;mem</code>和<code>(*it).mem</code>表达的意思相同。</p>
<p>例如，假设用一个名为text的字符串向量存放文本文件中的数据，其中的元素或者是一句话或者是一个用于表示段落分隔的空字符串。如果要输出text中第一段的内容，可以利用迭代器写一个循环令其遍历text，直到遇到空字符串的元素为止：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//依次输出text的每一行直到遇到第一个空行为止</span></span><br><span class="line">std::vector&lt;std::string&gt; text = &#123;</span><br><span class="line">    <span class="string">&quot;hello&quot;</span>,</span><br><span class="line">    <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;world&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it = text.<span class="built_in">cbegin</span>(); it != text.<span class="built_in">cend</span>() &amp;&amp; !it-&gt;<span class="built_in">empty</span>(); ++it) &#123;</span><br><span class="line">    std::cout &lt;&lt; *it &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们首先初始化it令其指向text的第一个元素，循环重复执行直至处理完了text的所有元素或者发现某个元素为空。</p>
<p>每次迭代时只要发现还有元素并且尚未遇到空元素，就输出当前正在处理的元素。</p>
<p>值得注意的是，因为循环从头到尾只是读取text的元素而未向其中写值，所以使用了<code>cbegin</code>和<code>cend</code>来控制整个迭代过程。</p>
<h3 id="迭代器失效"><a href="#迭代器失效" class="headerlink" title="迭代器失效"></a>迭代器失效</h3><p>曾经介绍过，虽然vector对象可以动态地增长，但是也会有一些副作用。已知的一个限制是不能在范围for循环中向vector对象添加元素。另外一个限制是任何一种可能改变vector对象容量的操作，比如push_back，都会使该vector对象的迭代器失效。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注意下面逻辑错误，在for循环中push元素导致死循环</span></span><br><span class="line">std::vector&lt;<span class="type">int</span>&gt; numbers = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> i = <span class="number">0</span>; i &lt; numbers.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">    numbers.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也不要在循环中执行push操作</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注意下面逻辑错误，在for循环中push元素导致迭代器失效,也会导致死循环</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it = numbers.<span class="built_in">begin</span>(); it != numbers.<span class="built_in">end</span>(); ++it) &#123;</span><br><span class="line">    numbers.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同样我们执行删除操作也要注意，我们可以通过vector的erase操作删除迭代器指向的元素</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除第一个元素</span></span><br><span class="line">numbers.<span class="built_in">erase</span>(numbers.<span class="built_in">begin</span>() );</span><br></pre></td></tr></table></figure>

<p>erase会返回删除元素的下一个元素的迭代器</p>
<p><strong>面试题</strong></p>
<p>vector<int>容器存储了一系列数字，在循环中遍历每一个元素，并且删除其中的奇数，要求循环结束，vector元素为偶数，要求时间复杂度o(n)</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;<span class="type">int</span>&gt; numbers = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="comment">//循环遍历,并删除其中奇数</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it = numbers.<span class="built_in">begin</span>(); it != numbers.<span class="built_in">end</span>(); ) &#123;</span><br><span class="line">    <span class="comment">// 删除奇数</span></span><br><span class="line">    <span class="keyword">if</span>(*it % <span class="number">2</span> != <span class="number">0</span>)&#123;</span><br><span class="line">        it = numbers.<span class="built_in">erase</span>(it);</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ++it;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> num : numbers) &#123;</span><br><span class="line">    std::cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">std::cout &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>



<h3 id="迭代器运算-1"><a href="#迭代器运算-1" class="headerlink" title="迭代器运算"></a>迭代器运算</h3><p>迭代器的递增运算令迭代器每次移动一个元素，所有的标准库容器都有支持递增运算的迭代器。</p>
<p>类似的，也能用==和！=对任意标准库类型的两个有效迭代器，进行比较。</p>
<p>string和vector的迭代器提供了更多额外的运算符，一方面可使得迭代器的每次移动跨过多个元素，另外也支持迭代器进行关系运算。所有这些运算被称作迭代器运算（iterator arithmetic）。</p>
<p><img src="https://cdn.llfc.club/1728788292262.jpg" alt="https://cdn.llfc.club/1728788292262.jpg"></p>
<p><strong>迭代器的算术运算</strong></p>
<p>可以令迭代器和一个整数值相加（或相减），其返回值是向前（或向后）移动了若干个位置的迭代器。</p>
<p>执行这样的操作时，结果迭代器或者指示原vector对象（或string对象）内的一个元素，或者指示原vector对象（或string对象）尾元素的下一位置。</p>
<p>举个例子，下面的代码得到一个迭代器，它指向某vector对象中间位置的元素：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;<span class="type">int</span>&gt; numbers = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="comment">//中间位置的迭代器</span></span><br><span class="line"><span class="keyword">auto</span> mid = numbers.<span class="built_in">begin</span>() + numbers.<span class="built_in">size</span>()/<span class="number">2</span>;</span><br><span class="line"><span class="comment">//判断迭代器是否有效</span></span><br><span class="line"><span class="keyword">if</span>(mid != numbers.<span class="built_in">end</span>())&#123;</span><br><span class="line">    std::cout &lt;&lt; *mid &lt;&lt; std::endl;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;mid is end&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>mid指向了中间的元素3</p>
<h3 id="使用迭代器运算"><a href="#使用迭代器运算" class="headerlink" title="使用迭代器运算"></a>使用迭代器运算</h3><p>使用迭代器运算的一个经典算法是二分搜索。二分搜索从有序序列中寻找某个给定的值。</p>
<p>二分搜索从序列中间的位置开始搜索，如果中间位置的元素正好就是要找的元素，搜索完成；</p>
<p>如果不是，假如该元素小于要找的元素，则在序列的后半部分继续搜素；</p>
<p>假如该元素大于要找的元素，则在序列的前半部分继续搜索。</p>
<p>在缩小的范围中计算一个新的中间元素并重复之前的过程，直至最终找到目标或者没有元素可供继续搜索。</p>
<p>下面的程序使用迭代器完成了二分搜索：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;<span class="type">int</span>&gt; numbers = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="comment">//二分查找4所在的迭代器为止</span></span><br><span class="line"><span class="keyword">auto</span> beg = numbers.<span class="built_in">begin</span>(), end = numbers.<span class="built_in">end</span>();</span><br><span class="line"><span class="keyword">auto</span> mid = beg + (end - beg) / <span class="number">2</span>;</span><br><span class="line"><span class="comment">//二分查找</span></span><br><span class="line"><span class="keyword">while</span>(mid != end &amp;&amp; *mid != <span class="number">4</span>)&#123;</span><br><span class="line">    <span class="comment">//4在mid的右边</span></span><br><span class="line">    <span class="keyword">if</span>(*mid &lt; <span class="number">4</span>)&#123;</span><br><span class="line">        beg = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123; <span class="comment">//4在mid的左边</span></span><br><span class="line">        end = mid;</span><br><span class="line">    &#125;</span><br><span class="line">    mid = beg + (end - beg) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(mid != end)&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;4 is found&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;4 is not found&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>程序的一开始定义了三个迭代器：<code>beg</code>指向搜索范围内的第一个元素、<code>end</code>指向尾元素的下一位置、mid指向中间的那个元素。</p>
<p>初始状态下，搜索范围是名为<code>numbers</code>的<code>vector&lt;int&gt;</code>的全部范围。</p>
<p>循环部分先检查搜索范围是否为空，如果mid和end的当前值相等，说明已经找遍了所有元素。</p>
<p>此时条件不满足，循环终止。当搜索范围不为空时，可知<code>mid</code>指向了某个元素，检查该元素是否就是我们所要搜索的，如果是，也终止循环。</p>
<p>当进入到循环体内部后，程序通过某种规则移动<code>beg</code>或者<code>end</code>来缩小搜索的范围。</p>
<p>如果mid所指的元素比要找的元素4大，可推测若numbers含有4，则必出现在mid所指元素的前面。此时，可以忽略mid后面的元素不再查找，并把mid赋给end即可。</p>
<p>另一种情况，如果＊mid比4小，则要找的元素必出现在mid所指元素的后面。此时，通过令beg指向mid的下一个位置即可改变搜索范围。因为已经验证过mid不是我们要找的对象，所以在接下来的搜索中不必考虑它。</p>
<p>循环过程终止时，mid或者等于end或者指向要找的元素。如果mid等于end，说明numbers中没有我们要找的元素。</p>
<h2 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h2><h3 id="1-相邻元素的和"><a href="#1-相邻元素的和" class="headerlink" title="1 相邻元素的和"></a>1 相邻元素的和</h3><p><strong>题目描述：</strong><br> 编写一个程序，读取一组整数到一个 <code>std::vector</code> 中，并打印每对相邻元素的和。例如，给定输入 <code>1 2 3 4</code>，输出应为 <code>3 5 7</code>。</p>
<p><strong>代码示例：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; numbers;</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;请输入一组整数（以 -1 结束）: &quot;</span>;</span><br><span class="line">    <span class="keyword">while</span> (std::cin &gt;&gt; num &amp;&amp; num != <span class="number">-1</span>) &#123;</span><br><span class="line">        numbers.<span class="built_in">push_back</span>(num);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;相邻元素的和: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> it = numbers.<span class="built_in">begin</span>(); it + <span class="number">1</span> != numbers.<span class="built_in">end</span>(); ++it) &#123;</span><br><span class="line">        std::cout &lt;&lt; (*it + *(it + <span class="number">1</span>)) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>答案：</strong></p>
<ul>
<li>输入示例：<code>1 2 3 4 -1</code></li>
<li>输出示例：<code>相邻元素的和: 3 5 7</code></li>
</ul>
<h3 id="2-反向打印"><a href="#2-反向打印" class="headerlink" title="2 反向打印"></a>2 反向打印</h3><p><strong>描述：</strong> 编写一个程序，从用户输入一组整数到一个 <code>std::vector</code> 中，然后使用迭代器反向打印这些元素。</p>
<p><strong>代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; numbers;</span><br><span class="line">    <span class="type">int</span> input;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;请输入一组整数（输入-1结束输入）：\n&quot;</span>;</span><br><span class="line">    <span class="keyword">while</span> (std::cin &gt;&gt; input &amp;&amp; input != <span class="number">-1</span>) &#123;</span><br><span class="line">        numbers.<span class="built_in">push_back</span>(input);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;反向打印结果：&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (std::vector&lt;<span class="type">int</span>&gt;::reverse_iterator it = numbers.<span class="built_in">rbegin</span>(); it != numbers.<span class="built_in">rend</span>(); ++it) &#123;</span><br><span class="line">        std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>示例输入：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 2 3 4 5 -1</span><br></pre></td></tr></table></figure>



<p><strong>示例输出：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">反向打印结果：5 4 3 2 1 </span><br></pre></td></tr></table></figure>

<h3 id="3-合并两个-vector"><a href="#3-合并两个-vector" class="headerlink" title="3 合并两个 vector"></a>3 合并两个 <code>vector</code></h3><p><strong>描述：</strong> 编写一个程序，创建两个 <code>std::vector</code>，从用户输入填充它们。使用迭代器将这两个 <code>vector</code> 合并为一个新 <code>vector</code>。</p>
<p><strong>代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; vector1, vector2, mergedVector;</span><br><span class="line">    <span class="type">int</span> input;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;请输入第一个向量的整数（输入-1结束输入）：\n&quot;</span>;</span><br><span class="line">    <span class="keyword">while</span> (std::cin &gt;&gt; input &amp;&amp; input != <span class="number">-1</span>) &#123;</span><br><span class="line">        vector1.<span class="built_in">push_back</span>(input);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;请输入第二个向量的整数（输入-1结束输入）：\n&quot;</span>;</span><br><span class="line">    <span class="keyword">while</span> (std::cin &gt;&gt; input &amp;&amp; input != <span class="number">-1</span>) &#123;</span><br><span class="line">        vector2.<span class="built_in">push_back</span>(input);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 合并两个向量</span></span><br><span class="line">    mergedVector.<span class="built_in">insert</span>(mergedVector.<span class="built_in">end</span>(), vector1.<span class="built_in">begin</span>(), vector1.<span class="built_in">end</span>());</span><br><span class="line">    mergedVector.<span class="built_in">insert</span>(mergedVector.<span class="built_in">end</span>(), vector2.<span class="built_in">begin</span>(), vector2.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;合并后的向量结果：&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (std::vector&lt;<span class="type">int</span>&gt;::iterator it = mergedVector.<span class="built_in">begin</span>(); it != mergedVector.<span class="built_in">end</span>(); ++it) &#123;</span><br><span class="line">        std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>示例输入：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 2 3 -1</span><br><span class="line">4 5 6 -1</span><br></pre></td></tr></table></figure>



<p><strong>示例输出：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">合并后的向量结果：1 2 3 4 5 6 </span><br></pre></td></tr></table></figure>




          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.limerence2017.com/2024/10/04/cppbase12/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="恋恋风辰的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/04/cppbase12/" itemprop="url">零基础C++(12) vector类用法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2024-10-04T12:50:11+08:00">
                2024-10-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cppbase/" itemprop="url" rel="index">
                    <span itemprop="name">零基础C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-引言"><a href="#1-引言" class="headerlink" title="1. 引言"></a>1. 引言</h3><h4 id="什么是向量（Vector）？"><a href="#什么是向量（Vector）？" class="headerlink" title="什么是向量（Vector）？"></a>什么是向量（Vector）？</h4><p>向量（<strong>Vector</strong>）是 C++ 标准模板库（STL）中的一种序列容器，能够动态地管理可变大小的数组。与传统的固定大小的数组不同，向量可以根据需要随时调整其大小，提供更高的灵活性和便利性。</p>
<h4 id="向量与数组的比较"><a href="#向量与数组的比较" class="headerlink" title="向量与数组的比较"></a>向量与数组的比较</h4><table>
<thead>
<tr>
<th>特性</th>
<th>数组（Array）</th>
<th>向量（Vector）</th>
</tr>
</thead>
<tbody><tr>
<td>大小</td>
<td>固定大小（编译时或运行时）</td>
<td>动态可变大小</td>
</tr>
<tr>
<td>内存管理</td>
<td>手动管理（需要预留足够空间）</td>
<td>自动管理（自动扩展或收缩）</td>
</tr>
<tr>
<td>支持的操作</td>
<td>限制较多</td>
<td>丰富的成员函数和操作</td>
</tr>
<tr>
<td>安全性</td>
<td>较低（易发生缓冲区溢出）</td>
<td>较高（通过成员函数进行边界检查）</td>
</tr>
<tr>
<td>与 STL 算法的兼容性</td>
<td>低</td>
<td>高</td>
</tr>
</tbody></table>
<hr>
<h3 id="2-std-vector-基础"><a href="#2-std-vector-基础" class="headerlink" title="2. std::vector 基础"></a>2. <code>std::vector</code> 基础</h3><h4 id="2-1-包含头文件"><a href="#2-1-包含头文件" class="headerlink" title="2.1 包含头文件"></a>2.1 包含头文件</h4><p>使用 <code>std::vector</code> 需要包含 <code>&lt;vector&gt;</code> 头文件：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br></pre></td></tr></table></figure>



<h4 id="2-2-定义与初始化"><a href="#2-2-定义与初始化" class="headerlink" title="2.2 定义与初始化"></a>2.2 定义与初始化</h4><p><strong>定义一个整数向量：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;<span class="type">int</span>&gt; numbers;</span><br></pre></td></tr></table></figure>



<p><strong>定义一个字符串向量：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line">std::vector&lt;std::string&gt; words;</span><br></pre></td></tr></table></figure>



<p><strong>初始化向量：</strong></p>
<ul>
<li><p><strong>默认初始化：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;<span class="type">int</span>&gt; vec1; <span class="comment">// 空向量</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>指定大小和默认值：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::vector&lt;<span class="type">int</span>&gt; <span class="title">vec2</span><span class="params">(<span class="number">5</span>, <span class="number">10</span>)</span></span>; <span class="comment">// 5个元素，值均为10</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>使用初始化列表：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;<span class="type">int</span>&gt; vec3 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>拷贝构造：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::vector&lt;<span class="type">int</span>&gt; <span class="title">vec4</span><span class="params">(vec3)</span></span>; <span class="comment">// 复制vec3</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>移动构造：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::vector&lt;<span class="type">int</span>&gt; <span class="title">vec5</span><span class="params">(std::move(vec4))</span></span>; <span class="comment">// 移动vec4到vec5</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 默认初始化</span></span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; vec1;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 指定大小和默认值</span></span><br><span class="line">    <span class="function">std::vector&lt;<span class="type">int</span>&gt; <span class="title">vec2</span><span class="params">(<span class="number">5</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用初始化列表</span></span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; vec3 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 拷贝构造</span></span><br><span class="line">    <span class="function">std::vector&lt;<span class="type">int</span>&gt; <span class="title">vec4</span><span class="params">(vec3)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 移动构造</span></span><br><span class="line">    <span class="function">std::vector&lt;<span class="type">int</span>&gt; <span class="title">vec5</span><span class="params">(std::move(vec4))</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 输出vec2</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;vec2: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> num : vec2) &#123;</span><br><span class="line">        std::cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 输出vec3</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;vec3: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> num : vec3) &#123;</span><br><span class="line">        std::cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 输出vec5</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;vec5: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> num : vec5) &#123;</span><br><span class="line">        std::cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">vec2: 10 10 10 10 10 </span></span><br><span class="line"><span class="section">vec3: 1 2 3 4 5 </span></span><br><span class="line"><span class="section">vec5: 1 2 3 4 5 </span></span><br></pre></td></tr></table></figure>



<h4 id="2-3-向量的大小与容量"><a href="#2-3-向量的大小与容量" class="headerlink" title="2.3 向量的大小与容量"></a>2.3 向量的大小与容量</h4><ul>
<li>**<code>size()</code>**：返回向量中元素的数量。</li>
<li>**<code>capacity()</code>**：返回向量目前为止分配的存储容量。</li>
<li>**<code>empty()</code>**：检查向量是否为空。</li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; vec = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Size: &quot;</span> &lt;&lt; vec.<span class="built_in">size</span>() &lt;&lt; std::endl;       <span class="comment">// 输出: 3</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Capacity: &quot;</span> &lt;&lt; vec.<span class="built_in">capacity</span>() &lt;&lt; std::endl; <span class="comment">// 输出: 3（或更大，取决于实现）</span></span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Is empty? &quot;</span> &lt;&lt; (vec.<span class="built_in">empty</span>() ? <span class="string">&quot;Yes&quot;</span> : <span class="string">&quot;No&quot;</span>) &lt;&lt; std::endl; <span class="comment">// 输出: No</span></span><br><span class="line">    </span><br><span class="line">    vec.<span class="built_in">reserve</span>(<span class="number">10</span>); <span class="comment">// 预留容量</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;After reserve(10), Capacity: &quot;</span> &lt;&lt; vec.<span class="built_in">capacity</span>() &lt;&lt; std::endl; <span class="comment">// 输出: 10</span></span><br><span class="line">    </span><br><span class="line">    vec.<span class="built_in">shrink_to_fit</span>(); <span class="comment">// 收缩到适合大小</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;After shrink_to_fit(), Capacity: &quot;</span> &lt;&lt; vec.<span class="built_in">capacity</span>() &lt;&lt; std::endl; <span class="comment">// 输出: 3</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出示例：</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Size:</span> <span class="number">3</span></span><br><span class="line"><span class="attr">Capacity:</span> <span class="number">3</span></span><br><span class="line"><span class="string">Is</span> <span class="string">empty?</span> <span class="literal">No</span></span><br><span class="line"><span class="string">After</span> <span class="string">reserve(10),</span> <span class="attr">Capacity:</span> <span class="number">10</span></span><br><span class="line"><span class="string">After</span> <span class="string">shrink_to_fit(),</span> <span class="attr">Capacity:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>



<p><strong>注意：</strong> <code>capacity()</code> 并不一定精确匹配 <code>size()</code>，它表示在需要重新分配内存之前，向量可以容纳的元素数量。</p>
<hr>
<h3 id="3-向量的基本操作"><a href="#3-向量的基本操作" class="headerlink" title="3. 向量的基本操作"></a>3. 向量的基本操作</h3><h4 id="3-1-添加与删除元素"><a href="#3-1-添加与删除元素" class="headerlink" title="3.1 添加与删除元素"></a>3.1 添加与删除元素</h4><ul>
<li>**<code>push_back()</code>**：在向量末尾添加一个元素。</li>
<li>**<code>pop_back()</code>**：移除向量末尾的元素。</li>
<li>**<code>insert()</code>**：在指定位置插入元素。</li>
<li>**<code>erase()</code>**：移除指定位置的元素或范围内的元素。</li>
<li>**<code>clear()</code>**：移除所有元素。</li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; vec;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用push_back添加元素</span></span><br><span class="line">    vec.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">    vec.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">    vec.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;After push_back: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> num : vec) &#123;</span><br><span class="line">        std::cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl; <span class="comment">// 输出: 10 20 30 </span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用pop_back移除最后一个元素</span></span><br><span class="line">    vec.<span class="built_in">pop_back</span>();</span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;After pop_back: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> num : vec) &#123;</span><br><span class="line">        std::cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl; <span class="comment">// 输出: 10 20 </span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 在第二个位置插入25</span></span><br><span class="line">    vec.<span class="built_in">insert</span>(vec.<span class="built_in">begin</span>() + <span class="number">1</span>, <span class="number">25</span>);</span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;After insert: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> num : vec) &#123;</span><br><span class="line">        std::cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl; <span class="comment">// 输出: 10 25 20 </span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 删除第二个元素（25）</span></span><br><span class="line">    vec.<span class="built_in">erase</span>(vec.<span class="built_in">begin</span>() + <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;After erase: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> num : vec) &#123;</span><br><span class="line">        std::cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl; <span class="comment">// 输出: 10 20 </span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 清空向量</span></span><br><span class="line">    vec.<span class="built_in">clear</span>();</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;After clear, size: &quot;</span> &lt;&lt; vec.<span class="built_in">size</span>() &lt;&lt; std::endl; <span class="comment">// 输出: 0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">After push_back:</span> <span class="number">10</span> <span class="number">20</span> <span class="number">30</span> </span><br><span class="line"><span class="attr">After pop_back:</span> <span class="number">10</span> <span class="number">20</span> </span><br><span class="line"><span class="attr">After insert:</span> <span class="number">10</span> <span class="number">25</span> <span class="number">20</span> </span><br><span class="line"><span class="attr">After erase:</span> <span class="number">10</span> <span class="number">20</span> </span><br><span class="line"><span class="string">After</span> <span class="string">clear,</span> <span class="attr">size:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>



<h4 id="3-2-访问元素"><a href="#3-2-访问元素" class="headerlink" title="3.2 访问元素"></a>3.2 访问元素</h4><ul>
<li>**<code>operator[]</code>**：通过索引访问元素。</li>
<li>**<code>at()</code>**：通过索引访问元素，带边界检查。</li>
<li>**<code>front()</code>**：访问第一个元素。</li>
<li>**<code>back()</code>**：访问最后一个元素。</li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;std::string&gt; fruits = &#123;<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Cherry&quot;</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用operator[]访问元素</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;First fruit: &quot;</span> &lt;&lt; fruits[<span class="number">0</span>] &lt;&lt; std::endl; <span class="comment">// 输出: Apple</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用at()访问元素</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Second fruit: &quot;</span> &lt;&lt; fruits.<span class="built_in">at</span>(<span class="number">1</span>) &lt;&lt; std::endl; <span class="comment">// 输出: Banana</span></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Invalid fruit: &quot;</span> &lt;&lt; fruits.<span class="built_in">at</span>(<span class="number">5</span>) &lt;&lt; std::endl; <span class="comment">// 抛出异常</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span>(<span class="type">const</span> std::out_of_range&amp; e) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Exception: &quot;</span> &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用front()和back()</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Front: &quot;</span> &lt;&lt; fruits.<span class="built_in">front</span>() &lt;&lt; std::endl; <span class="comment">// 输出: Apple</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Back: &quot;</span> &lt;&lt; fruits.<span class="built_in">back</span>() &lt;&lt; std::endl;   <span class="comment">// 输出: Cherry</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">First fruit: Apple</span><br><span class="line">Second fruit: Banana</span><br><span class="line"><span class="symbol">Exception:</span> vector::_M_range_check: __n (which <span class="built_in">is</span> <span class="number">5</span>) &gt;= this-&gt;size() (which <span class="built_in">is</span> <span class="number">3</span>)</span><br><span class="line"><span class="symbol">Front:</span> Apple</span><br><span class="line"><span class="symbol">Back:</span> Cherry</span><br></pre></td></tr></table></figure>



<h4 id="3-3-遍历向量"><a href="#3-3-遍历向量" class="headerlink" title="3.3 遍历向量"></a>3.3 遍历向量</h4><ul>
<li><strong>使用范围 <code>for</code> 循环</strong></li>
<li><strong>使用传统 <code>for</code> 循环</strong></li>
<li><strong>使用迭代器</strong></li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; numbers = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用范围 for 循环</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Using range-based for loop: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> num : numbers) &#123;</span><br><span class="line">        std::cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用传统 for 循环</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Using traditional for loop: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; numbers.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        std::cout &lt;&lt; numbers[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用迭代器</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Using iterators: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> it = numbers.<span class="built_in">begin</span>(); it != numbers.<span class="built_in">end</span>(); ++it) &#123;</span><br><span class="line">        std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Using</span> range-based <span class="keyword">for</span> <span class="keyword">loop</span>: <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> </span><br><span class="line"><span class="keyword">Using</span> traditional <span class="keyword">for</span> <span class="keyword">loop</span>: <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> </span><br><span class="line"><span class="keyword">Using</span> iterators: <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> </span><br></pre></td></tr></table></figure>



<h4 id="3-4-修改元素"><a href="#3-4-修改元素" class="headerlink" title="3.4 修改元素"></a>3.4 修改元素</h4><ul>
<li><strong>通过索引或迭代器修改</strong></li>
<li><strong>使用 <code>assign()</code> 重新赋值</strong></li>
<li><strong>替换整个向量内容</strong></li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; vec = &#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 通过索引修改元素</span></span><br><span class="line">    vec[<span class="number">2</span>] = <span class="number">35</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用 at() 修改元素</span></span><br><span class="line">    vec.<span class="built_in">at</span>(<span class="number">4</span>) = <span class="number">55</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用迭代器修改元素</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> it = vec.<span class="built_in">begin</span>(); it != vec.<span class="built_in">end</span>(); ++it) &#123;</span><br><span class="line">        <span class="keyword">if</span>(*it == <span class="number">20</span>) &#123;</span><br><span class="line">            *it = <span class="number">25</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 输出修改后的向量</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Modified vector: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> num : vec) &#123;</span><br><span class="line">        std::cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl; <span class="comment">// 输出: 10 25 35 40 55 </span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Modified vector: <span class="number">10</span> <span class="number">25</span> <span class="number">35</span> <span class="number">40</span> <span class="number">55</span> </span><br></pre></td></tr></table></figure>



<hr>
<h3 id="4-向量的高级用法"><a href="#4-向量的高级用法" class="headerlink" title="4. 向量的高级用法"></a>4. 向量的高级用法</h3><h4 id="4-1-嵌套向量（二维向量）"><a href="#4-1-嵌套向量（二维向量）" class="headerlink" title="4.1 嵌套向量（二维向量）"></a>4.1 嵌套向量（二维向量）</h4><p>向量可以包含其他向量，形成多维数组结构。</p>
<p><strong>示例代码：二维向量</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 定义一个3x4的二维向量，初始化为0</span></span><br><span class="line">    std::vector&lt;std::vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">matrix</span>(<span class="number">3</span>, std::<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">4</span>, <span class="number">0</span>));</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 填充矩阵</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; ++j) &#123;</span><br><span class="line">            matrix[i][j] = i * <span class="number">4</span> + j + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 输出矩阵</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Matrix:&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> row : matrix) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> elem : row) &#123;</span><br><span class="line">            std::cout &lt;&lt; elem &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        std::cout &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">Matrix:</span></span><br><span class="line">1	2	3	4	</span><br><span class="line">5	6	7	8	</span><br><span class="line">9	10	11	12	</span><br></pre></td></tr></table></figure>



<h4 id="4-2-向量与其他数据结构结合"><a href="#4-2-向量与其他数据结构结合" class="headerlink" title="4.2 向量与其他数据结构结合"></a>4.2 向量与其他数据结构结合</h4><p>向量可以与结构体、类等其他数据结构结合使用，增强数据组织能力。</p>
<p><strong>示例代码：向量与结构体结合</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义学生结构体</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="type">float</span> grade;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 定义一个学生向量</span></span><br><span class="line">    std::vector&lt;Student&gt; students;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 添加学生</span></span><br><span class="line">    students.<span class="built_in">push_back</span>(&#123;<span class="number">1001</span>, <span class="string">&quot;Alice&quot;</span>, <span class="number">89.5</span>&#125;);</span><br><span class="line">    students.<span class="built_in">push_back</span>(&#123;<span class="number">1002</span>, <span class="string">&quot;Bob&quot;</span>, <span class="number">92.0</span>&#125;);</span><br><span class="line">    students.<span class="built_in">push_back</span>(&#123;<span class="number">1003</span>, <span class="string">&quot;Charlie&quot;</span>, <span class="number">85.0</span>&#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 遍历并输出学生信息</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">const</span> <span class="keyword">auto</span>&amp; student : students) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;ID: &quot;</span> &lt;&lt; student.id </span><br><span class="line">                  &lt;&lt; <span class="string">&quot;, Name: &quot;</span> &lt;&lt; student.name </span><br><span class="line">                  &lt;&lt; <span class="string">&quot;, Grade: &quot;</span> &lt;&lt; student.grade &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ID:</span> <span class="number">1001</span><span class="string">,</span> <span class="attr">Name:</span> <span class="string">Alice,</span> <span class="attr">Grade:</span> <span class="number">89.5</span></span><br><span class="line"><span class="attr">ID:</span> <span class="number">1002</span><span class="string">,</span> <span class="attr">Name:</span> <span class="string">Bob,</span> <span class="attr">Grade:</span> <span class="number">92</span></span><br><span class="line"><span class="attr">ID:</span> <span class="number">1003</span><span class="string">,</span> <span class="attr">Name:</span> <span class="string">Charlie,</span> <span class="attr">Grade:</span> <span class="number">85</span></span><br></pre></td></tr></table></figure>



<h4 id="4-3-使用迭代器操作向量"><a href="#4-3-使用迭代器操作向量" class="headerlink" title="4.3 使用迭代器操作向量"></a>4.3 使用迭代器操作向量</h4><p>迭代器是一种指针类型，用于遍历和操作容器中的元素。</p>
<p><strong>示例代码：使用迭代器</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; vec = &#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用迭代器遍历并修改元素</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> it = vec.<span class="built_in">begin</span>(); it != vec.<span class="built_in">end</span>(); ++it) &#123;</span><br><span class="line">        *it += <span class="number">5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 输出修改后的向量</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;After modifying: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> it = vec.<span class="built_in">begin</span>(); it != vec.<span class="built_in">end</span>(); ++it) &#123;</span><br><span class="line">        std::cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl; <span class="comment">// 输出: 15 25 35 45 55 </span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">After modifying:</span> <span class="number">15</span> <span class="number">25</span> <span class="number">35</span> <span class="number">45</span> <span class="number">55</span> </span><br></pre></td></tr></table></figure>



<hr>
<h3 id="5-常用算法与向量"><a href="#5-常用算法与向量" class="headerlink" title="5. 常用算法与向量"></a>5. 常用算法与向量</h3><h4 id="5-1-排序"><a href="#5-1-排序" class="headerlink" title="5.1 排序"></a>5.1 排序</h4><p>可以使用 <code>&lt;algorithm&gt;</code> 头文件中的 <code>sort()</code> 函数对向量进行排序。</p>
<p><strong>示例代码：对整数向量排序</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; numbers = &#123;<span class="number">50</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="number">10</span>, <span class="number">30</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 排序前</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Before sorting: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> num : numbers) &#123;</span><br><span class="line">        std::cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用sort()排序</span></span><br><span class="line">    std::<span class="built_in">sort</span>(numbers.<span class="built_in">begin</span>(), numbers.<span class="built_in">end</span>());</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 排序后</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;After sorting: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> num : numbers) &#123;</span><br><span class="line">        std::cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Before sorting:</span> <span class="number">50</span> <span class="number">20</span> <span class="number">40</span> <span class="number">10</span> <span class="number">30</span> </span><br><span class="line"><span class="attr">After sorting:</span> <span class="number">10</span> <span class="number">20</span> <span class="number">30</span> <span class="number">40</span> <span class="number">50</span> </span><br></pre></td></tr></table></figure>



<p><strong>自定义排序规则：降序</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; numbers = &#123;<span class="number">50</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="number">10</span>, <span class="number">30</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用sort()并传入lambda表达式进行降序排序</span></span><br><span class="line">    std::<span class="built_in">sort</span>(numbers.<span class="built_in">begin</span>(), numbers.<span class="built_in">end</span>(), [](<span class="type">int</span> a, <span class="type">int</span> b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a &gt; b;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 输出排序后的向量</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;After sorting in descending order: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> num : numbers) &#123;</span><br><span class="line">        std::cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">After sorting <span class="keyword">in</span> <span class="keyword">descending</span> order: <span class="number">50</span> <span class="number">40</span> <span class="number">30</span> <span class="number">20</span> <span class="number">10</span> </span><br></pre></td></tr></table></figure>



<h4 id="5-2-反转"><a href="#5-2-反转" class="headerlink" title="5.2 反转"></a>5.2 反转</h4><p>使用 <code>reverse()</code> 函数可以反转向量中的元素顺序。</p>
<p><strong>示例代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">char</span>&gt; letters = &#123;<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;E&#x27;</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Before reversing: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> c : letters) &#123;</span><br><span class="line">        std::cout &lt;&lt; c &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 反转向量</span></span><br><span class="line">    std::<span class="built_in">reverse</span>(letters.<span class="built_in">begin</span>(), letters.<span class="built_in">end</span>());</span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;After reversing: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> c : letters) &#123;</span><br><span class="line">        std::cout &lt;&lt; c &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">Before</span> <span class="selector-tag">reversing</span>: <span class="selector-tag">A</span> <span class="selector-tag">B</span> <span class="selector-tag">C</span> <span class="selector-tag">D</span> <span class="selector-tag">E</span> </span><br><span class="line"><span class="selector-tag">After</span> <span class="selector-tag">reversing</span>: <span class="selector-tag">E</span> <span class="selector-tag">D</span> <span class="selector-tag">C</span> <span class="selector-tag">B</span> <span class="selector-tag">A</span> </span><br></pre></td></tr></table></figure>



<h4 id="5-3-查找"><a href="#5-3-查找" class="headerlink" title="5.3 查找"></a>5.3 查找</h4><p>使用 <code>find()</code> 函数可以在向量中查找特定元素。</p>
<p><strong>示例代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;std::string&gt; fruits = &#123;<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Cherry&quot;</span>, <span class="string">&quot;Date&quot;</span>&#125;;</span><br><span class="line">    std::string target = <span class="string">&quot;Cherry&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用find()查找元素</span></span><br><span class="line">    <span class="keyword">auto</span> it = std::<span class="built_in">find</span>(fruits.<span class="built_in">begin</span>(), fruits.<span class="built_in">end</span>(), target);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(it != fruits.<span class="built_in">end</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; target &lt;&lt; <span class="string">&quot; found at position &quot;</span> &lt;&lt; std::<span class="built_in">distance</span>(fruits.<span class="built_in">begin</span>(), it) &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; target &lt;&lt; <span class="string">&quot; not found.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cherry found at <span class="attribute">position</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>



<hr>
<h3 id="6-向量的性能与优化"><a href="#6-向量的性能与优化" class="headerlink" title="6. 向量的性能与优化"></a>6. 向量的性能与优化</h3><h4 id="6-1-内存管理"><a href="#6-1-内存管理" class="headerlink" title="6.1 内存管理"></a>6.1 内存管理</h4><p>向量会动态地管理内存，自动调整其容量以适应新增或删除的元素。频繁的内存分配可能会影响性能。</p>
<h4 id="6-2-预留空间"><a href="#6-2-预留空间" class="headerlink" title="6.2 预留空间"></a>6.2 预留空间</h4><p>使用 <code>reserve()</code> 可以提前为向量分配足够的内存，减少内存重新分配的次数，提高性能。</p>
<p><strong>示例代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; vec;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 预留空间</span></span><br><span class="line">    vec.<span class="built_in">reserve</span>(<span class="number">1000</span>);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Capacity after reserve(1000): &quot;</span> &lt;&lt; vec.<span class="built_in">capacity</span>() &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 添加元素</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; ++i) &#123;</span><br><span class="line">        vec.<span class="built_in">push_back</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Size after adding elements: &quot;</span> &lt;&lt; vec.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Capacity after adding elements: &quot;</span> &lt;&lt; vec.<span class="built_in">capacity</span>() &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出示例：</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">Capacity</span> <span class="string">after</span> <span class="string">reserve(1000):</span> <span class="number">1000</span></span><br><span class="line"><span class="attr">Size after adding elements:</span> <span class="number">1000</span></span><br><span class="line"><span class="attr">Capacity after adding elements:</span> <span class="number">1000</span></span><br></pre></td></tr></table></figure>



<h4 id="6-3-收缩容量"><a href="#6-3-收缩容量" class="headerlink" title="6.3 收缩容量"></a>6.3 收缩容量</h4><p>使用 <code>shrink_to_fit()</code> 可以请求收缩向量的容量以匹配其大小，释放多余的内存。</p>
<p><strong>示例代码：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; vec;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 预留较大的空间</span></span><br><span class="line">    vec.<span class="built_in">reserve</span>(<span class="number">1000</span>);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Capacity before adding: &quot;</span> &lt;&lt; vec.<span class="built_in">capacity</span>() &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 添加少量元素</span></span><br><span class="line">    vec.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">    vec.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">    vec.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Size after adding: &quot;</span> &lt;&lt; vec.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Capacity after adding: &quot;</span> &lt;&lt; vec.<span class="built_in">capacity</span>() &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 收缩容量</span></span><br><span class="line">    vec.<span class="built_in">shrink_to_fit</span>();</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Capacity after shrink_to_fit: &quot;</span> &lt;&lt; vec.<span class="built_in">capacity</span>() &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出示例：</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Capacity before adding:</span> <span class="number">1000</span></span><br><span class="line"><span class="attr">Size after adding:</span> <span class="number">3</span></span><br><span class="line"><span class="attr">Capacity after adding:</span> <span class="number">1000</span></span><br><span class="line"><span class="attr">Capacity after shrink_to_fit:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>



<hr>
<h3 id="7-示例项目"><a href="#7-示例项目" class="headerlink" title="7. 示例项目"></a>7. 示例项目</h3><h4 id="示例项目1：学生信息管理系统"><a href="#示例项目1：学生信息管理系统" class="headerlink" title="示例项目1：学生信息管理系统"></a>示例项目1：学生信息管理系统</h4><p><strong>需求分析：</strong></p>
<p>创建一个程序，管理学生的信息，包括添加、删除、显示和查找学生。每个学生包含ID、姓名和成绩。</p>
<p><strong>代码实现：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义学生结构体</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="type">float</span> grade;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印学生信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printStudent</span><span class="params">(<span class="type">const</span> Student&amp; student)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;ID: &quot;</span> &lt;&lt; student.id </span><br><span class="line">              &lt;&lt; <span class="string">&quot;, Name: &quot;</span> &lt;&lt; student.name </span><br><span class="line">              &lt;&lt; <span class="string">&quot;, Grade: &quot;</span> &lt;&lt; student.grade &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加学生</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">addStudent</span><span class="params">(std::vector&lt;Student&gt;&amp; students)</span> </span>&#123;</span><br><span class="line">    Student s;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Enter Student ID: &quot;</span>;</span><br><span class="line">    std::cin &gt;&gt; s.id;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Enter Student Name: &quot;</span>;</span><br><span class="line">    std::cin.<span class="built_in">ignore</span>(); <span class="comment">// 忽略之前输入的换行符</span></span><br><span class="line">    std::<span class="built_in">getline</span>(std::cin, s.name);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Enter Student Grade: &quot;</span>;</span><br><span class="line">    std::cin &gt;&gt; s.grade;</span><br><span class="line">    students.<span class="built_in">push_back</span>(s);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Student added successfully.\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除学生</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">deleteStudent</span><span class="params">(std::vector&lt;Student&gt;&amp; students)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Enter Student ID to delete: &quot;</span>;</span><br><span class="line">    std::cin &gt;&gt; id;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> it = std::<span class="built_in">find_if</span>(students.<span class="built_in">begin</span>(), students.<span class="built_in">end</span>(), [id](<span class="type">const</span> Student&amp; s) &#123;</span><br><span class="line">        <span class="keyword">return</span> s.id == id;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(it != students.<span class="built_in">end</span>()) &#123;</span><br><span class="line">        students.<span class="built_in">erase</span>(it);</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Student deleted successfully.\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Student with ID &quot;</span> &lt;&lt; id &lt;&lt; <span class="string">&quot; not found.\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示所有学生</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">displayStudents</span><span class="params">(<span class="type">const</span> std::vector&lt;Student&gt;&amp; students)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(students.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;No students available.\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Student List:\n&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">const</span> <span class="keyword">auto</span>&amp; s : students) &#123;</span><br><span class="line">        <span class="built_in">printStudent</span>(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找学生</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">findStudent</span><span class="params">(<span class="type">const</span> std::vector&lt;Student&gt;&amp; students)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Enter Student ID to find: &quot;</span>;</span><br><span class="line">    std::cin &gt;&gt; id;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> it = std::<span class="built_in">find_if</span>(students.<span class="built_in">begin</span>(), students.<span class="built_in">end</span>(), [id](<span class="type">const</span> Student&amp; s) &#123;</span><br><span class="line">        <span class="keyword">return</span> s.id == id;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(it != students.<span class="built_in">end</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Student Found:\n&quot;</span>;</span><br><span class="line">        <span class="built_in">printStudent</span>(*it);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Student with ID &quot;</span> &lt;&lt; id &lt;&lt; <span class="string">&quot; not found.\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;Student&gt; students;</span><br><span class="line">    <span class="type">int</span> choice;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;\n=== Student Management System ===\n&quot;</span>;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;1. Add Student\n&quot;</span>;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;2. Delete Student\n&quot;</span>;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;3. Display All Students\n&quot;</span>;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;4. Find Student by ID\n&quot;</span>;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;5. Exit\n&quot;</span>;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Enter your choice (1-5): &quot;</span>;</span><br><span class="line">        std::cin &gt;&gt; choice;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">switch</span>(choice) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                <span class="built_in">addStudent</span>(students);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                <span class="built_in">deleteStudent</span>(students);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                <span class="built_in">displayStudents</span>(students);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                <span class="built_in">findStudent</span>(students);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">                std::cout &lt;&lt; <span class="string">&quot;Exiting the system.\n&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                std::cout &lt;&lt; <span class="string">&quot;Invalid choice. Please choose between 1-5.\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125; <span class="keyword">while</span>(choice != <span class="number">5</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>运行示例：</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">=== Student Management System ===</span><br><span class="line"><span class="bullet">1.</span> Add Student</span><br><span class="line"><span class="bullet">2.</span> Delete Student</span><br><span class="line"><span class="bullet">3.</span> Display All Students</span><br><span class="line"><span class="bullet">4.</span> Find Student by ID</span><br><span class="line"><span class="bullet">5.</span> Exit</span><br><span class="line">Enter your choice (1-5): 1</span><br><span class="line">Enter Student ID: 1001</span><br><span class="line">Enter Student Name: Alice</span><br><span class="line">Enter Student Grade: 89.5</span><br><span class="line">Student added successfully.</span><br><span class="line"></span><br><span class="line">=== Student Management System ===</span><br><span class="line"><span class="bullet">1.</span> Add Student</span><br><span class="line"><span class="bullet">2.</span> Delete Student</span><br><span class="line"><span class="bullet">3.</span> Display All Students</span><br><span class="line"><span class="bullet">4.</span> Find Student by ID</span><br><span class="line"><span class="bullet">5.</span> Exit</span><br><span class="line">Enter your choice (1-5): 1</span><br><span class="line">Enter Student ID: 1002</span><br><span class="line">Enter Student Name: Bob</span><br><span class="line">Enter Student Grade: 92</span><br><span class="line">Student added successfully.</span><br><span class="line"></span><br><span class="line">=== Student Management System ===</span><br><span class="line"><span class="bullet">1.</span> Add Student</span><br><span class="line"><span class="bullet">2.</span> Delete Student</span><br><span class="line"><span class="bullet">3.</span> Display All Students</span><br><span class="line"><span class="bullet">4.</span> Find Student by ID</span><br><span class="line"><span class="bullet">5.</span> Exit</span><br><span class="line">Enter your choice (1-5): 3</span><br><span class="line">Student List:</span><br><span class="line">ID: 1001, Name: Alice, Grade: 89.5</span><br><span class="line">ID: 1002, Name: Bob, Grade: 92</span><br><span class="line"></span><br><span class="line">=== Student Management System ===</span><br><span class="line"><span class="bullet">1.</span> Add Student</span><br><span class="line"><span class="bullet">2.</span> Delete Student</span><br><span class="line"><span class="bullet">3.</span> Display All Students</span><br><span class="line"><span class="bullet">4.</span> Find Student by ID</span><br><span class="line"><span class="bullet">5.</span> Exit</span><br><span class="line">Enter your choice (1-5): 4</span><br><span class="line">Enter Student ID to find: 1001</span><br><span class="line">Student Found:</span><br><span class="line">ID: 1001, Name: Alice, Grade: 89.5</span><br><span class="line"></span><br><span class="line">=== Student Management System ===</span><br><span class="line"><span class="bullet">1.</span> Add Student</span><br><span class="line"><span class="bullet">2.</span> Delete Student</span><br><span class="line"><span class="bullet">3.</span> Display All Students</span><br><span class="line"><span class="bullet">4.</span> Find Student by ID</span><br><span class="line"><span class="bullet">5.</span> Exit</span><br><span class="line">Enter your choice (1-5): 5</span><br><span class="line">Exiting the system.</span><br></pre></td></tr></table></figure>



<p><strong>代码解析：</strong></p>
<ol>
<li><strong>结构体定义：</strong> 定义了一个 <code>Student</code> 结构体，包含 <code>id</code>、<code>name</code> 和 <code>grade</code>。</li>
<li>功能函数：<ul>
<li><code>addStudent</code>：添加新学生。</li>
<li><code>deleteStudent</code>：根据 ID 删除学生。</li>
<li><code>displayStudents</code>：显示所有学生的信息。</li>
<li><code>findStudent</code>：根据 ID 查找并显示学生信息。</li>
</ul>
</li>
<li><strong>主函数：</strong> 提供一个菜单驱动的用户界面，允许用户选择不同的操作。</li>
</ol>
<h4 id="示例项目2：动态库存管理系统"><a href="#示例项目2：动态库存管理系统" class="headerlink" title="示例项目2：动态库存管理系统"></a>示例项目2：动态库存管理系统</h4><p><strong>需求分析：</strong></p>
<p>创建一个程序，管理库存中的商品信息，包括添加、删除、更新和显示商品。每个商品包含商品ID、名称和数量。</p>
<p><strong>代码实现：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义商品结构体</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="type">int</span> quantity;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印商品信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printProduct</span><span class="params">(<span class="type">const</span> Product&amp; product)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;ID: &quot;</span> &lt;&lt; product.id </span><br><span class="line">              &lt;&lt; <span class="string">&quot;, Name: &quot;</span> &lt;&lt; product.name </span><br><span class="line">              &lt;&lt; <span class="string">&quot;, Quantity: &quot;</span> &lt;&lt; product.quantity &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加商品</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">addProduct</span><span class="params">(std::vector&lt;Product&gt;&amp; products)</span> </span>&#123;</span><br><span class="line">    Product p;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Enter Product ID: &quot;</span>;</span><br><span class="line">    std::cin &gt;&gt; p.id;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Enter Product Name: &quot;</span>;</span><br><span class="line">    std::cin.<span class="built_in">ignore</span>(); <span class="comment">// 忽略之前输入的换行符</span></span><br><span class="line">    std::<span class="built_in">getline</span>(std::cin, p.name);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Enter Product Quantity: &quot;</span>;</span><br><span class="line">    std::cin &gt;&gt; p.quantity;</span><br><span class="line">    products.<span class="built_in">push_back</span>(p);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Product added successfully.\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除商品</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">deleteProduct</span><span class="params">(std::vector&lt;Product&gt;&amp; products)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Enter Product ID to delete: &quot;</span>;</span><br><span class="line">    std::cin &gt;&gt; id;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> it = std::<span class="built_in">find_if</span>(products.<span class="built_in">begin</span>(), products.<span class="built_in">end</span>(), [id](<span class="type">const</span> Product&amp; p) &#123;</span><br><span class="line">        <span class="keyword">return</span> p.id == id;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(it != products.<span class="built_in">end</span>()) &#123;</span><br><span class="line">        products.<span class="built_in">erase</span>(it);</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Product deleted successfully.\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Product with ID &quot;</span> &lt;&lt; id &lt;&lt; <span class="string">&quot; not found.\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新商品数量</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">updateProductQuantity</span><span class="params">(std::vector&lt;Product&gt;&amp; products)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> id, newQty;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Enter Product ID to update: &quot;</span>;</span><br><span class="line">    std::cin &gt;&gt; id;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> it = std::<span class="built_in">find_if</span>(products.<span class="built_in">begin</span>(), products.<span class="built_in">end</span>(), [id](<span class="type">const</span> Product&amp; p) &#123;</span><br><span class="line">        <span class="keyword">return</span> p.id == id;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(it != products.<span class="built_in">end</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Enter new quantity: &quot;</span>;</span><br><span class="line">        std::cin &gt;&gt; newQty;</span><br><span class="line">        it-&gt;quantity = newQty;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Product quantity updated successfully.\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Product with ID &quot;</span> &lt;&lt; id &lt;&lt; <span class="string">&quot; not found.\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示所有商品</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">displayProducts</span><span class="params">(<span class="type">const</span> std::vector&lt;Product&gt;&amp; products)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(products.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;No products available.\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Product List:\n&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">const</span> <span class="keyword">auto</span>&amp; p : products) &#123;</span><br><span class="line">        <span class="built_in">printProduct</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;Product&gt; products;</span><br><span class="line">    <span class="type">int</span> choice;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;\n=== Inventory Management System ===\n&quot;</span>;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;1. Add Product\n&quot;</span>;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;2. Delete Product\n&quot;</span>;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;3. Update Product Quantity\n&quot;</span>;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;4. Display All Products\n&quot;</span>;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;5. Exit\n&quot;</span>;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Enter your choice (1-5): &quot;</span>;</span><br><span class="line">        std::cin &gt;&gt; choice;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">switch</span>(choice) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                <span class="built_in">addProduct</span>(products);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                <span class="built_in">deleteProduct</span>(products);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                <span class="built_in">updateProductQuantity</span>(products);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                <span class="built_in">displayProducts</span>(products);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">                std::cout &lt;&lt; <span class="string">&quot;Exiting the system.\n&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                std::cout &lt;&lt; <span class="string">&quot;Invalid choice. Please choose between 1-5.\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125; <span class="keyword">while</span>(choice != <span class="number">5</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>运行示例：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span> Inventory Management <span class="keyword">System</span> <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="number">1.</span> <span class="keyword">Add</span> Product</span><br><span class="line"><span class="number">2.</span> <span class="keyword">Delete</span> Product</span><br><span class="line"><span class="number">3.</span> <span class="keyword">Update</span> Product Quantity</span><br><span class="line"><span class="number">4.</span> Display <span class="keyword">All</span> Products</span><br><span class="line"><span class="number">5.</span> Exit</span><br><span class="line">Enter your choice (<span class="number">1</span><span class="number">-5</span>): <span class="number">1</span></span><br><span class="line">Enter Product ID: <span class="number">2001</span></span><br><span class="line">Enter Product Name: Laptop</span><br><span class="line">Enter Product Quantity: <span class="number">50</span></span><br><span class="line">Product added successfully.</span><br><span class="line"></span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span> Inventory Management <span class="keyword">System</span> <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="number">1.</span> <span class="keyword">Add</span> Product</span><br><span class="line"><span class="number">2.</span> <span class="keyword">Delete</span> Product</span><br><span class="line"><span class="number">3.</span> <span class="keyword">Update</span> Product Quantity</span><br><span class="line"><span class="number">4.</span> Display <span class="keyword">All</span> Products</span><br><span class="line"><span class="number">5.</span> Exit</span><br><span class="line">Enter your choice (<span class="number">1</span><span class="number">-5</span>): <span class="number">1</span></span><br><span class="line">Enter Product ID: <span class="number">2002</span></span><br><span class="line">Enter Product Name: Smartphone</span><br><span class="line">Enter Product Quantity: <span class="number">150</span></span><br><span class="line">Product added successfully.</span><br><span class="line"></span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span> Inventory Management <span class="keyword">System</span> <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="number">1.</span> <span class="keyword">Add</span> Product</span><br><span class="line"><span class="number">2.</span> <span class="keyword">Delete</span> Product</span><br><span class="line"><span class="number">3.</span> <span class="keyword">Update</span> Product Quantity</span><br><span class="line"><span class="number">4.</span> Display <span class="keyword">All</span> Products</span><br><span class="line"><span class="number">5.</span> Exit</span><br><span class="line">Enter your choice (<span class="number">1</span><span class="number">-5</span>): <span class="number">4</span></span><br><span class="line">Product List:</span><br><span class="line">ID: <span class="number">2001</span>, Name: Laptop, Quantity: <span class="number">50</span></span><br><span class="line">ID: <span class="number">2002</span>, Name: Smartphone, Quantity: <span class="number">150</span></span><br><span class="line"></span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span> Inventory Management <span class="keyword">System</span> <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="number">1.</span> <span class="keyword">Add</span> Product</span><br><span class="line"><span class="number">2.</span> <span class="keyword">Delete</span> Product</span><br><span class="line"><span class="number">3.</span> <span class="keyword">Update</span> Product Quantity</span><br><span class="line"><span class="number">4.</span> Display <span class="keyword">All</span> Products</span><br><span class="line"><span class="number">5.</span> Exit</span><br><span class="line">Enter your choice (<span class="number">1</span><span class="number">-5</span>): <span class="number">3</span></span><br><span class="line">Enter Product ID <span class="keyword">to</span> <span class="keyword">update</span>: <span class="number">2001</span></span><br><span class="line">Enter <span class="keyword">new</span> quantity: <span class="number">45</span></span><br><span class="line">Product quantity updated successfully.</span><br><span class="line"></span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span> Inventory Management <span class="keyword">System</span> <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="number">1.</span> <span class="keyword">Add</span> Product</span><br><span class="line"><span class="number">2.</span> <span class="keyword">Delete</span> Product</span><br><span class="line"><span class="number">3.</span> <span class="keyword">Update</span> Product Quantity</span><br><span class="line"><span class="number">4.</span> Display <span class="keyword">All</span> Products</span><br><span class="line"><span class="number">5.</span> Exit</span><br><span class="line">Enter your choice (<span class="number">1</span><span class="number">-5</span>): <span class="number">4</span></span><br><span class="line">Product List:</span><br><span class="line">ID: <span class="number">2001</span>, Name: Laptop, Quantity: <span class="number">45</span></span><br><span class="line">ID: <span class="number">2002</span>, Name: Smartphone, Quantity: <span class="number">150</span></span><br><span class="line"></span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span> Inventory Management <span class="keyword">System</span> <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="number">1.</span> <span class="keyword">Add</span> Product</span><br><span class="line"><span class="number">2.</span> <span class="keyword">Delete</span> Product</span><br><span class="line"><span class="number">3.</span> <span class="keyword">Update</span> Product Quantity</span><br><span class="line"><span class="number">4.</span> Display <span class="keyword">All</span> Products</span><br><span class="line"><span class="number">5.</span> Exit</span><br><span class="line">Enter your choice (<span class="number">1</span><span class="number">-5</span>): <span class="number">5</span></span><br><span class="line">Exiting the system.</span><br></pre></td></tr></table></figure>



<p><strong>代码解析：</strong></p>
<ol>
<li><strong>结构体定义：</strong> 定义了一个 <code>Product</code> 结构体，包含 <code>id</code>、<code>name</code> 和 <code>quantity</code>。</li>
<li>功能函数：<ul>
<li><code>addProduct</code>：添加新商品。</li>
<li><code>deleteProduct</code>：根据 ID 删除商品。</li>
<li><code>updateProductQuantity</code>：根据 ID 更新商品数量。</li>
<li><code>displayProducts</code>：显示所有商品的信息。</li>
</ul>
</li>
<li><strong>主函数：</strong> 提供一个菜单驱动的用户界面，允许用户选择不同的操作。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.limerence2017.com/2024/10/03/cppbase11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="恋恋风辰的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/03/cppbase11/" itemprop="url">零基础C++(11) string类用法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2024-10-03T13:03:31+08:00">
                2024-10-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cppbase/" itemprop="url" rel="index">
                    <span itemprop="name">零基础C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-引言"><a href="#1-引言" class="headerlink" title="1. 引言"></a>1. 引言</h3><h4 id="什么是字符串？"><a href="#什么是字符串？" class="headerlink" title="什么是字符串？"></a>什么是字符串？</h4><p>字符串是由一系列字符组成的序列，用于表示文本信息。它在编程中被广泛应用于用户交互、文件处理、数据解析等场景。</p>
<h4 id="C-风格字符串-vs-std-string"><a href="#C-风格字符串-vs-std-string" class="headerlink" title="C 风格字符串 vs std::string"></a>C 风格字符串 vs <code>std::string</code></h4><p>在 C++ 中，有两种主要的字符串类型：</p>
<ul>
<li><strong>C 风格字符串（C-strings）</strong>：基于字符数组，以空字符 (<code>&#39;\0&#39;</code>) 结尾。</li>
<li><strong>C++ <code>std::string</code> 类</strong>：更高级、功能更丰富的字符串类，封装了字符串操作的复杂性。</li>
</ul>
<p><strong>C 风格字符串示例：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> cstr[] = <span class="string">&quot;Hello, World!&quot;</span>;</span><br></pre></td></tr></table></figure>



<p><strong><code>std::string</code> 示例：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line">std::string str = <span class="string">&quot;Hello, World!&quot;</span>;</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="2-std-string-基础"><a href="#2-std-string-基础" class="headerlink" title="2. std::string 基础"></a>2. <code>std::string</code> 基础</h3><h4 id="定义与初始化"><a href="#定义与初始化" class="headerlink" title="定义与初始化"></a>定义与初始化</h4><p><code>std::string</code> 是 C++ 标准库中的一个类，位于 <code>&lt;string&gt;</code> 头文件中。它封装了字符序列，并提供了丰富的成员函数用于操作字符串。</p>
<p>初始化有很多中方式，如下图</p>
<p><img src="https://cdn.llfc.club/1727932857214.jpg" alt="https://cdn.llfc.club/1727932857214.jpg"></p>
<p><strong>包含头文件：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br></pre></td></tr></table></figure>



<p><strong>初始化示例：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 默认构造函数</span></span><br><span class="line">    std::string str1;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用字符串字面值初始化</span></span><br><span class="line">    std::string str2 = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用拷贝构造函数</span></span><br><span class="line">    <span class="function">std::string <span class="title">str3</span><span class="params">(str2)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用部分初始化</span></span><br><span class="line">    <span class="function">std::string <span class="title">str4</span><span class="params">(str2, <span class="number">0</span>, <span class="number">3</span>)</span></span>; <span class="comment">// &quot;Hel&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用重复字符初始化</span></span><br><span class="line">    <span class="function">std::string <span class="title">str5</span><span class="params">(<span class="number">5</span>, <span class="string">&#x27;A&#x27;</span>)</span></span>; <span class="comment">// &quot;AAAAA&quot;</span></span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;str1: &quot;</span> &lt;&lt; str1 &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;str2: &quot;</span> &lt;&lt; str2 &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;str3: &quot;</span> &lt;&lt; str3 &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;str4: &quot;</span> &lt;&lt; str4 &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;str5: &quot;</span> &lt;&lt; str5 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">str1:</span></span><br><span class="line"><span class="section">str2: Hello</span></span><br><span class="line"><span class="section">str3: Hello</span></span><br><span class="line"><span class="section">str4: Hel</span></span><br><span class="line"><span class="section">str5: AAAAA</span></span><br></pre></td></tr></table></figure>



<h4 id="字符串输入与输出"><a href="#字符串输入与输出" class="headerlink" title="字符串输入与输出"></a>字符串输入与输出</h4><p><strong>输出字符串：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string greeting = <span class="string">&quot;Hello, C++ Strings!&quot;</span>;</span><br><span class="line">    std::cout &lt;&lt; greeting &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>从用户输入字符串：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string input;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;请输入一个字符串：&quot;</span>;</span><br><span class="line">    std::cin &gt;&gt; input; <span class="comment">// 读取直到第一个空白字符</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;您输入的字符串是：&quot;</span> &lt;&lt; input &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>读取包含空格的整行字符串：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string line;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;请输入一行文本：&quot;</span>;</span><br><span class="line">    std::<span class="built_in">getline</span>(std::cin, line);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;您输入的文本是：&quot;</span> &lt;&lt; line &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="3-字符串操作"><a href="#3-字符串操作" class="headerlink" title="3. 字符串操作"></a>3. 字符串操作</h3><p>常用的字符串操作如下：</p>
<p><img src="https://cdn.llfc.club/1727933166315.jpg" alt="https://cdn.llfc.club/1727933166315.jpg"></p>
<h4 id="3-1-拼接与连接"><a href="#3-1-拼接与连接" class="headerlink" title="3.1 拼接与连接"></a>3.1 拼接与连接</h4><p><strong>使用 <code>+</code> 运算符：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string first = <span class="string">&quot;Hello, &quot;</span>;</span><br><span class="line">    std::string second = <span class="string">&quot;World!&quot;</span>;</span><br><span class="line">    std::string combined = first + second;</span><br><span class="line">    std::cout &lt;&lt; combined &lt;&lt; std::endl; <span class="comment">// 输出: Hello, World!</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>使用 <code>append()</code> 函数：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string str = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">    str.<span class="built_in">append</span>(<span class="string">&quot;, World!&quot;</span>);</span><br><span class="line">    std::cout &lt;&lt; str &lt;&lt; std::endl; <span class="comment">// 输出: Hello, World!</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>使用 <code>+=</code> 运算符：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string str = <span class="string">&quot;Data&quot;</span>;</span><br><span class="line">    str += <span class="string">&quot; Structures&quot;</span>;</span><br><span class="line">    std::cout &lt;&lt; str &lt;&lt; std::endl; <span class="comment">// 输出: Data Structures</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-2-比较字符串"><a href="#3-2-比较字符串" class="headerlink" title="3.2 比较字符串"></a>3.2 比较字符串</h4><p>关于字符串的比较，其实是逐个位置按照字符比较，计算机中字符存储的方式是ASCII码表，每个字符对应一个ASCII码值，比较字符就是比较ASCII码值的大小</p>
<img src="https://cdn.llfc.club/ascii-1-3.png" alt="https://cdn.llfc.club/ascii-1-3.png" style="zoom: 50%;" />

<p>一些控制字符也是通过ASCII码存储的</p>
<img src="https://cdn.llfc.club/ascii-2-1.png" alt="https://cdn.llfc.club/ascii-2-1.png" style="zoom: 50%;" />



<p><strong>使用 <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code> 运算符：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string a = <span class="string">&quot;apple&quot;</span>;</span><br><span class="line">    std::string b = <span class="string">&quot;banana&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (a == b) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;a 和 b 相等&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;a 和 b 不相等&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (a &lt; b) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;a 在字典序中小于 b&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;a 在字典序中不小于 b&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> 和 <span class="selector-tag">b</span> 不相等</span><br><span class="line"><span class="selector-tag">a</span> 在字典序中小于 <span class="selector-tag">b</span></span><br></pre></td></tr></table></figure>



<h4 id="3-3-查找与替换"><a href="#3-3-查找与替换" class="headerlink" title="3.3 查找与替换"></a>3.3 查找与替换</h4><p><strong>使用 <code>find()</code> 查找子字符串：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string text = <span class="string">&quot;The quick brown fox jumps over the lazy dog.&quot;</span>;</span><br><span class="line">    std::string word = <span class="string">&quot;fox&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">size_t</span> pos = text.<span class="built_in">find</span>(word);</span><br><span class="line">    <span class="keyword">if</span> (pos != std::string::npos) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;找到 &#x27;&quot;</span> &lt;&lt; word &lt;&lt; <span class="string">&quot;&#x27; 在位置: &quot;</span> &lt;&lt; pos &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;&#x27;&quot;</span> &lt;&lt; word &lt;&lt; <span class="string">&quot;&#x27; 未找到。&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>替换子字符串：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string text = <span class="string">&quot;I like cats.&quot;</span>;</span><br><span class="line">    std::string from = <span class="string">&quot;cats&quot;</span>;</span><br><span class="line">    std::string to = <span class="string">&quot;dogs&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">size_t</span> pos = text.<span class="built_in">find</span>(from);</span><br><span class="line">    <span class="keyword">if</span> (pos != std::string::npos) &#123;</span><br><span class="line">        text.<span class="built_in">replace</span>(pos, from.<span class="built_in">length</span>(), to);</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;替换后: &quot;</span> &lt;&lt; text &lt;&lt; std::endl; <span class="comment">// 输出: I like dogs.</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;&#x27;&quot;</span> &lt;&lt; from &lt;&lt; <span class="string">&quot;&#x27; 未找到。&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-4-子字符串与切片"><a href="#3-4-子字符串与切片" class="headerlink" title="3.4 子字符串与切片"></a>3.4 子字符串与切片</h4><p><strong>使用 <code>substr()</code> 获取子字符串：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string str = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">    std::string sub = str.<span class="built_in">substr</span>(<span class="number">7</span>, <span class="number">5</span>); <span class="comment">// 从位置7开始，长度5</span></span><br><span class="line">    std::cout &lt;&lt; sub &lt;&lt; std::endl; <span class="comment">// 输出: World</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>注意：</strong> 如果省略第二个参数，<code>substr()</code> 会返回从起始位置到字符串末尾的所有字符。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">std::string sub = str.<span class="built_in">substr</span>(<span class="number">7</span>); <span class="comment">// 从位置7开始直到结束</span></span><br><span class="line">std::cout &lt;&lt; sub &lt;&lt; std::endl; <span class="comment">// 输出: World!</span></span><br></pre></td></tr></table></figure>



<hr>
<h3 id="4-字符串的常用成员函数"><a href="#4-字符串的常用成员函数" class="headerlink" title="4. 字符串的常用成员函数"></a>4. 字符串的常用成员函数</h3><h4 id="4-1-长度与容量"><a href="#4-1-长度与容量" class="headerlink" title="4.1 长度与容量"></a>4.1 长度与容量</h4><p><strong>获取字符串长度：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string str = <span class="string">&quot;C++ Programming&quot;</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;字符串长度: &quot;</span> &lt;&lt; str.<span class="built_in">length</span>() &lt;&lt; std::endl; <span class="comment">// 输出: 14</span></span><br><span class="line">    <span class="comment">// 或者使用 size()</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;字符串大小: &quot;</span> &lt;&lt; str.<span class="built_in">size</span>() &lt;&lt; std::endl; <span class="comment">// 输出: 14</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>获取字符串容量：</strong></p>
<p>每个 <code>std::string</code> 对象都有一个容量（capacity），表示它当前能够持有的最大字符数，而不需要重新分配内存。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string str = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;初始容量: &quot;</span> &lt;&lt; str.<span class="built_in">capacity</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    str += <span class="string">&quot;, World!&quot;</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;追加后的容量: &quot;</span> &lt;&lt; str.<span class="built_in">capacity</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出示例：</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">初始容量: 15</span></span><br><span class="line"><span class="section">追加后的容量: 15</span></span><br></pre></td></tr></table></figure>



<p><strong>注意：</strong> 容量可能因实现而异，并不保证它等于长度。</p>
<h4 id="4-2-访问字符"><a href="#4-2-访问字符" class="headerlink" title="4.2 访问字符"></a>4.2 访问字符</h4><p>对字符串中的字符操作，有如下方法, 切记需包含<cctype>头文件</p>
<p><img src="https://cdn.llfc.club/1727933254985.jpg" alt="https://cdn.llfc.club/1727933254985.jpg"></p>
<p><strong>使用索引访问单个字符：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string str = <span class="string">&quot;ABCDE&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 正向索引</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; str.<span class="built_in">length</span>(); ++i) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;字符 &quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; str[i] &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//反向遍历</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = str.<span class="built_in">length</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span> ; i --)&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;下标为 &quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;的字符为&quot;</span> &lt;&lt; str[i] &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>使用 <code>at()</code> 函数（包含边界检查）：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string str = <span class="string">&quot;ABCDE&quot;</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">char</span> c = str.<span class="built_in">at</span>(<span class="number">10</span>); <span class="comment">// 超出范围，会抛出异常</span></span><br><span class="line">    &#125; <span class="built_in">catch</span> (<span class="type">const</span> std::out_of_range&amp; e) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;异常捕获: &quot;</span> &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">异常捕获: basic_string::at: __n (which <span class="keyword">is</span> <span class="number">10</span>) &gt;= <span class="keyword">this</span>-&gt;size() (which <span class="keyword">is</span> <span class="number">5</span>)</span><br></pre></td></tr></table></figure>



<h4 id="4-3-转换大小写"><a href="#4-3-转换大小写" class="headerlink" title="4.3 转换大小写"></a>4.3 转换大小写</h4><p>C++ 标准库中的 <code>std::toupper</code> 和 <code>std::tolower</code> 可以用于转换字符的大小写。结合 <code>std::transform</code>，可以实现整个字符串的大小写转换。</p>
<p><strong>转换为大写：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cctype&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string str = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">    std::<span class="built_in">transform</span>(str.<span class="built_in">begin</span>(), str.<span class="built_in">end</span>(), str.<span class="built_in">begin</span>(), </span><br><span class="line">                   [](<span class="type">unsigned</span> <span class="type">char</span> c) &#123; <span class="keyword">return</span> std::<span class="built_in">toupper</span>(c); &#125;);</span><br><span class="line">    std::cout &lt;&lt; str &lt;&lt; std::endl; <span class="comment">// 输出: HELLO, WORLD!</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>转换为小写：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cctype&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string str = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">    std::<span class="built_in">transform</span>(str.<span class="built_in">begin</span>(), str.<span class="built_in">end</span>(), str.<span class="built_in">begin</span>(), </span><br><span class="line">                   [](<span class="type">unsigned</span> <span class="type">char</span> c) &#123; <span class="keyword">return</span> std::<span class="built_in">tolower</span>(c); &#125;);</span><br><span class="line">    std::cout &lt;&lt; str &lt;&lt; std::endl; <span class="comment">// 输出: hello, world!</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="4-4-其他有用的函数"><a href="#4-4-其他有用的函数" class="headerlink" title="4.4 其他有用的函数"></a>4.4 其他有用的函数</h4><ul>
<li><p>**<code>empty()</code>**：检查字符串是否为空。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">std::string str;</span><br><span class="line"><span class="keyword">if</span> (str.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;字符串为空。&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>**<code>clear()</code>**：清空字符串内容。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">std::string str = <span class="string">&quot;Clear me!&quot;</span>;</span><br><span class="line">str.<span class="built_in">clear</span>();</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;str: &quot;</span> &lt;&lt; str &lt;&lt; std::endl; <span class="comment">// 输出为空</span></span><br></pre></td></tr></table></figure></li>
<li><p>**<code>erase()</code>**：删除字符串的部分内容。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">std::string str = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">str.<span class="built_in">erase</span>(<span class="number">5</span>, <span class="number">7</span>); <span class="comment">// 从位置5开始，删除7个字符</span></span><br><span class="line">std::cout &lt;&lt; str &lt;&lt; std::endl; <span class="comment">// 输出: Hello!</span></span><br></pre></td></tr></table></figure></li>
<li><p>**<code>insert()</code>**：在指定位置插入字符串或字符。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">std::string str = <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">str.<span class="built_in">insert</span>(<span class="number">5</span>, <span class="string">&quot;,&quot;</span>);</span><br><span class="line">std::cout &lt;&lt; str &lt;&lt; std::endl; <span class="comment">// 输出: Hello, World</span></span><br></pre></td></tr></table></figure></li>
<li><p>**<code>replace()</code>**：替换字符串的部分内容（前面已示例）。</p>
</li>
<li><p>**<code>find_first_of()</code>, <code>find_last_of()</code>**：查找字符集合中的任何一个字符。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">std::string str = <span class="string">&quot;apple, banana, cherry&quot;</span>;</span><br><span class="line"><span class="type">size_t</span> pos = str.<span class="built_in">find_first_of</span>(<span class="string">&quot;, &quot;</span>);</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;第一个逗号或空格的位置: &quot;</span> &lt;&lt; pos &lt;&lt; std::endl; <span class="comment">// 输出: 5</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="5-高级用法"><a href="#5-高级用法" class="headerlink" title="5. 高级用法"></a>5. 高级用法</h3><h4 id="5-1-字符串流（stringstream）"><a href="#5-1-字符串流（stringstream）" class="headerlink" title="5.1 字符串流（stringstream）"></a>5.1 字符串流（<code>stringstream</code>）</h4><p><code>std::stringstream</code> 是 C++ 标准库中第 <code>&lt;sstream&gt;</code> 头文件提供的一个类，用于在内存中进行字符串的读写操作，类似于文件流。</p>
<p><strong>基本用法示例：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::stringstream ss;</span><br><span class="line">    ss &lt;&lt; <span class="string">&quot;Value: &quot;</span> &lt;&lt; <span class="number">42</span> &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; <span class="number">3.14</span>;</span><br><span class="line"></span><br><span class="line">    std::string result = ss.<span class="built_in">str</span>();</span><br><span class="line">    std::cout &lt;&lt; result &lt;&lt; std::endl; <span class="comment">// 输出: Value: 42, 3.14</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>从字符串流中读取数据：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string data = <span class="string">&quot;123 45.67 Hello&quot;</span>;</span><br><span class="line">    <span class="function">std::stringstream <span class="title">ss</span><span class="params">(data)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="type">double</span> b;</span><br><span class="line">    std::string c;</span><br><span class="line"></span><br><span class="line">    ss &gt;&gt; a &gt;&gt; b &gt;&gt; c;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;a: &quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot;, b: &quot;</span> &lt;&lt; b &lt;&lt; <span class="string">&quot;, c: &quot;</span> &lt;&lt; c &lt;&lt; std::endl;</span><br><span class="line">    <span class="comment">// 输出: a: 123, b: 45.67, c: Hello</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="5-2-字符串与其他数据类型的转换"><a href="#5-2-字符串与其他数据类型的转换" class="headerlink" title="5.2 字符串与其他数据类型的转换"></a>5.2 字符串与其他数据类型的转换</h4><p><strong>将其他类型转换为 <code>std::string</code>：</strong></p>
<ul>
<li><p><strong>使用 <code>std::to_string()</code>：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> num = <span class="number">100</span>;</span><br><span class="line">    <span class="type">double</span> pi = <span class="number">3.14159</span>;</span><br><span class="line"></span><br><span class="line">    std::string str1 = std::<span class="built_in">to_string</span>(num);</span><br><span class="line">    std::string str2 = std::<span class="built_in">to_string</span>(pi);</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;str1: &quot;</span> &lt;&lt; str1 &lt;&lt; <span class="string">&quot;, str2: &quot;</span> &lt;&lt; str2 &lt;&lt; std::endl;</span><br><span class="line">    <span class="comment">// 输出: str1: 100, str2: 3.141590</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>将 <code>std::string</code> 转换为其他类型：</strong></p>
<ul>
<li><p><strong>使用字符串流：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string numStr = <span class="string">&quot;256&quot;</span>;</span><br><span class="line">    std::string piStr = <span class="string">&quot;3.14&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line">    <span class="type">double</span> pi;</span><br><span class="line"></span><br><span class="line">    <span class="function">std::stringstream <span class="title">ss1</span><span class="params">(numStr)</span></span>;</span><br><span class="line">    ss1 &gt;&gt; num;</span><br><span class="line"></span><br><span class="line">    <span class="function">std::stringstream <span class="title">ss2</span><span class="params">(piStr)</span></span>;</span><br><span class="line">    ss2 &gt;&gt; pi;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;num: &quot;</span> &lt;&lt; num &lt;&lt; <span class="string">&quot;, pi: &quot;</span> &lt;&lt; pi &lt;&lt; std::endl;</span><br><span class="line">    <span class="comment">// 输出: num: 256, pi: 3.14</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>使用 <code>std::stoi()</code>, <code>std::stod()</code> 等函数（C++11 及以上）：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string numStr = <span class="string">&quot;256&quot;</span>;</span><br><span class="line">    std::string piStr = <span class="string">&quot;3.14&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> num = std::<span class="built_in">stoi</span>(numStr);</span><br><span class="line">    <span class="type">double</span> pi = std::<span class="built_in">stod</span>(piStr);</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;num: &quot;</span> &lt;&lt; num &lt;&lt; <span class="string">&quot;, pi: &quot;</span> &lt;&lt; pi &lt;&lt; std::endl;</span><br><span class="line">    <span class="comment">// 输出: num: 256, pi: 3.14</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="5-3-正则表达式与字符串匹配"><a href="#5-3-正则表达式与字符串匹配" class="headerlink" title="5.3 正则表达式与字符串匹配"></a>5.3 正则表达式与字符串匹配</h4><p>C++ 标准库提供了 <code>&lt;regex&gt;</code> 头文件，用于支持正则表达式。</p>
<p>关于正则表达式的规则可以参考菜鸟教程文档<a target="_blank" rel="noopener" href="https://www.runoob.com/regexp/regexp-syntax.html">https://www.runoob.com/regexp/regexp-syntax.html</a></p>
<p><strong>基本用法示例：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;regex&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string text = <span class="string">&quot;The quick brown fox jumps over the lazy dog.&quot;</span>;</span><br><span class="line">    <span class="function">std::regex <span class="title">pattern</span><span class="params">(<span class="string">R&quot;(\b\w&#123;5&#125;\b)&quot;</span>)</span></span>; <span class="comment">// 匹配所有5个字母的单词</span></span><br><span class="line"></span><br><span class="line">    <span class="function">std::sregex_iterator <span class="title">it</span><span class="params">(text.begin(), text.end(), pattern)</span></span>;</span><br><span class="line">    std::sregex_iterator end;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;5个字母的单词有:&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">while</span> (it != end) &#123;</span><br><span class="line">        std::cout &lt;&lt; (*it).<span class="built_in">str</span>() &lt;&lt; std::endl;</span><br><span class="line">        ++it;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">5个字母的单词有:</span></span><br><span class="line">quick</span><br><span class="line">brown</span><br><span class="line">jumps</span><br><span class="line">leazy</span><br></pre></td></tr></table></figure>



<p><strong>说明：</strong></p>
<ul>
<li><code>\b</code> 匹配单词边界。</li>
<li><code>\w&#123;5&#125;</code> 匹配恰好5个字母的单词。</li>
</ul>
<p><strong>注意：</strong> 使用原始字符串字面值（<code>R&quot;()&quot;</code>）以简化正则表达式的编写。</p>
<hr>
<h3 id="6-字符串与-C-风格字符串的转换"><a href="#6-字符串与-C-风格字符串的转换" class="headerlink" title="6. 字符串与 C 风格字符串的转换"></a>6. 字符串与 C 风格字符串的转换</h3><h4 id="6-1-从-C-风格字符串转换为-std-string"><a href="#6-1-从-C-风格字符串转换为-std-string" class="headerlink" title="6.1 从 C 风格字符串转换为 std::string"></a>6.1 从 C 风格字符串转换为 <code>std::string</code></h4><p>通过 <code>std::string</code> 的构造函数，可以轻松将 C 风格字符串转换为 <code>std::string</code>。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* cstr = <span class="string">&quot;Hello, C-strings!&quot;</span>;</span><br><span class="line">    <span class="function">std::string <span class="title">str</span><span class="params">(cstr)</span></span>;</span><br><span class="line">    std::cout &lt;&lt; str &lt;&lt; std::endl; <span class="comment">// 输出: Hello, C-strings!</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="6-2-从-std-string-转换为-C-风格字符串"><a href="#6-2-从-std-string-转换为-C-风格字符串" class="headerlink" title="6.2 从 std::string 转换为 C 风格字符串"></a>6.2 从 <code>std::string</code> 转换为 C 风格字符串</h4><p>使用 <code>c_str()</code> 成员函数，可以获取 C 风格字符串指针。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string str = <span class="string">&quot;Hello, std::string!&quot;</span>;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* cstr = str.<span class="built_in">c_str</span>();</span><br><span class="line">    std::cout &lt;&lt; cstr &lt;&lt; std::endl; <span class="comment">// 输出: Hello, std::string!</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>注意：</strong> 返回的指针是只读的，且指向的内存由 <code>std::string</code> 管理，确保在 <code>std::string</code> 对象有效期间使用。</p>
<hr>
<h3 id="7-示例项目"><a href="#7-示例项目" class="headerlink" title="7. 示例项目"></a>7. 示例项目</h3><h4 id="示例项目1：简易文本分析器"><a href="#示例项目1：简易文本分析器" class="headerlink" title="示例项目1：简易文本分析器"></a>示例项目1：简易文本分析器</h4><p><strong>需求分析：</strong></p>
<p>创建一个程序，接受用户输入的一段文本，并提供以下功能：</p>
<ul>
<li>统计单词数量</li>
<li>统计每个单词出现的次数</li>
<li>查找指定单词的出现次数</li>
<li>输出最长的单词</li>
</ul>
<p><strong>代码实现：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string text;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;请输入一段文本（结束请输入Ctrl+D/Ctrl+Z）：\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 读取整段文本</span></span><br><span class="line">    std::ostringstream oss;</span><br><span class="line">    std::string line;</span><br><span class="line">    <span class="keyword">while</span> (std::<span class="built_in">getline</span>(std::cin, line)) &#123;</span><br><span class="line">        oss &lt;&lt; line &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    text = oss.<span class="built_in">str</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用字符串流分割单词</span></span><br><span class="line">    <span class="function">std::stringstream <span class="title">ss</span><span class="params">(text)</span></span>;</span><br><span class="line">    std::string word;</span><br><span class="line">    std::map&lt;std::string, <span class="type">int</span>&gt; wordCount;</span><br><span class="line">    <span class="type">size_t</span> totalWords = <span class="number">0</span>;</span><br><span class="line">    std::string longestWord;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (ss &gt;&gt; word) &#123;</span><br><span class="line">        <span class="comment">// 去除标点符号（简单处理）</span></span><br><span class="line">        word.<span class="built_in">erase</span>(std::<span class="built_in">remove_if</span>(word.<span class="built_in">begin</span>(), word.<span class="built_in">end</span>(), </span><br><span class="line">            [](<span class="type">char</span> c) &#123; <span class="keyword">return</span> <span class="built_in">ispunct</span>(c); &#125;), word.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 转为小写</span></span><br><span class="line">        std::<span class="built_in">transform</span>(word.<span class="built_in">begin</span>(), word.<span class="built_in">end</span>(), word.<span class="built_in">begin</span>(), ::tolower);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!word.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            wordCount[word]++;</span><br><span class="line">            totalWords++;</span><br><span class="line">            <span class="keyword">if</span> (word.<span class="built_in">length</span>() &gt; longestWord.<span class="built_in">length</span>()) &#123;</span><br><span class="line">                longestWord = word;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;\n统计结果:\n&quot;</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;总单词数: &quot;</span> &lt;&lt; totalWords &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;每个单词出现的次数:\n&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; pair : wordCount) &#123;</span><br><span class="line">        std::cout &lt;&lt; pair.first &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; pair.second &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;最长的单词: &quot;</span> &lt;&lt; longestWord &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查找指定单词的出现次数</span></span><br><span class="line">    std::string searchWord;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;\n请输入要查找的单词: &quot;</span>;</span><br><span class="line">    std::cin &gt;&gt; searchWord;</span><br><span class="line">    <span class="comment">// 转为小写</span></span><br><span class="line">    std::<span class="built_in">transform</span>(searchWord.<span class="built_in">begin</span>(), searchWord.<span class="built_in">end</span>(), searchWord.<span class="built_in">begin</span>(), ::tolower);</span><br><span class="line">    <span class="keyword">auto</span> it = wordCount.<span class="built_in">find</span>(searchWord);</span><br><span class="line">    <span class="keyword">if</span> (it != wordCount.<span class="built_in">end</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;&#x27;&quot;</span> &lt;&lt; searchWord &lt;&lt; <span class="string">&quot;&#x27; 出现了 &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; <span class="string">&quot; 次。&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;&#x27;&quot;</span> &lt;&lt; searchWord &lt;&lt; <span class="string">&quot;&#x27; 未在文本中找到。&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>运行示例：</strong></p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">请输入一段文本（结束请输入Ctrl+D/Ctrl+Z）：</span><br><span class="line">Hello, world! Hello C++.</span><br><span class="line">This <span class="built_in">is</span> a simple <span class="keyword">text</span> analyzer. Analyzing <span class="keyword">text</span> <span class="built_in">is</span> fun.</span><br><span class="line"></span><br><span class="line">统计结果:</span><br><span class="line">总单词数: <span class="number">10</span></span><br><span class="line">每个单词出现的次数:</span><br><span class="line"><span class="symbol">hello:</span> <span class="number">2</span></span><br><span class="line"><span class="symbol">world:</span> <span class="number">1</span></span><br><span class="line"><span class="symbol">c:</span> <span class="number">1</span></span><br><span class="line"><span class="symbol">this:</span> <span class="number">1</span></span><br><span class="line"><span class="symbol">is:</span> <span class="number">2</span></span><br><span class="line"><span class="symbol">a:</span> <span class="number">1</span></span><br><span class="line"><span class="symbol">simple:</span> <span class="number">1</span></span><br><span class="line"><span class="symbol">text:</span> <span class="number">2</span></span><br><span class="line"><span class="symbol">analyzer:</span> <span class="number">1</span></span><br><span class="line"><span class="symbol">analyzing:</span> <span class="number">1</span></span><br><span class="line"><span class="symbol">fun:</span> <span class="number">1</span></span><br><span class="line">最长的单词: analyzer</span><br><span class="line"></span><br><span class="line">请输入要查找的单词: <span class="keyword">text</span></span><br><span class="line"><span class="comment">&#x27;text&#x27; 出现了 2 次。</span></span><br></pre></td></tr></table></figure>



<p><strong>代码解析：</strong></p>
<ol>
<li><strong>读取用户输入的文本</strong>：使用 <code>std::ostringstream</code> 和 <code>std::getline</code> 读取用户输入的多行文本，直到用户输入结束（Ctrl+D 或 Ctrl+Z）。</li>
<li><strong>分割单词并统计</strong>：<ul>
<li>使用 <code>std::stringstream</code> 将文本分割为单词。</li>
<li>使用 <code>std::map</code> 存储每个单词出现的次数。</li>
<li>计算总单词数和最长单词。</li>
</ul>
</li>
<li><strong>查找指定单词</strong>：用户输入要查找的单词，程序查找并输出出现次数。</li>
</ol>
<h4 id="示例项目2：用户输入验证工具"><a href="#示例项目2：用户输入验证工具" class="headerlink" title="示例项目2：用户输入验证工具"></a>示例项目2：用户输入验证工具</h4><p><strong>需求分析：</strong></p>
<p>编写一个程序，接受用户输入的电子邮件地址，并验证其格式是否正确。简单的验证标准：</p>
<ul>
<li>包含一个 <code>@</code> 符号</li>
<li><code>@</code> 后面有一个 <code>.</code> 符号</li>
<li>不包含空格</li>
</ul>
<p><strong>代码实现：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;regex&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isValidEmail</span><span class="params">(<span class="type">const</span> std::string&amp; email)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 简单的正则表达式，匹配基本的邮件格式</span></span><br><span class="line">    <span class="function"><span class="type">const</span> std::regex <span class="title">pattern</span><span class="params">(<span class="string">R&quot;((\w+)(\.?\w+)*@(\w+)(\.\w+)+)&quot;</span>)</span></span>;</span><br><span class="line">    <span class="keyword">return</span> std::<span class="built_in">regex_match</span>(email, pattern);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string email;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;请输入您的电子邮件地址: &quot;</span>;</span><br><span class="line">    std::cin &gt;&gt; email;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isValidEmail</span>(email)) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;电子邮件地址有效。&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;电子邮件地址无效。&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>运行示例：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">请输入您的电子邮件地址: <span class="keyword">user</span><span class="variable">@example</span>.com</span><br><span class="line">电子邮件地址有效。</span><br></pre></td></tr></table></figure>



<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">请输入您的电子邮件地址: userexample.com</span></span><br><span class="line">电子邮件地址无效。</span><br></pre></td></tr></table></figure>



<p><strong>代码解析：</strong></p>
<ol>
<li>**定义验证函数 <code>isValidEmail</code>**：<ul>
<li>使用正则表达式 <code>(\w+)(\.?\w+)*@(\w+)(\.\w+)+</code> 来匹配基本的邮箱格式。</li>
<li>该正则表达式匹配如下部分：<ul>
<li>用户名部分：由字母数字字符组成，可以包含点号。</li>
<li><code>@</code> 符号。</li>
<li>域名部分：由字母数字字符组成，至少包含一个点号后跟字母数字字符。</li>
</ul>
</li>
</ul>
</li>
<li><strong>主函数</strong>：<ul>
<li>提示用户输入邮箱地址。</li>
<li>调用 <code>isValidEmail</code> 函数进行验证，并输出结果。</li>
</ul>
</li>
</ol>
<p><strong>注意：</strong> 这个正则表达式只是一个基础的验证，实际应用中可能需要更复杂的正则表达式来处理更多的邮件格式。</p>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.limerence2017.com/2024/10/03/cppbase10/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="恋恋风辰的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/03/cppbase10/" itemprop="url">零基础C++(10) 命名空间</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2024-10-03T12:23:44+08:00">
                2024-10-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cppbase/" itemprop="url" rel="index">
                    <span itemprop="name">零基础C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="命名空间的using声明"><a href="#命名空间的using声明" class="headerlink" title="命名空间的using声明"></a>命名空间的using声明</h2><p>目前为止，我们用到的库函数基本上都属于命名空间std，而程序也显式地将这一点标示了出来。</p>
<p>例如，<code>std::cin</code>表示从标准输入中读取内容。此处使用作用域操作符<code>(::)</code>的含义是：编译器应从操作符左侧名字所示的作用域中寻找右侧那个名字。</p>
<p>因此，<code>std::cin</code>的意思就是要使用命名空间std中的名字cin。</p>
<p>上面的方法显得比较烦琐，然而幸运的是，通过更简单的途径也能使用到命名空间中的成员。</p>
<p>本节将学习其中一种简单的方法，使用using声明（using declaration），有了using声明就无须专门的前缀（形如命名空间::）也能使用所需的名字了。using声明具有如下的形式：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span>::name;</span><br></pre></td></tr></table></figure>

<p>一旦声明了上述语句，就可以直接访问命名空间中的名字:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> std::cin;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> i ;</span><br><span class="line">    <span class="comment">//正确,cin和std::cin含义相同</span></span><br><span class="line">    cin &gt;&gt; i;</span><br><span class="line">    <span class="comment">//错误,没有对应的using声明，必须使用完整的名字</span></span><br><span class="line">    <span class="comment">//cout &lt;&lt; i;</span></span><br><span class="line">    <span class="comment">//正确，显示地从std中使用cout</span></span><br><span class="line">    std::cout &lt;&lt; i;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="每个名字都需要独立的using声明"><a href="#每个名字都需要独立的using声明" class="headerlink" title="每个名字都需要独立的using声明"></a>每个名字都需要独立的using声明</h2><p>按照规定，每个using声明引入命名空间中的一个成员。例如，可以把要用到的标准库中的名字都以using声明的形式表示出来，程序如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> std::cin;</span><br><span class="line"><span class="keyword">using</span> std::endl;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> i ;</span><br><span class="line">    <span class="comment">//正确,cin和std::cin含义相同</span></span><br><span class="line">    cin &gt;&gt; i;</span><br><span class="line">    <span class="comment">//错误,没有对应的using声明，必须使用完整的名字</span></span><br><span class="line">    <span class="comment">//cout &lt;&lt; i;</span></span><br><span class="line">    <span class="comment">//正确，显示地从std中使用cout</span></span><br><span class="line">    std::cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="头文件不应包含using声明"><a href="#头文件不应包含using声明" class="headerlink" title="头文件不应包含using声明"></a>头文件不应包含using声明</h2><p>位于头文件的代码一般来说不应该使用using声明。这是因为头文件的内容会拷贝到所有引用它的文件中去，如果头文件里有某个using声明，那么每个使用了该头文件的文件就都会有这个声明。对于某些程序来说，由于不经意间包含了一些名字，反而可能产生始料未及的名字冲突。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.limerence2017.com/2024/10/01/cppbase09/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="恋恋风辰的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/10/01/cppbase09/" itemprop="url">零基础C++(9) 结构体类型</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2024-10-01T14:32:04+08:00">
                2024-10-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cppbase/" itemprop="url" rel="index">
                    <span itemprop="name">零基础C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="什么是结构体？"><a href="#什么是结构体？" class="headerlink" title="什么是结构体？"></a>什么是结构体？</h2><p>结构体（<strong>structure</strong>，简称 <strong>struct</strong>）是一种用户自定义的数据类型，用于将多个不同类型的数据组合在一起。它允许在一个单一的单元中存储多个相关的数据项，使代码更具组织性和可读性。</p>
<h2 id="结构体在编程中的应用场景"><a href="#结构体在编程中的应用场景" class="headerlink" title="结构体在编程中的应用场景"></a>结构体在编程中的应用场景</h2><ul>
<li><strong>数据组织</strong>：将相关的数据组合，如学生信息、坐标点、日期等。</li>
<li><strong>传递数据</strong>：在函数之间传递多个相关的数据项。</li>
<li><strong>复杂数据处理</strong>：管理更复杂的数据结构，如链表、树、图等。</li>
</ul>
<h2 id="结构体的基本使用"><a href="#结构体的基本使用" class="headerlink" title="结构体的基本使用"></a>结构体的基本使用</h2><h3 id="定义和声明结构体"><a href="#定义和声明结构体" class="headerlink" title="定义和声明结构体"></a>定义和声明结构体</h3><p>在 C++ 中，使用 <code>struct</code> 关键字定义一个结构体。基本语法如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">StructName</span> &#123;</span><br><span class="line">    <span class="comment">// 成员变量</span></span><br><span class="line">    dataType1 member1;</span><br><span class="line">    dataType2 member2;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>示例：定义一个学生结构体</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="type">float</span> grade;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="创建结构体变量"><a href="#创建结构体变量" class="headerlink" title="创建结构体变量"></a>创建结构体变量</h4><p>定义结构体后，可以创建结构体类型的变量。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Student student1;</span><br><span class="line">Student student2;</span><br></pre></td></tr></table></figure>

<h4 id="访问结构体成员"><a href="#访问结构体成员" class="headerlink" title="访问结构体成员"></a>访问结构体成员</h4><p>使用点运算符（<code>.</code>）访问结构体成员。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">student1.id = <span class="number">1001</span>;</span><br><span class="line">student1.name = <span class="string">&quot;Alice&quot;</span>;</span><br><span class="line">student1.grade = <span class="number">89.5f</span>;</span><br><span class="line"></span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;学生ID: &quot;</span> &lt;&lt; student1.id &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;学生姓名: &quot;</span> &lt;&lt; student1.name &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;学生成绩: &quot;</span> &lt;&lt; student1.grade &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<h4 id="结构体初始化"><a href="#结构体初始化" class="headerlink" title="结构体初始化"></a>结构体初始化</h4><p>可以在创建结构体变量时进行初始化。</p>
<p><strong>方法一：直观初始化</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student student3 = &#123;<span class="number">1002</span>, <span class="string">&quot;Bob&quot;</span>, <span class="number">92.0f</span>&#125;;</span><br></pre></td></tr></table></figure>



<p><strong>方法二：逐个赋值</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Student student4;</span><br><span class="line">student4.id = <span class="number">1003</span>;</span><br><span class="line">student4.name = <span class="string">&quot;Charlie&quot;</span>;</span><br><span class="line">student4.grade = <span class="number">85.0f</span>;</span><br></pre></td></tr></table></figure>



<p><strong>方法三：使用自定义构造函数</strong></p>
<p>虽然结构体的主要用途是数据存储，但在 C++ 中，结构体可以像类一样拥有构造函数。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="type">float</span> grade;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="built_in">Student</span>(<span class="type">int</span> studentId, std::string studentName, <span class="type">float</span> studentGrade) :</span><br><span class="line">        <span class="built_in">id</span>(studentId), <span class="built_in">name</span>(studentName), <span class="built_in">grade</span>(studentGrade) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用构造函数初始化</span></span><br><span class="line"><span class="function">Student <span class="title">student5</span><span class="params">(<span class="number">1004</span>, <span class="string">&quot;Daisy&quot;</span>, <span class="number">95.0f</span>)</span></span>;</span><br></pre></td></tr></table></figure>

<h2 id="结构体与类的比较"><a href="#结构体与类的比较" class="headerlink" title="结构体与类的比较"></a>结构体与类的比较</h2><p>在 C++ 中，<code>struct</code> 和 <code>class</code> 有很多相似之处，但也有一些关键区别。</p>
<h4 id="类与结构体的相似之处"><a href="#类与结构体的相似之处" class="headerlink" title="类与结构体的相似之处"></a>类与结构体的相似之处</h4><ul>
<li>都可以包含成员变量和成员函数。</li>
<li>都支持访问控制（public、protected、private）。</li>
<li>都可以使用继承和多态。</li>
</ul>
<h4 id="类与结构体的区别"><a href="#类与结构体的区别" class="headerlink" title="类与结构体的区别"></a>类与结构体的区别</h4><p><strong>默认访问控制</strong></p>
<ul>
<li><strong>结构体（struct）</strong>：默认成员访问权限为 <code>public</code>。</li>
<li><strong>类（class）</strong>：默认成员访问权限为 <code>private</code>。</li>
</ul>
<p><strong>例子</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">StructExample</span> &#123;</span><br><span class="line">    <span class="type">int</span> x; <span class="comment">// 默认 public</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ClassExample</span> &#123;</span><br><span class="line">    <span class="type">int</span> y; <span class="comment">// 默认 private</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p><strong>用途习惯</strong></p>
<ul>
<li><strong>结构体（struct）</strong>：通常用于纯数据结构，主要存储数据，成员通常是公开的。</li>
<li><strong>类（class）</strong>：用于包含数据和操作数据的函数，支持更加复杂的封装。</li>
</ul>
<p><strong>实例比较</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="type">int</span> y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> width;</span><br><span class="line">    <span class="type">int</span> height;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setDimensions</span><span class="params">(<span class="type">int</span> w, <span class="type">int</span> h)</span> </span>&#123;</span><br><span class="line">        width = w;</span><br><span class="line">        height = h;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">area</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> width * height;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get_width</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> width;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Rectangle rt;</span><br><span class="line">    <span class="comment">//错误，不能直接访问私有成员</span></span><br><span class="line">    rt.width;</span><br><span class="line">    <span class="comment">//正确，可以通过公有成员函数访问</span></span><br><span class="line">    rt.<span class="built_in">get_width</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="结构体的高级用法"><a href="#结构体的高级用法" class="headerlink" title="结构体的高级用法"></a>结构体的高级用法</h2><h4 id="嵌套结构体"><a href="#嵌套结构体" class="headerlink" title="嵌套结构体"></a>嵌套结构体</h4><p>结构体可以包含其他结构体作为成员。</p>
<p><strong>示例：嵌套地址结构体</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">    std::string city;</span><br><span class="line">    std::string street;</span><br><span class="line">    <span class="type">int</span> houseNumber;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    Address address; <span class="comment">// 嵌套结构体</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Person person;</span><br><span class="line">    person.name = <span class="string">&quot;Eve&quot;</span>;</span><br><span class="line">    person.age = <span class="number">30</span>;</span><br><span class="line">    person.address.city = <span class="string">&quot;New York&quot;</span>;</span><br><span class="line">    person.address.street = <span class="string">&quot;5th Avenue&quot;</span>;</span><br><span class="line">    person.address.houseNumber = <span class="number">101</span>;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; person.name &lt;&lt; <span class="string">&quot; lives at &quot;</span> </span><br><span class="line">              &lt;&lt; person.address.houseNumber &lt;&lt; <span class="string">&quot; &quot;</span> </span><br><span class="line">              &lt;&lt; person.address.street &lt;&lt; <span class="string">&quot;, &quot;</span> </span><br><span class="line">              &lt;&lt; person.address.city &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Eve lives <span class="keyword">at</span> <span class="number">101</span> <span class="number">5</span>th Avenue, <span class="keyword">New</span> York</span><br></pre></td></tr></table></figure>



<h4 id="结构体数组"><a href="#结构体数组" class="headerlink" title="结构体数组"></a>结构体数组</h4><p>可以创建包含多个结构体的数组，用于存储多个相同类型的数据项。</p>
<p><strong>示例：存储多个学生信息的数组</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="type">float</span> grade;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 创建包含3个学生信息的数组</span></span><br><span class="line">    Student students[<span class="number">3</span>] = &#123;</span><br><span class="line">        &#123;<span class="number">1001</span>, <span class="string">&quot;Alice&quot;</span>, <span class="number">89.5f</span>&#125;,</span><br><span class="line">        &#123;<span class="number">1002</span>, <span class="string">&quot;Bob&quot;</span>, <span class="number">92.0f</span>&#125;,</span><br><span class="line">        &#123;<span class="number">1003</span>, <span class="string">&quot;Charlie&quot;</span>, <span class="number">85.0f</span>&#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;学生ID: &quot;</span> &lt;&lt; students[i].id </span><br><span class="line">                  &lt;&lt; <span class="string">&quot;, 姓名: &quot;</span> &lt;&lt; students[i].name </span><br><span class="line">                  &lt;&lt; <span class="string">&quot;, 成绩: &quot;</span> &lt;&lt; students[i].grade &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">学生ID: 1001, 姓名: Alice, 成绩: 89.5</span></span><br><span class="line"><span class="section">学生ID: 1002, 姓名: Bob, 成绩: 92</span></span><br><span class="line"><span class="section">学生ID: 1003, 姓名: Charlie, 成绩: 85</span></span><br></pre></td></tr></table></figure>



<h4 id="结构体指针"><a href="#结构体指针" class="headerlink" title="结构体指针"></a>结构体指针</h4><p>可以创建指向结构体的指针，并通过指针访问结构体成员。</p>
<p><strong>示例：使用结构体指针</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    std::string brand;</span><br><span class="line">    std::string model;</span><br><span class="line">    <span class="type">int</span> year;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Car car = &#123;<span class="string">&quot;Toyota&quot;</span>, <span class="string">&quot;Camry&quot;</span>, <span class="number">2020</span>&#125;;</span><br><span class="line">    Car* carPtr = &amp;car;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;品牌: &quot;</span> &lt;&lt; carPtr-&gt;brand &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;型号: &quot;</span> &lt;&lt; carPtr-&gt;model &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;年份: &quot;</span> &lt;&lt; carPtr-&gt;year &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">品牌: Toyota</span></span><br><span class="line"><span class="section">型号: Camry</span></span><br><span class="line"><span class="section">年份: 2020</span></span><br></pre></td></tr></table></figure>



<h4 id="使用-typedef-简化结构体定义"><a href="#使用-typedef-简化结构体定义" class="headerlink" title="使用 typedef 简化结构体定义"></a>使用 <code>typedef</code> 简化结构体定义</h4><p>使用 <code>typedef</code>（或 <code>using</code> 关键字）可以为结构体类型创建别名，使代码更简洁。</p>
<p><strong>示例：使用 <code>typedef</code></strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="type">float</span> grade;</span><br><span class="line">&#125; Student;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者使用 `using`（C++11 及以上）</span></span><br><span class="line"><span class="keyword">using</span> Student = <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="type">float</span> grade;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p><strong>应用：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Student s1 = &#123;<span class="number">1004</span>, <span class="string">&quot;Daisy&quot;</span>, <span class="number">95.0f</span>&#125;;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;学生ID: &quot;</span> &lt;&lt; s1.id </span><br><span class="line">              &lt;&lt; <span class="string">&quot;, 姓名: &quot;</span> &lt;&lt; s1.name </span><br><span class="line">              &lt;&lt; <span class="string">&quot;, 成绩: &quot;</span> &lt;&lt; s1.grade &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">学生ID: 1004, 姓名: Daisy, 成绩: 95</span></span><br></pre></td></tr></table></figure>



<h3 id="5-结构体中的函数"><a href="#5-结构体中的函数" class="headerlink" title="5. 结构体中的函数"></a>5. 结构体中的函数</h3><p>虽然结构体主要用于存储数据，但在 C++ 中，结构体也可以包含成员函数。这使得结构体更具面向对象的特性。</p>
<p><strong>示例：在结构体中定义成员函数</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    std::string title;</span><br><span class="line">    std::string author;</span><br><span class="line">    <span class="type">int</span> pages;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 成员函数</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">printInfo</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;书名: &quot;</span> &lt;&lt; title </span><br><span class="line">                  &lt;&lt; <span class="string">&quot;, 作者: &quot;</span> &lt;&lt; author </span><br><span class="line">                  &lt;&lt; <span class="string">&quot;, 页数: &quot;</span> &lt;&lt; pages &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Book myBook = &#123;<span class="string">&quot;C++ Primer&quot;</span>, <span class="string">&quot;Stanley B. Lippman&quot;</span>, <span class="number">976</span>&#125;;</span><br><span class="line">    myBook.<span class="built_in">printInfo</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">书名: <span class="selector-tag">C</span>++ <span class="selector-tag">Primer</span>, 作者: <span class="selector-tag">Stanley</span> <span class="selector-tag">B</span>. <span class="selector-tag">Lippman</span>, 页数: <span class="number">976</span></span><br></pre></td></tr></table></figure>



<h4 id="使用结构体作为函数参数和返回值"><a href="#使用结构体作为函数参数和返回值" class="headerlink" title="使用结构体作为函数参数和返回值"></a>使用结构体作为函数参数和返回值</h4><p><strong>传递结构体给函数</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="type">int</span> y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过值传递</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPoint</span><span class="params">(Point p)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Point(&quot;</span> &lt;&lt; p.x &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; p.y &lt;&lt; <span class="string">&quot;)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过引用传递</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">movePoint</span><span class="params">(Point&amp; p, <span class="type">int</span> dx, <span class="type">int</span> dy)</span> </span>&#123;</span><br><span class="line">    p.x += dx;</span><br><span class="line">    p.y += dy;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Point p1 = &#123;<span class="number">10</span>, <span class="number">20</span>&#125;;</span><br><span class="line">    <span class="built_in">printPoint</span>(p1);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">movePoint</span>(p1, <span class="number">5</span>, <span class="number">-5</span>);</span><br><span class="line">    <span class="built_in">printPoint</span>(p1);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Point</span>(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"><span class="built_in">Point</span>(<span class="number">15</span>, <span class="number">15</span>)</span><br></pre></td></tr></table></figure>



<p><strong>从函数返回结构体</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    <span class="type">int</span> width;</span><br><span class="line">    <span class="type">int</span> height;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算面积的结构体</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Area</span> &#123;</span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数返回结构体</span></span><br><span class="line"><span class="function">Area <span class="title">calculateArea</span><span class="params">(Rectangle rect)</span> </span>&#123;</span><br><span class="line">    Area area;</span><br><span class="line">    area.value = rect.width * rect.height;</span><br><span class="line">    <span class="keyword">return</span> area;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Rectangle rect = &#123;<span class="number">5</span>, <span class="number">10</span>&#125;;</span><br><span class="line">    Area rectArea = <span class="built_in">calculateArea</span>(rect);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;矩形面积: &quot;</span> &lt;&lt; rectArea.value &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>输出：</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">矩形面积: 50</span></span><br></pre></td></tr></table></figure>



<h3 id="6-示例项目"><a href="#6-示例项目" class="headerlink" title="6. 示例项目"></a>6. 示例项目</h3><h4 id="示例项目：简单学生信息管理系统"><a href="#示例项目：简单学生信息管理系统" class="headerlink" title="示例项目：简单学生信息管理系统"></a>示例项目：简单学生信息管理系统</h4><p>这个项目将结合前面的知识点，创建一个简单的学生信息管理系统，允许添加、显示和查找学生信息。</p>
<p><strong>需求分析</strong></p>
<ul>
<li>添加新学生的信息（ID、姓名、成绩）</li>
<li>显示所有学生的信息</li>
<li>根据学生ID查找学生信息</li>
</ul>
<p><strong>代码实现</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义学生结构体</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="type">float</span> grade;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 成员函数打印学生信息</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">printInfo</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;学生ID: &quot;</span> &lt;&lt; id </span><br><span class="line">                  &lt;&lt; <span class="string">&quot;, 姓名: &quot;</span> &lt;&lt; name </span><br><span class="line">                  &lt;&lt; <span class="string">&quot;, 成绩: &quot;</span> &lt;&lt; grade &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加学生</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">addStudent</span><span class="params">(std::vector&lt;Student&gt;&amp; students, <span class="type">int</span> id, <span class="type">const</span> std::string&amp; name, <span class="type">float</span> grade)</span> </span>&#123;</span><br><span class="line">    Student newStudent = &#123;id, name, grade&#125;;</span><br><span class="line">    students.<span class="built_in">push_back</span>(newStudent);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;添加学生成功。&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示所有学生</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">displayStudents</span><span class="params">(<span class="type">const</span> std::vector&lt;Student&gt;&amp; students)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (students.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;没有学生信息。&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;所有学生信息：&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; student : students) &#123;</span><br><span class="line">        student.<span class="built_in">printInfo</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据ID查找学生</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">findStudentById</span><span class="params">(<span class="type">const</span> std::vector&lt;Student&gt;&amp; students, <span class="type">int</span> id)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; student : students) &#123;</span><br><span class="line">        <span class="keyword">if</span> (student.id == id) &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;找到学生：&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            student.<span class="built_in">printInfo</span>();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;未找到ID为 &quot;</span> &lt;&lt; id &lt;&lt; <span class="string">&quot; 的学生。&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;Student&gt; students;</span><br><span class="line">    <span class="type">int</span> choice;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;\n===== 学生信息管理系统 =====&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;1. 添加学生&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;2. 显示所有学生&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;3. 根据ID查找学生&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;4. 退出&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;请选择（1-4）：&quot;</span>;</span><br><span class="line">        std::cin &gt;&gt; choice;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (choice == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="type">int</span> id;</span><br><span class="line">            std::string name;</span><br><span class="line">            <span class="type">float</span> grade;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;输入学生ID: &quot;</span>;</span><br><span class="line">            std::cin &gt;&gt; id;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;输入学生姓名: &quot;</span>;</span><br><span class="line">            std::cin &gt;&gt; name;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;输入学生成绩: &quot;</span>;</span><br><span class="line">            std::cin &gt;&gt; grade;</span><br><span class="line">            <span class="built_in">addStudent</span>(students, id, name, grade);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (choice == <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="built_in">displayStudents</span>(students);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (choice == <span class="number">3</span>) &#123;</span><br><span class="line">            <span class="type">int</span> searchId;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;输入要查找的学生ID: &quot;</span>;</span><br><span class="line">            std::cin &gt;&gt; searchId;</span><br><span class="line">            <span class="built_in">findStudentById</span>(students, searchId);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (choice == <span class="number">4</span>) &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;退出系统。&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;无效选择，请重新输入。&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span> (choice != <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>代码解析</strong></p>
<ol>
<li><strong>结构体定义</strong>：定义了一个 <code>Student</code> 结构体，包含 <code>id</code>、<code>name</code> 和 <code>grade</code>，并有一个成员函数 <code>printInfo</code> 来打印学生信息。</li>
<li><strong>功能函数</strong>：<ul>
<li><code>addStudent</code>：向学生列表中添加一个新的学生。</li>
<li><code>displayStudents</code>：显示所有学生的信息。</li>
<li><code>findStudentById</code>：根据学生ID查找并显示学生信息。</li>
</ul>
</li>
<li><strong>用户交互</strong>：使用 <code>do-while</code> 循环和 <code>switch-case</code> 来处理用户的选择，实现添加、显示和查找学生信息的功能。</li>
</ol>
<p><strong>运行示例</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">===== 学生信息管理系统 =====</span><br><span class="line"><span class="bullet">1.</span> 添加学生</span><br><span class="line"><span class="bullet">2.</span> 显示所有学生</span><br><span class="line"><span class="bullet">3.</span> 根据ID查找学生</span><br><span class="line"><span class="bullet">4.</span> 退出</span><br><span class="line">请选择（1-4）：1</span><br><span class="line">输入学生ID: 1001</span><br><span class="line">输入学生姓名: Alice</span><br><span class="line">输入学生成绩: 89.5</span><br><span class="line">添加学生成功。</span><br><span class="line"></span><br><span class="line">===== 学生信息管理系统 =====</span><br><span class="line"><span class="bullet">1.</span> 添加学生</span><br><span class="line"><span class="bullet">2.</span> 显示所有学生</span><br><span class="line"><span class="bullet">3.</span> 根据ID查找学生</span><br><span class="line"><span class="bullet">4.</span> 退出</span><br><span class="line">请选择（1-4）：1</span><br><span class="line">输入学生ID: 1002</span><br><span class="line">输入学生姓名: Bob</span><br><span class="line">输入学生成绩: 92.0</span><br><span class="line">添加学生成功。</span><br><span class="line"></span><br><span class="line">===== 学生信息管理系统 =====</span><br><span class="line"><span class="bullet">1.</span> 添加学生</span><br><span class="line"><span class="bullet">2.</span> 显示所有学生</span><br><span class="line"><span class="bullet">3.</span> 根据ID查找学生</span><br><span class="line"><span class="bullet">4.</span> 退出</span><br><span class="line">请选择（1-4）：2</span><br><span class="line">所有学生信息：</span><br><span class="line">学生ID: 1001, 姓名: Alice, 成绩: 89.5</span><br><span class="line">学生ID: 1002, 姓名: Bob, 成绩: 92</span><br><span class="line"></span><br><span class="line">===== 学生信息管理系统 =====</span><br><span class="line"><span class="bullet">1.</span> 添加学生</span><br><span class="line"><span class="bullet">2.</span> 显示所有学生</span><br><span class="line"><span class="bullet">3.</span> 根据ID查找学生</span><br><span class="line"><span class="bullet">4.</span> 退出</span><br><span class="line">请选择（1-4）：3</span><br><span class="line">输入要查找的学生ID: 1001</span><br><span class="line">找到学生：</span><br><span class="line">学生ID: 1001, 姓名: Alice, 成绩: 89.5</span><br><span class="line"></span><br><span class="line">===== 学生信息管理系统 =====</span><br><span class="line"><span class="bullet">1.</span> 添加学生</span><br><span class="line"><span class="bullet">2.</span> 显示所有学生</span><br><span class="line"><span class="bullet">3.</span> 根据ID查找学生</span><br><span class="line"><span class="bullet">4.</span> 退出</span><br><span class="line">请选择（1-4）：4</span><br><span class="line">退出系统。</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.limerence2017.com/2024/09/28/cppbase08/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="恋恋风辰的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/09/28/cppbase08/" itemprop="url">零基础C++(8) 处理类型</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2024-09-28T10:42:12+08:00">
                2024-09-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cppbase/" itemprop="url" rel="index">
                    <span itemprop="name">零基础C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h2><p>类型别名（type alias）是一个名字，它是某种类型的同义词。使用类型别名有很多好处，它让复杂的类型名字变得简单明了、易于理解和使用，还有助于程序员清楚地知道使用该类型的真实目的。</p>
<p>有两种方法可用于定义类型别名。传统的方法是使用关键字typedef：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//wages 是double的同义词</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">double</span> wages;</span><br><span class="line"><span class="comment">//base是double的同义词,p是double*的同义词</span></span><br><span class="line"><span class="keyword">typedef</span> wages base, *p;</span><br></pre></td></tr></table></figure>

<p><strong>C++11</strong></p>
<p>新标准规定了一种新的方法，使用别名声明（alias declaration）来定义类型的别名：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//64位整型</span></span><br><span class="line"><span class="keyword">using</span> <span class="type">int64_t</span> = <span class="type">long</span> <span class="type">long</span>;</span><br></pre></td></tr></table></figure>

<p>这种方法用关键字using作为别名声明的开始，其后紧跟别名和等号，其作用是把等号左侧的名字规定成等号右侧类型的别名。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义变量a为64位整型</span></span><br><span class="line"><span class="type">int64_t</span> a = <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<h2 id="指针、常量和类型别名"><a href="#指针、常量和类型别名" class="headerlink" title="指针、常量和类型别名"></a>指针、常量和类型别名</h2><p>如果某个类型别名指代的是复合类型或常量，那么把它用到声明语句里就会产生意想不到的后果。</p>
<p>例如下面的声明语句用到了类型<code>pstring</code>，它实际上是类型<code>char＊</code>的别名：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">char</span> * pstring;</span><br><span class="line"><span class="type">const</span> pstring cstr = <span class="number">0</span>;</span><br><span class="line"><span class="type">const</span> pstring *ps;</span><br></pre></td></tr></table></figure>

<p>上述两条声明语句的基本数据类型都是<code>const pstring</code>，和过去一样，<code>const</code>是对给定类型的修饰。</p>
<p><code>pstring</code>实际上是指向char的指针，因此，<code>const pstring</code>就是指向<code>char</code>的常量指针，而非指向常量字符的指针。</p>
<h2 id="auto类型说明符"><a href="#auto类型说明符" class="headerlink" title="auto类型说明符"></a>auto类型说明符</h2><p>编程时常常需要把表达式的值赋给变量，这就要求在声明变量的时候清楚地知道表达式的类型。</p>
<p>然而要做到这一点并非那么容易，有时甚至根本做不到。</p>
<p>为了解决这个问题，C++11新标准引入了auto类型说明符，用它就能让编译器替我们去分析表达式所属的类型。</p>
<p>和原来那些只对应一种特定类型的说明符（比如double）不同，auto让编译器通过初始值来推算变量的类型。显然，auto定义的变量必须有初始值：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//计算求和</span></span><br><span class="line"><span class="type">int</span> age1 = <span class="number">20</span>;</span><br><span class="line"><span class="type">int</span> age2 = <span class="number">35</span>;</span><br><span class="line"><span class="keyword">auto</span> age_add = age1+age2;</span><br></pre></td></tr></table></figure>

<p>auto很有作用，后期我们会学习尾置类型推导，以后再讲。</p>
<p>使用auto也能在一条语句中声明多个变量。因为一条声明语句只能有一个基本数据类型，所以该语句中所有变量的初始基本数据类型都必须一样：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//正确, i是整数，p是整型指针</span></span><br><span class="line"><span class="keyword">auto</span> i= <span class="number">0</span>, * p= &amp;i;</span><br><span class="line"><span class="comment">//错误, sz是整型，pi是double</span></span><br><span class="line"><span class="comment">//auto sz = 0, pi = 3.14;</span></span><br></pre></td></tr></table></figure>

<h2 id="复合类型、常量和auto"><a href="#复合类型、常量和auto" class="headerlink" title="复合类型、常量和auto"></a>复合类型、常量和auto</h2><p>编译器推断出来的auto类型有时候和初始值的类型并不完全一样，编译器会适当地改变结果类型使其更符合初始化规则。</p>
<p>首先，正如我们所熟知的，使用引用其实是使用引用的对象，特别是当引用被用作初始值时，真正参与初始化的其实是引用对象的值。</p>
<p>此时编译器以引用对象的类型作为auto的类型：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> i = <span class="number">0</span>, &amp;r = i;</span><br><span class="line"><span class="comment">// a是一个整数，类型是r所引用的类型</span></span><br><span class="line"><span class="keyword">auto</span> a = r;</span><br></pre></td></tr></table></figure>

<p>auto一般会忽略掉顶层<code>const</code>，同时底层<code>const</code>则会保留下来，比如当初始值是一个指向常量的指针时：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>, &amp;r = i;</span><br><span class="line">    <span class="comment">// a是一个整数，类型是r所引用的类型</span></span><br><span class="line">    <span class="keyword">auto</span> a = r;</span><br><span class="line">    <span class="comment">// cr是一个常量引用，ci是int类型的常量</span></span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> ci = i, &amp;cr = ci;</span><br><span class="line">    <span class="comment">// b是一个整数，ci顶层const被忽略了</span></span><br><span class="line">    <span class="keyword">auto</span> b = ci;</span><br><span class="line">    <span class="comment">// c是一个整数，cr是ci的别名，ci本身是一个顶层const</span></span><br><span class="line">    <span class="keyword">auto</span> c = cr;</span><br><span class="line">    <span class="comment">// d 是一个整型指针，i是整型</span></span><br><span class="line">    <span class="keyword">auto</span> d = &amp;i;</span><br><span class="line">    <span class="comment">// e是一个指向整数常量的指针，对常量对象取地址是一种底层const</span></span><br><span class="line">    <span class="keyword">auto</span> e = &amp;ci;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果希望推断出的auto类型是一个顶层const，需要明确指出：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//顶层const可显示指定,f是一个const int类型</span></span><br><span class="line"><span class="type">const</span> <span class="keyword">auto</span> f = ci;</span><br></pre></td></tr></table></figure>

<p>还可以将引用的类型设为auto，此时原来的初始化规则仍然适用：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// g是一个整型常量引用，绑定到ci</span></span><br><span class="line"><span class="keyword">auto</span> &amp;g = ci;</span><br><span class="line"><span class="comment">//错误，非常量引用不能绑定字面量</span></span><br><span class="line"><span class="comment">//auto &amp;h = 42;</span></span><br><span class="line"><span class="comment">//正确,常量引用可以绑定字面量</span></span><br><span class="line"><span class="type">const</span> <span class="keyword">auto</span> &amp;j = <span class="number">42</span>;</span><br></pre></td></tr></table></figure>

<p>要在一条语句中定义多个变量，切记，符号&amp;和＊只从属于某个声明符，而非基本数据类型的一部分，因此初始值必须是同一种类型：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//i为int类型， ci为const int类型， 但是k是int类型，l是int&amp;类型</span></span><br><span class="line"><span class="keyword">auto</span> k = ci, &amp;l = i;</span><br><span class="line"><span class="comment">//m是对常量的引用，p是指向整数常量的指针</span></span><br><span class="line"><span class="comment">// p为const int*类型</span></span><br><span class="line"><span class="keyword">auto</span> &amp;m = ci, *p = &amp;ci;</span><br><span class="line"><span class="comment">//错误, i为int类型，&amp;ci的类型为const int*</span></span><br><span class="line"><span class="comment">//auto &amp;n = i, *p2 = &amp;ci;</span></span><br></pre></td></tr></table></figure>

<h2 id="decltype类型指示符"><a href="#decltype类型指示符" class="headerlink" title="decltype类型指示符"></a>decltype类型指示符</h2><p><strong>C++11</strong></p>
<p>有时会遇到这种情况：希望从表达式的类型推断出要定义的变量的类型，但是不想用该表达式的值初始化变量。</p>
<p>为了满足这一要求，C++11新标准引入了第二种类型说明符decltype，它的作用是选择并返回操作数的数据类型。在此过程中，编译器分析表达式并得到它的类型，却不实际计算表达式的值：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">decltype</span>(<span class="built_in">f</span>()) sum = x; <span class="comment">//sum的类型就是函数f的返回值的类型</span></span><br></pre></td></tr></table></figure>

<p>编译器并不实际调用函数f，而是使用当调用发生时f的返回值类型作为sum的类型。换句话说，编译器为sum指定的类型是什么呢？就是假如f被调用的话将会返回的那个类型。</p>
<p><code>decltype</code>处理顶层<code>const</code>和引用的方式与<code>auto</code>有些许不同。如果<code>decltype</code>使用的表达式是一个变量，则<code>decltype</code>返回该变量的类型（包括顶层<code>const</code>和引用在内）：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> ci = <span class="number">0</span>, &amp;cj = ci;</span><br><span class="line"><span class="comment">//x是const int类型</span></span><br><span class="line"><span class="keyword">decltype</span>(ci) x = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//y是一个const int&amp;类型，y绑定到x</span></span><br><span class="line"><span class="keyword">decltype</span>(cj) y = x;</span><br><span class="line"><span class="comment">//错误，z是一个引用,引用必须初始化</span></span><br><span class="line"><span class="comment">//decltype(cj) z;</span></span><br></pre></td></tr></table></figure>

<p>因为<code>cj</code>是一个引用，<code>decltype（cj）</code>的结果就是引用类型，因此作为引用的z必须被初始化。</p>
<p>需要指出的是，引用从来都作为其所指对象的同义词出现，只有用在<code>decltype</code>处是一个例外。</p>
<h2 id="decltype和引用"><a href="#decltype和引用" class="headerlink" title="decltype和引用"></a><code>decltype</code>和引用</h2><p>如果<code>decltype</code>使用的表达式不是一个变量，则<code>decltype</code>返回表达式结果对应的类型。</p>
<p>有些表达式将向<code>decltype</code>返回一个引用类型。</p>
<p>一般来说当这种情况发生时，意味着该表达式的结果对象能作为一条赋值语句的左值：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">//decltype的结果可以是引用各类型</span></span><br><span class="line">    <span class="type">int</span> i = <span class="number">42</span>, *p = &amp;i, &amp;r = i;</span><br><span class="line">    <span class="comment">//正确，假发的结果是int，因此b是一个未初始化的int</span></span><br><span class="line">    <span class="keyword">decltype</span>(r + <span class="number">0</span>) b;</span><br><span class="line">    <span class="comment">//错误，c是int&amp;，必须初始化</span></span><br><span class="line">    <span class="comment">//decltype(*p) c;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为r是一个引用，因此<code>decltype（r）</code>的结果是引用类型。</p>
<p>如果想让结果类型是r所指的类型，可以把r作为表达式的一部分，如r+0，显然这个表达式的结果将是一个具体值而非一个引用。</p>
<p>另一方面，如果表达式的内容是解引用操作，则<code>decltype</code>将得到引用类型。正如我们所熟悉的那样，解引用指针可以得到指针所指的对象，而且还能给这个对象赋值。</p>
<p>因此，<code>decltype（*p）</code>的结果类型就是int&amp;，而非<code>int</code>。<code>decltype</code>和<code>auto</code>的另一处重要区别是，<code>decltype</code>的结果类型与表达式形式密切相关。</p>
<p>有一种情况需要特别注意：对于<code>decltype</code>所用的表达式来说，如果变量名加上了一对括号，则得到的类型与不加括号时会有不同。</p>
<p>如果<code>decltype</code>使用的是一个不加括号的变量，则得到的结果就是该变量的类型；</p>
<p>如果给变量加上了一层或多层括号，编译器就会把它当成是一个表达式。变量是一种可以作为赋值语句左值的特殊表达式，所以这样的<code>decltype</code>就会得到引用类型：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//decltype的表达式如果加上了括号的变量，结果就是引用</span></span><br><span class="line"><span class="comment">//错误，d是int&amp;，必须初始化</span></span><br><span class="line"><span class="comment">//decltype((i)) d;</span></span><br><span class="line"><span class="comment">//正确,e是一个未被初始化的int类型值</span></span><br><span class="line"><span class="keyword">decltype</span>(r) e = i;</span><br></pre></td></tr></table></figure>

<p>切记：<code>decltype（（variable））</code>（注意是双层括号）的结果永远是引用，而<code>decltype（variable）</code>结果只有当variable本身就是一个引用时才是引用。</p>
<h2 id="工作中的应用"><a href="#工作中的应用" class="headerlink" title="工作中的应用"></a>工作中的应用</h2><p>工作中会利用<code>auto</code>和<code>decltype</code>配合使用，结合模板做类型推导返回动态类型，比如我们在并发编程系列课程中封装提交任务</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">F</span>, <span class="keyword">class</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">commit</span><span class="params">(F&amp;&amp; f, Args&amp;&amp;... args)</span> -&gt; </span></span><br><span class="line"><span class="function">std::future&lt;<span class="title">decltype</span><span class="params">(std::forward&lt;F&gt;(f)(std::forward&lt;Args&gt;(args)...))</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">using</span> RetType = <span class="keyword">decltype</span>(std::forward&lt;F&gt;(f)(std::forward&lt;Args&gt;(args)...));</span><br><span class="line">    <span class="keyword">if</span> (stop_.<span class="built_in">load</span>())</span><br><span class="line">        <span class="keyword">return</span> std::future&lt;RetType&gt;&#123;&#125;;</span><br><span class="line">    <span class="keyword">auto</span> task = std::make_shared&lt;std::packaged_task&lt;<span class="built_in">RetType</span>()&gt;&gt;(</span><br><span class="line">            std::<span class="built_in">bind</span>(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...));</span><br><span class="line">    std::future&lt;RetType&gt; ret = task-&gt;<span class="built_in">get_future</span>();</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">cv_mt</span><span class="params">(cv_mt_)</span></span>;</span><br><span class="line">        tasks_.<span class="built_in">emplace</span>([task] &#123; (*task)(); &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    cv_lock_.<span class="built_in">notify_one</span>();</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这段代码大家要学习模板，以及万能引用后才能完全吸收，我们留个伏笔，以后的剧情中会触发。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.limerence2017.com/2024/09/21/cppbase07/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="恋恋风辰的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/09/21/cppbase07/" itemprop="url">零基础C++(7) 引用类型</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2024-09-21T11:37:12+08:00">
                2024-09-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cppbase/" itemprop="url" rel="index">
                    <span itemprop="name">零基础C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="const限定符"><a href="#const限定符" class="headerlink" title="const限定符"></a><code>const</code>限定符</h2><h3 id="1-const-的定义与作用"><a href="#1-const-的定义与作用" class="headerlink" title="1 const 的定义与作用"></a>1 <code>const</code> 的定义与作用</h3><p><code>const</code> 是 C++ 关键字，用于指示变量的值不可修改。通过使用 <code>const</code>，可以提高代码的安全性与可读性，防止无意中修改变量的值。</p>
<h3 id="2-const-在变量声明中的位置"><a href="#2-const-在变量声明中的位置" class="headerlink" title="2 const 在变量声明中的位置"></a>2 <code>const</code> 在变量声明中的位置</h3><p><code>const</code> 关键字通常放在变量类型之前，例如：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> a = <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p>也可以放在类型之后，但这种用法较少见：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="type">const</span> a = <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p>可以用一个变量初始化常量， 也可以将一个常量赋值给一个变量</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可以用一个变量初始化常量</span></span><br><span class="line"><span class="type">int</span> i1 = <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> i2 = i1;</span><br><span class="line"><span class="comment">//也可以将一个常量赋值给一个变量</span></span><br><span class="line"><span class="type">int</span> i3 = i2;</span><br></pre></td></tr></table></figure>

<p><code>const</code>变量必须初始化</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误用法，const变量必须初始化</span></span><br><span class="line"><span class="comment">//const int i4;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-编译器如何处理-const-修饰的变量"><a href="#3-编译器如何处理-const-修饰的变量" class="headerlink" title="3 编译器如何处理 const 修饰的变量"></a>3 编译器如何处理 <code>const</code> 修饰的变量</h3><p><code>const</code> 修饰的变量在编译时会被视为只读，尝试修改其值会导致编译错误。此外，编译器可能会对 <code>const</code> 变量进行优化，如将其存储在只读内存区域。</p>
<p><strong>注意</strong></p>
<blockquote>
<p>默认状态下，<code>const</code>对象仅在文件内有效</p>
</blockquote>
<p>当以编译时初始化的方式定义一个<code>const</code>对象时，就如对<code>bufSize</code>的定义一样：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> bufSize = <span class="number">512</span>;</span><br></pre></td></tr></table></figure>

<p>编译器将在编译过程中把用到该变量的地方都替换成对应的值。也就是说，编译器会找到代码中所有用到<code>bufSize</code>的地方，然后用512替换。</p>
<p>为了执行上述替换，编译器必须知道变量的初始值。</p>
<p>如果程序包含多个文件，则每个用了<code>const</code>对象的文件都必须得能访问到它的初始值才行。要做到这一点，就必须在每一个用到变量的文件中都有对它的定义.</p>
<p>为了支持这一用法，同时避免对同一变量的重复定义，默认情况下，<code>const</code>对象被设定为仅在文件内有效。当多个文件中出现了同名的<code>const</code>变量时，其实等同于在不同文件中分别定义了独立的变量。</p>
<p>我们创建一个<code>global.h</code>文件和<code>global.cpp</code>文件, 我们知道头文件只做变量的声明，之前我们在头文件添加变量的定义会导致连接错误。</p>
<p>那如果我们添加<code>const</code>变量的定义</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> DAY08_CONST_GLOBAL_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DAY08_CONST_GLOBAL_H</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> bufSize = <span class="number">100</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">//DAY08_CONST_GLOBAL_H</span></span></span><br></pre></td></tr></table></figure>

<p>在<code>main.cpp</code>和<code>global.cpp</code>中包含<code>global.h</code>，发现可以编译通过，虽然<code>main.cpp</code>和<code>global.cpp</code>中包含了同名的<code>bufSize</code>，但却是不同的变量，运行程序可以编译通过。</p>
<p>有时候我们不想定义不同的<code>const</code>变量，可以在<code>global.h</code>中用<code>extern</code>声明<code>bufSize</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="type">const</span> <span class="type">int</span> bufSize2;</span><br></pre></td></tr></table></figure>

<p>在<code>global.cpp</code>中定义</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> bufSize2 = <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p>同样可以编译通过。</p>
<p>为了验证我们的说法，我们可以在<code>global.h</code>中声明一个函数,用来打印两个变量的地址</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//打印bufSize地址和bufSize2地址</span></span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="type">void</span> <span class="title">PrintBufAddress</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>在<code>global.cpp</code>中实现<code>PrintBufAddress()</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">PrintBufAddress</span><span class="params">()</span></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;global.cpp buf address: &quot;</span> &lt;&lt; &amp;bufSize &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;global.cpp buf2 address: &quot;</span> &lt;&lt; &amp;bufSize2 &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后我们在<code>main.cpp</code>中调用<code>PrintBufAddress()</code>函数，并且在<code>main.cpp</code>中打印两个变量地址</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PrintBufAddress</span>();</span><br><span class="line"><span class="comment">//输出bufSize地址</span></span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;main.cpp buf address is &quot;</span> &lt;&lt; &amp;bufSize &lt;&lt; std::endl;</span><br><span class="line"><span class="comment">//输出bufSize2地址</span></span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;main.cpp buf2 address is &quot;</span> &lt;&lt; &amp;bufSize2 &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<p>程序输出</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">global.cpp buf address: 0x7ff67a984040</span><br><span class="line">global.cpp buf2 address: 0x7ff67a984044</span><br><span class="line">main.cpp buf address is 0x7ff67a984000</span><br><span class="line">main.cpp buf2 address is 0x7ff67a984044</span><br></pre></td></tr></table></figure>

<p>可以看出<code>global.cpp</code>中的<code>bufSize</code>和<code>main.cpp</code>中的<code>bufSize</code>不是同一个变量</p>
<p><strong>技巧</strong></p>
<blockquote>
<p>如果想在多个文件之间共享<code>const</code>对象，必须在变量的定义之前添加extern关键字。</p>
</blockquote>
<h2 id="const的引用"><a href="#const的引用" class="headerlink" title="const的引用"></a><code>const</code>的引用</h2><p>可以把引用绑定到<code>const</code>对象上，就像绑定到其他对象上一样，我们称之为对常量的引用（<code>reference to const</code>）。与普通引用不同的是，对常量的引用不能被用作修改它所绑定的对象：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义常量</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> ci = <span class="number">1024</span>;</span><br><span class="line"><span class="comment">//用常量引用绑定常量</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp;r1 = ci;</span><br></pre></td></tr></table></figure>

<p>不能修改常量引用的值</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不能修改常量引用的值</span></span><br><span class="line"><span class="comment">//r1 = 2048;</span></span><br></pre></td></tr></table></figure>

<p>也不能用非常量引用指向一个常量对象</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//也不能用非常量引用指向一个常量对象</span></span><br><span class="line"><span class="comment">//int&amp; r2 = ci;</span></span><br></pre></td></tr></table></figure>

<p><strong>术语</strong></p>
<blockquote>
<p>常量引用是对<code>const</code>的引用</p>
</blockquote>
<p>企业中，<code>C++</code>程序员们经常把词组“对<code>const</code>的引用”简称为“常量引用</p>
<p>允许将<code>const</code>引用绑定一个非<code>const</code>变量</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> i5 = <span class="number">1024</span>;</span><br><span class="line"><span class="comment">//允许将const int&amp; 绑定到一个普通的int对象上</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp;r5 = i5;</span><br></pre></td></tr></table></figure>

<p>常量引用绑定字面量</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//常量引用绑定字面量</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp;r6 = <span class="number">1024</span>;</span><br></pre></td></tr></table></figure>

<p>常量引用绑定表达式计算的值</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//常量引用绑定表达式计算的值</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp;r7 = r6 * <span class="number">2</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp;r8 = i5 * <span class="number">2</span> + <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p><strong>思考1</strong></p>
<p>下面的代码能编译通过吗？</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> dval = <span class="number">3.14</span>;</span><br><span class="line"><span class="type">int</span> &amp; rd = dval;</span><br></pre></td></tr></table></figure>

<p><strong>答案</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误用法，类型不匹配</span></span><br><span class="line"><span class="type">double</span> dval = <span class="number">3.14</span>;</span><br><span class="line"><span class="type">int</span> &amp; rd = dval;</span><br></pre></td></tr></table></figure>

<p><strong>思考2</strong></p>
<p>下面的代码能编译通过吗？</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> dval = <span class="number">3.14</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp; ri = dval;</span><br></pre></td></tr></table></figure>

<p><strong>答案</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//编译通过</span></span><br><span class="line"><span class="type">double</span> dval = <span class="number">3.14</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp; ri = dval;</span><br></pre></td></tr></table></figure>

<p>上面的代码相当于</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//上面代码会做隐士转换,相当于下面代码</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> temp  = dval;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp;rt = temp;</span><br></pre></td></tr></table></figure>

<p>在这种情况下，ri绑定了一个临时量（temporary）对象。</p>
<p>所谓临时量对象就是当编译器需要一个空间来暂存表达式的求值结果时临时创建的一个未命名的对象。</p>
<p>C++程序员们常常把临时量对象简称为临时量。</p>
<p>对<code>const</code>的引用可能引用一个并非<code>const</code>的对象必须认识到，常量引用仅对引用可参与的操作做出了限定，对于引用的对象本身是不是一个常量未作限定。因为对象也可能是个非常量，所以允许通过其他途径改变它的值：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> i9 = <span class="number">1024</span>;</span><br><span class="line"><span class="comment">//非常量引用绑定i9</span></span><br><span class="line"><span class="type">int</span> &amp;r9 = i9;</span><br><span class="line"><span class="comment">//常量引用绑定一个变量</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp;r10 = i9;</span><br><span class="line"><span class="comment">//可以同过非常量引用修改i9的值</span></span><br><span class="line">r9 = <span class="number">2048</span>;</span><br></pre></td></tr></table></figure>

<h2 id="指针和const"><a href="#指针和const" class="headerlink" title="指针和const"></a>指针和<code>const</code></h2><h3 id="指向常量的指针-pointer-to-const"><a href="#指向常量的指针-pointer-to-const" class="headerlink" title="指向常量的指针(pointer to const)"></a>指向常量的指针(pointer to const)</h3><p>可以令指针指向常量或非常量。类似于常量引用，指向常量的指针（<code>pointer to const</code>）不能用于改变其所指对象的值。</p>
<p>要想存放常量对象的地址，只能使用指向常量的指针：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//PI 是一个常量,它的值不能改变</span></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> PI = <span class="number">3.14</span>;</span><br><span class="line"><span class="comment">//错误，ptr是一个普通指针</span></span><br><span class="line"><span class="comment">//double * ptr = &amp;PI;</span></span><br><span class="line"><span class="comment">//正确,cptr可以指向一个双精度常量</span></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> *cptr = &amp;PI;</span><br><span class="line"><span class="comment">//错误，不能给*ptr赋值</span></span><br><span class="line"><span class="comment">//*cptr = 3.14;</span></span><br></pre></td></tr></table></figure>

<p>指针的类型必须与其所指对象的类型一致，但是允许令一个指向常量的指针指向一个非常量对象</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可以用指向常量的指针指向一个非常量</span></span><br><span class="line"><span class="type">int</span> i10 = <span class="number">2048</span>;</span><br><span class="line"><span class="comment">//ptr指向i10</span></span><br><span class="line"><span class="type">int</span> *cptr2 = &amp;i10;</span><br></pre></td></tr></table></figure>

<h3 id="const指针"><a href="#const指针" class="headerlink" title="const指针"></a><code>const</code>指针</h3><p>指针是对象而引用不是，因此就像其他对象类型一样，允许把指针本身定为常量。</p>
<p>常量指针（<code>const pointer</code>）必须初始化，而且一旦初始化完成，则它的值（也就是存放在指针中的那个地址）就不能再改变了。</p>
<p>把＊放在<code>const</code>关键字之前用以说明指针是一个常量，这样的书写形式隐含着一层意味，即不变的是指针本身的值而非指向的那个值：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> errNumb = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//curErr是一个常量指针，指向errNumb</span></span><br><span class="line"><span class="type">int</span> * <span class="type">const</span> curErr = &amp;errNumb;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> pi2 = <span class="number">3.14</span>;</span><br><span class="line"><span class="comment">//pip 是一个指向常量对象的常量指针</span></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> *<span class="type">const</span> pip = &amp;pi2;</span><br></pre></td></tr></table></figure>

<p>指针本身是一个常量并不意味着不能通过指针修改其所指对象的值，能否这样做完全依赖于所指对象的类型</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误，pip是一个指向常量的指针</span></span><br><span class="line"><span class="comment">//*pip = 2.72;</span></span><br><span class="line"><span class="comment">//可以修改常量指针指向的内容</span></span><br><span class="line">*curErr = <span class="number">1024</span>;</span><br><span class="line"><span class="comment">//可以修改常量指针指向的地址</span></span><br><span class="line"><span class="comment">//curErr = &amp;i10;</span></span><br></pre></td></tr></table></figure>

<h2 id="顶层const"><a href="#顶层const" class="headerlink" title="顶层const"></a>顶层<code>const</code></h2><p>指针本身是一个对象，它又可以指向另外一个对象。因此，指针本身是不是常量以及指针所指的是不是一个常量就是两个相互独立的问题</p>
<p>用名词顶层<code>const（top-level const）</code>表示指针本身是个常量，而用名词底层<code>const（low-level const）</code>表示指针所指的对象是一个常量。</p>
<p>顶层<code>const</code>可以表示任意的对象是常量，这一点对任何数据类型都适用，如算术类型、类、指针等。</p>
<p>底层<code>const</code>则与指针和引用等复合类型的基本类型部分有关。比较特殊的是，指针类型既可以是顶层<code>const</code>也可以是底层<code>const</code>，这一点和其他类型相比区别明显：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//不能改变p1的值，这是一个顶层const</span></span><br><span class="line"><span class="type">int</span> * <span class="type">const</span> pi = &amp;i;</span><br><span class="line"><span class="comment">//不能改变ci的值，这是一个顶层const</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> ci  = <span class="number">42</span>;</span><br><span class="line"><span class="comment">//允许改变p2的值，这是一个底层const</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> *  p2 = &amp;ci;</span><br><span class="line"><span class="comment">//靠右边的const是顶层const，靠左边的const是底层const</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> * <span class="type">const</span> p3 = p2;</span><br><span class="line"><span class="comment">//用于声明引用的const都是底层const</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> &amp;r = ci;</span><br></pre></td></tr></table></figure>

<p>底层<code>const</code>的限制却不能忽视。当执行对象的拷贝操作时，拷入和拷出的对象必须具有相同的底层const资格，或者两个对象的数据类型必须能够转换</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//指针赋值要注意关注底层const</span></span><br><span class="line"><span class="comment">//p2拥有底层const,p4无底层const，所以无法赋值</span></span><br><span class="line"><span class="comment">//int * p4 = p2;</span></span><br></pre></td></tr></table></figure>

<h2 id="constexpr和常量表达式"><a href="#constexpr和常量表达式" class="headerlink" title="constexpr和常量表达式"></a><code>constexpr</code>和常量表达式</h2><p>常量表达式<code>（const expression）</code>是指值不会改变并且在编译过程就能得到计算结果的表达式。显然，字面值属于常量表达式，用常量表达式初始化的<code>const</code>对象也是常量表达式。后面将会提到，<code>C++</code>语言中有几种情况下是要用到常量表达式的。</p>
<p>我们先在global.h中声明一个全局函数返回固定大小</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">extern</span> <span class="type">int</span> <span class="title">GetSize</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>在global.cpp中实现</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">GetSize</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">20</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后我们用const定义一些常量表达式</p>
<p>一个对象（或表达式）是不是常量表达式由它的数据类型和初始值共同决定，例如</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">//max_files是一个常量表达式</span></span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> max_files = <span class="number">20</span>;</span><br><span class="line">    <span class="comment">//limit是一个常量表达式</span></span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> limit = max_files + <span class="number">10</span>;</span><br><span class="line">    <span class="comment">//staff_size不是常量表达式,无const声明</span></span><br><span class="line">    <span class="type">int</span> staff_size = <span class="number">20</span>;</span><br><span class="line">    <span class="comment">//sz不是常量表达式,运行时计算才得知</span></span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> sz = <span class="built_in">GetSize</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>尽管<code>staff_size</code>的初始值是个字面值常量，但由于它的数据类型只是一个普通<code>int</code>而非<code>const int</code>，所以它不属于常量表达式。</p>
<p>另一方面，尽管<code>sz</code>本身是一个常量，但它的具体值直到运行时才能获取到，所以也不是常量表达式。</p>
<p>在一个复杂系统中，很难（几乎肯定不能）分辨一个初始值到底是不是常量表达式。</p>
<p>当然可以定义一个<code>const</code>变量并把它的初始值设为我们认为的某个常量表达式，但在实际使用时，尽管要求如此却常常发现初始值并非常量表达式的情况。</p>
<p><strong>C++11新标准</strong></p>
<p>C++11新标准规定，允许将变量声明为<code>constexpr</code>类型以便由编译器来验证变量的值是否是一个常量表达式。声明为<code>constexpr</code>的变量一定是一个常量，而且必须用常量表达式初始化：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//20是一个常量表达式</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> mf = <span class="number">20</span>;</span><br><span class="line"><span class="comment">//mf+1是一个常量表达式</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> limit = mf + <span class="number">10</span>;</span><br><span class="line"><span class="comment">//错误，GetSize()不是一个常量表达式，需要运行才能返回</span></span><br><span class="line"><span class="comment">//constexpr int sz = GetSize();</span></span><br></pre></td></tr></table></figure>

<p>尽管不能使用普通函数作为<code>constexpr</code>变量的初始值，新标准允许定义一种特殊的<code>constexpr</code>函数。</p>
<p>这种函数应该足够简单以使得编译时就可以计算其结果，这样就能用<code>constexpr</code>函数去初始化<code>constexpr</code>变量了。</p>
<p>我们在<code>global.h</code>中定义一个<code>constexpr</code>函数</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">constexpr</span> <span class="type">int</span> <span class="title">GetSizeConst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>为了避免在多个源文件中包含同一个头文件而导致的多重定义错误，可以将 <code>constexpr</code> 函数声明为 <code>inline</code>。</p>
<p><code>inline</code> 关键字允许在多个翻译单元中定义同一个函数，而不会引起链接错误。</p>
<p>接下来在定义一个<code>constexpr</code>变量就行了</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> sz = <span class="built_in">GetSizeConst</span>();</span><br></pre></td></tr></table></figure>

<p><strong>指针和<code>constexpr</code></strong></p>
<p>必须明确一点，在constexpr声明中如果定义了一个指针，限定符constexpr仅对指针有效，与指针所指的对象无关：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//p是一个指向整形常量的指针</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> * p = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="comment">//q是一个指向整数的常量指针</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> *q = <span class="literal">nullptr</span>;</span><br></pre></td></tr></table></figure>

<p>一个<code>constexpr</code>指针的初始值必须是<code>nullptr</code>或者0，或者是存储于某个固定地址中的对象。</p>
<p>函数体内定义的变量一般来说并非存放在固定地址中，因此<code>constexpr</code>指针不能指向这样的变量。</p>
<p>定义于所有函数体之外的对象其地址固定不变，能用来初始化<code>constexpr</code>指针</p>
<p>global_i是一个全局变量</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//constexpr指针只能绑定固定地址</span></span><br><span class="line"><span class="comment">//constexpr int *p = &amp;mvalue;</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> *p = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="comment">//可以绑定全局变量，全局变量地址固定</span></span><br><span class="line"><span class="keyword">constexpr</span>  <span class="type">int</span> *cp = &amp;global_i;</span><br></pre></td></tr></table></figure>

<p>可以修改<code>constexpr</code>指向的内容</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> *p = &amp;global_i;</span><br><span class="line"><span class="comment">//修改p指向的内容数据</span></span><br><span class="line">*p = <span class="number">1024</span>;</span><br></pre></td></tr></table></figure>

<p><strong>问题</strong></p>
<p>global_i是一个全局变量，下面这个指针是什么类型？能否修改<code>cp</code>指向的数据的内容(<code>*cp = 200</code>)？</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constexpr</span> <span class="type">const</span> <span class="type">int</span> * cp = &amp;global_i;</span><br></pre></td></tr></table></figure>




          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.limerence2017.com/2024/09/17/cppbase06/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="恋恋风辰的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/09/17/cppbase06/" itemprop="url">零基础C++(6) 指针类型</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2024-09-17T08:38:52+08:00">
                2024-09-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cppbase/" itemprop="url" rel="index">
                    <span itemprop="name">零基础C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="指针基础"><a href="#指针基础" class="headerlink" title="指针基础"></a>指针基础</h2><p>在C++中，指针是一种特殊的变量，它存储的是另一个变量的内存地址，而不是数据本身。通过使用指针，我们可以直接访问和操作内存中的数据。指针也叫做地址。</p>
<h3 id="和引用的区别"><a href="#和引用的区别" class="headerlink" title="和引用的区别"></a>和引用的区别</h3><p>指针（pointer）是“指向（point to）”另外一种类型的复合类型。与引用类似，指针也实现了对其他对象的间接访问。然而指针与引用相比又有很多不同点。</p>
<p>其一，指针本身就是一个对象，允许对指针赋值和拷贝，而且在指针的生命周期内它可以先后指向几个不同的对象。</p>
<p>其二，指针无须在定义时赋初值。和其他内置类型一样，在块作用域内定义的指针如果没有被初始化，也将拥有一个不确定的值。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//声明一个指向整数的指针，可以不赋初值</span></span><br><span class="line"><span class="type">int</span> *ptr;</span><br><span class="line"><span class="comment">//ip1和ip2都是指向int类型对象的指针</span></span><br><span class="line"><span class="type">int</span> *ip1, *ip2;</span><br><span class="line"><span class="comment">//dp2是指向double类型对象的指针,dp是double型对象</span></span><br><span class="line"><span class="type">double</span> dp, *dp2;</span><br></pre></td></tr></table></figure>

<p>这里，<code>ptr</code> 是一个指针变量，它可以存储一个整数的内存地址。</p>
<h3 id="指针赋值"><a href="#指针赋值" class="headerlink" title="指针赋值"></a>指针赋值</h3><p>我们可以通过如下方式(&amp;变量)获取一个变量的地址</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">变量地址 = &amp;变量名</span><br></pre></td></tr></table></figure>

<p>指针可以通过两种方式赋值：</p>
<ol>
<li><strong>直接赋值内存地址</strong>：这通常不是常规做法，因为直接操作内存地址可能会导致未定义行为。</li>
<li><strong>赋值变量的地址</strong>：这是更常见的做法，使用取地址运算符（&amp;）来获取变量的地址，并将其赋值给指针。</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义ptr2并且赋值，指向var地址</span></span><br><span class="line"><span class="type">int</span> var = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> *ptr2 = &amp;var;</span><br></pre></td></tr></table></figure>

<p>这里，<code>ptr</code> 被赋值为 <code>var</code> 的内存地址。</p>
<p>我们对上述代码进行图解：</p>
<p><img src="https://cdn.llfc.club/fb06f3724d53b3d9f9157aa9e0062a9.png" alt="https://cdn.llfc.club/fb06f3724d53b3d9f9157aa9e0062a9.png"></p>
<p><code>ptr2</code>指向<code>var</code>的地址，也就是<code>ptr2</code>存储的是<code>var</code>的地址<code>0x2be3</code>。因为<code>ptr2</code>也是对象，所以计算机也会为它开辟空间，<code>ptr2</code>自己的地址为<code>0x3f2b</code>.</p>
<p>所以指针的地址也可以用另一个指针变量存储</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义ptr2并且赋值，指向var地址</span></span><br><span class="line"><span class="type">int</span> var = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> *ptr2 = &amp;var;</span><br><span class="line"><span class="comment">//ptr_address 存储ptr2的地址</span></span><br><span class="line"><span class="type">int</span>** ptr_address = &amp;ptr2;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;var 的地址为: &quot;</span> &lt;&lt; &amp;var &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;ptr2 存储的值为: &quot;</span> &lt;&lt; ptr2 &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;ptr2 地址为: &quot;</span> &lt;&lt; &amp;ptr2 &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;ptr_address 的值为: &quot;</span> &lt;&lt; ptr_address &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<p>上述代码打印结果为</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var 的地址为: 0xad6a5ffc24</span><br><span class="line">ptr2 存储的值为: 0xad6a5ffc24</span><br><span class="line">ptr2 地址为: 0xad6a5ffc18</span><br><span class="line">ptr_address 的值为: 0xad6a5ffc18</span><br></pre></td></tr></table></figure>

<p>可以看到我们通过<code>ptr_address</code> 可以存储<code>ptr2</code>的地址, <code>ptr_address</code>存储的是指针的地址，所以它是一个指针的指针类型(<code>int**</code>)，也叫做二级指针。</p>
<h3 id="类型匹配"><a href="#类型匹配" class="headerlink" title="类型匹配"></a>类型匹配</h3><p>因为在声明语句中指针的类型实际上被用于指定它所指向的对象的类型，所以二者必须匹配。</p>
<p>如果指针指向了一个其他类型的对象，那么会产生错误。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> dval = <span class="number">3.14</span>;</span><br><span class="line"><span class="comment">//正确，初始值是double类型的对象的地址</span></span><br><span class="line"><span class="type">double</span> *pd = &amp;dval;</span><br><span class="line"><span class="comment">//正确，初始值是指向double对象的指针</span></span><br><span class="line"><span class="type">double</span> *pd2 = pd;</span><br><span class="line"><span class="comment">//错误,pi的类型和pd类型不匹配</span></span><br><span class="line"><span class="comment">//int * pi = pd;</span></span><br><span class="line"><span class="comment">//错误，视图把double型对象的地址赋值给int型指针</span></span><br><span class="line"><span class="comment">//int * pi = &amp;dval;</span></span><br></pre></td></tr></table></figure>

<h3 id="指针值"><a href="#指针值" class="headerlink" title="指针值"></a>指针值</h3><p>指针的值（即地址）应属下列4种状态之一：</p>
<p>1.指向一个对象。</p>
<p>2.指向紧邻对象所占空间的下一个位置。</p>
<p>3.空指针，意味着指针没有指向任何对象。</p>
<p>4.无效指针，也就是上述情况之外的其他值。</p>
<p>试图拷贝或以其他方式访问无效指针的值都将引发错误。编译器并不负责检查此类错误，这一点和试图使用未经初始化的变量是一样的。</p>
<p>访问无效指针的后果无法预计，因此程序员必须清楚任意给定的指针是否有效。</p>
<p>尽管第2种和第3种形式的指针是有效的，但其使用同样受到限制。显然这些指针没有指向任何具体对象，所以试图访问此类指针（假定的）对象的行为不被允许。如果这样做了，后果也无法预计。</p>
<h3 id="利用指针访问对象"><a href="#利用指针访问对象" class="headerlink" title="利用指针访问对象"></a>利用指针访问对象</h3><p>我们可以利用<code>*</code>(解引用操作符)获取指针所指向的对象的数据，写法如下</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数据变量 = *指针</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.llfc.club/1726532931384.jpg" alt="https://cdn.llfc.club/1726532931384.jpg"></p>
<p>我们看下这个例子</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//访问对象</span></span><br><span class="line"><span class="type">int</span> ival = <span class="number">42</span>;</span><br><span class="line"><span class="comment">//p_int存放着ival的地址，或者说p_int是指向变量ival的指针</span></span><br><span class="line"><span class="type">int</span> * p_int = &amp;ival;</span><br><span class="line"><span class="comment">//由符号*得到指针p所指向的对象，输出42</span></span><br><span class="line">std::cout &lt;&lt; *p_int ;</span><br></pre></td></tr></table></figure>

<p>上面的例子通过<code>*p_int</code>获取<code>p_int</code>所指向的对象<code>ival</code>的值。输出42</p>
<h3 id="利用指针修改对象"><a href="#利用指针修改对象" class="headerlink" title="利用指针修改对象"></a>利用指针修改对象</h3><p>因为指针存储的是对象的地址，通过解引用获取对象的数据，我们也可以通过解引用修改对象的值，基本格式为</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//访问对象</span></span><br><span class="line"><span class="type">int</span> ival = <span class="number">42</span>;</span><br><span class="line"><span class="comment">//p_int存放着ival的地址，或者说p_int是指向变量ival的指针</span></span><br><span class="line"><span class="type">int</span> * p_int = &amp;ival;</span><br><span class="line"><span class="comment">//由符号*得到指针p所指向的对象，输出42</span></span><br><span class="line">std::cout &lt;&lt; *p_int &lt;&lt; std::endl;</span><br><span class="line"><span class="comment">//由符号*得到指针p所指向的对象，即可经由p_int为变量ival赋值</span></span><br><span class="line">*p_int = <span class="number">0</span>;</span><br><span class="line">std::cout &lt;&lt; * p_int &lt;&lt; std::endl;</span><br><span class="line"><span class="comment">//打印ival的值</span></span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;ival 的值为&quot;</span> &lt;&lt; ival &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong></p>
<p>解引用操作仅适用于那些确实指向了某个对象的有效指针</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//初始化一个空指针</span></span><br><span class="line"><span class="type">int</span>* empty_pointer = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="comment">//打印空指针数据,非法</span></span><br><span class="line"><span class="comment">//std::cout &lt;&lt; &quot;空指针指向数据是 &quot; &lt;&lt; *empty_pointer &lt;&lt; std::endl;</span></span><br></pre></td></tr></table></figure>

<h2 id="符号的多重含义"><a href="#符号的多重含义" class="headerlink" title="符号的多重含义"></a>符号的多重含义</h2><p>像&amp;和＊这样的符号，既能用作表达式里的运算符，也能作为声明的一部分出现，符号的上下文决定了符号的意义：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//符号的多重含义</span></span><br><span class="line"><span class="type">int</span> ival2 = <span class="number">42</span>;</span><br><span class="line"><span class="comment">//&amp; 紧跟着类型名出现，因此是声明的一部分，r是一个引用</span></span><br><span class="line"><span class="type">int</span> &amp;r = ival2;</span><br><span class="line"><span class="comment">//* 紧跟着类型名出现，因此是声明的一部分，p是一个指针</span></span><br><span class="line"><span class="type">int</span> *p;</span><br><span class="line"><span class="comment">// &amp;出现在表达式中，是一个取地址符号</span></span><br><span class="line">p = &amp;ival2;</span><br><span class="line"><span class="comment">// * 出现在表达式中，是一个解引用符号</span></span><br><span class="line">*p = ival2;</span><br><span class="line"><span class="comment">//&amp; 是声明的一部分，*是一个解引用符号</span></span><br><span class="line"><span class="type">int</span> &amp;r2 = *p;</span><br></pre></td></tr></table></figure>

<h2 id="空指针"><a href="#空指针" class="headerlink" title="空指针"></a>空指针</h2><p>空指针包含几种定义方式</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//空指针定义方式</span></span><br><span class="line"><span class="comment">//C++11 最推荐方式</span></span><br><span class="line"><span class="type">int</span> *p1 = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="comment">//直接将p2初始化为字面量0</span></span><br><span class="line"><span class="type">int</span> *p2 = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//需要使用#include&lt;cstdlib&gt;</span></span><br><span class="line"><span class="comment">//等价于int * p3 = 0;</span></span><br><span class="line"><span class="type">int</span> *p3 = <span class="literal">NULL</span>;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;p1: &quot;</span> &lt;&lt; p1 &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;p2: &quot;</span> &lt;&lt; p2 &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;p3: &quot;</span> &lt;&lt; p3 &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<p>得到空指针最直接的办法就是用字面值<code>nullptr</code>来初始化指针，这也是C++11新标准刚刚引入的一种方法。</p>
<p><code>nullptr</code>是一种特殊类型的字面值。</p>
<p>另一种办法就如对<code>p2</code>的定义一样，也可以通过将指针初始化为字面值0来生成空指针。</p>
<p>过去的程序还会用到一个名为NULL的预处理变量（preprocessor variable）来给指针赋值，这个变量在头文件<code>cstdlib</code>中定义，它的值就是0。</p>
<p><strong>注意事项</strong></p>
<p>把int变量直接赋给指针是错误的操作，即使int变量的值恰好等于0也不行</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> zero = <span class="number">0</span>;</span><br><span class="line">pi = zero;</span><br></pre></td></tr></table></figure>

<h2 id="地址变换"><a href="#地址变换" class="headerlink" title="地址变换"></a>地址变换</h2><p>我们可以修改指针指向的地址，进而达到指向其他变量的目的.</p>
<p>指针和引用都能提供对其他对象的间接访问，然而在具体实现细节上二者有很大不同，其中最重要的一点就是引用本身并非一个对象。</p>
<p>一旦定义了引用，就无法令其再绑定到另外的对象，之后每次使用这个引用都是访问它最初绑定的那个对象。</p>
<p>指针和它存放的地址之间就没有这种限制了。和其他任何变量（只要不是引用）一样，给指针赋值就是令它存放一个新的地址，从而指向一个新的对象：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> ival3 = <span class="number">42</span>;</span><br><span class="line"><span class="comment">//pval3 被初始化，但没有指向任何对象</span></span><br><span class="line"><span class="type">int</span> *pval3 = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//pval4被初始化，指向ival3的地址</span></span><br><span class="line"><span class="type">int</span>* pval4 = &amp;ival3;</span><br><span class="line"><span class="comment">//将pval3的指向改为pval4的指向，二者同时指向ival3</span></span><br><span class="line">pval3 = pval4;</span><br><span class="line">std::cout &lt;&lt;<span class="string">&quot;ival3 的地址为：&quot;</span> &lt;&lt; &amp;ival3 &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt;<span class="string">&quot;pval3 指向的地址为 &quot;</span> &lt;&lt; pval3 &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt;<span class="string">&quot;pval4 指向的地址为 &quot;</span> &lt;&lt; pval4 &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<p>运行上述程序可以看到输出</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ival3 的地址为：0xf8329ff7a4</span><br><span class="line">pval3 指向的地址为 0xf8329ff7a4</span><br><span class="line">pval4 指向的地址为 0xf8329ff7a4</span><br></pre></td></tr></table></figure>

<h2 id="指针判空"><a href="#指针判空" class="headerlink" title="指针判空"></a>指针判空</h2><p>有时候我们需要判断指针是否为空，可以通过<code>if</code>判断，<code>if</code>大家没学，此处仅作演示和理解。</p>
<p>在C++ 中0为false，非0为true，所以一个空指针通过<code>if</code>判断，是false， 非空指针为true</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//空指针判断</span></span><br><span class="line"><span class="type">int</span> * empty_pointer2 = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">if</span>(!empty_pointer)&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;empty_pointer is empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> test = <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> * normal_pointer2 = &amp;test;</span><br><span class="line"><span class="keyword">if</span>(normal_pointer2)&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;normal pointer is not empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>指针同样可以支持比较运算,判断相等（==），判断不等(!=)。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断指针是否相等</span></span><br><span class="line"><span class="keyword">if</span>(normal_pointer2 != empty_pointer)&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;normal_pointer 和 empty_pointer 不相等&quot;</span>&lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="万能指针"><a href="#万能指针" class="headerlink" title="万能指针"></a>万能指针</h2><p>void＊是一种特殊的指针类型，可用于存放任意对象的地址。一个void＊指针存放着一个地址，这一点和其他指针类似。不同的是，我们对该地址中到底是个什么类型的对象并不了解：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//万能指针</span></span><br><span class="line"><span class="type">double</span> obj = <span class="number">3.14</span>, *obj_pd = &amp;obj;</span><br><span class="line"><span class="comment">//void 可以存放任何类型的对象的地址</span></span><br><span class="line"><span class="type">void</span> * pv = &amp;obj;</span><br><span class="line"><span class="comment">//pv 可以存储任意类型的地址</span></span><br><span class="line">pv = obj_pd;</span><br></pre></td></tr></table></figure>

<p>利用void＊指针能做的事儿比较有限：</p>
<p>拿它和别的指针比较、作为函数的输入或输出，或者赋给另外一个void＊指针。</p>
<p>不能直接操作void＊指针所指的对象，因为我们并不知道这个对象到底是什么类型，也就无法确定能在这个对象上做哪些操作。</p>
<h2 id="指向指针的指针"><a href="#指向指针的指针" class="headerlink" title="指向指针的指针"></a>指向指针的指针</h2><p>以指针为例，指针是内存中的对象，像其他对象一样也有自己的地址，因此允许把指针的地址再存放到另一个指针当中。通过＊的个数可以区分指针的级别。也就是说，＊＊表示指向指针的指针，＊＊＊表示指向指针的指针的指针，以此类推：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//以指针为例，指针是内存中的对象，像其他对象一样也有自己的地址，</span></span><br><span class="line"><span class="comment">// 因此允许把指针的地址再存放到另一个指针当中。通过＊的个数可以区分指针的级别。</span></span><br><span class="line"><span class="comment">// 也就是说，＊＊表示指向指针的指针，＊＊＊表示指向指针的指针的指针，以此类推：</span></span><br><span class="line"><span class="type">int</span> ival4= <span class="number">1024</span>;</span><br><span class="line"><span class="comment">// pival4指向了int型的数</span></span><br><span class="line"><span class="type">int</span> *pival4 = &amp;ival4;</span><br><span class="line"><span class="comment">//ppi指向了一个int型的指针</span></span><br><span class="line"><span class="type">int</span> ** ppi = &amp;pival4;</span><br><span class="line"></span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;The value of ival\n&quot;</span></span><br><span class="line">    &lt;&lt; <span class="string">&quot;direct value: &quot;</span> &lt;&lt; ival4 &lt;&lt; <span class="string">&quot;\n&quot;</span></span><br><span class="line">    &lt;&lt; <span class="string">&quot;indirect value: &quot;</span> &lt;&lt; *pival4 &lt;&lt; <span class="string">&quot;\n&quot;</span></span><br><span class="line">    &lt;&lt; <span class="string">&quot;doubly indirect value : &quot;</span> &lt;&lt; **ppi</span><br><span class="line">    &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<p>该程序使用三种不同的方式输出了变量ival的值：第一种直接输出；第二种通过int型指针pi输出；第三种两次解引用ppi，取得ival的值。</p>
<p><img src="https://cdn.llfc.club/1726537605315.jpg" alt="https://cdn.llfc.club/1726537605315.jpg"></p>
<h2 id="指向指针的引用"><a href="#指向指针的引用" class="headerlink" title="指向指针的引用"></a>指向指针的引用</h2><p>引用本身不是一个对象，因此不能定义指向引用的指针。但指针是对象，所以存在对指针的引用：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引用本身不是一个对象，因此不能定义指向引用的指针。</span></span><br><span class="line"><span class="comment">// 但指针是对象，所以存在对指针的引用</span></span><br><span class="line"><span class="type">int</span> init = <span class="number">42</span>;</span><br><span class="line"><span class="comment">// pinit是一个int型的指针</span></span><br><span class="line"><span class="type">int</span> *pinit;</span><br><span class="line"><span class="comment">// rpinit是一个对指针pinit的引用</span></span><br><span class="line"><span class="type">int</span> *&amp; rpinit = pinit;</span><br><span class="line"><span class="comment">// rpinit引用了一个指针，因此给rpinit赋值&amp;init就是令pinit指向init</span></span><br><span class="line">rpinit = &amp;init;</span><br><span class="line"><span class="comment">//解引用rpinit得到i,也就是p指向的对象，将init改为0</span></span><br><span class="line">*rpinit = <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<h2 id="指针运算"><a href="#指针运算" class="headerlink" title="指针运算"></a>指针运算</h2><p>指针可以进行算术运算，如递增（++）和递减（–），这些操作会改变指针所指向的内存地址。但是，这种操作仅限于指向数组元素的指针。</p>
<h4 id="指针和数组"><a href="#指针和数组" class="headerlink" title="指针和数组"></a>指针和数组</h4><p>在C++中，数组名在表达式中通常被当作指向数组首元素的指针。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//指针可以进行算术运算，如递增（++）和递减（--），</span></span><br><span class="line"><span class="comment">// 这些操作会改变指针所指向的内存地址。但是，这种操作仅限于指向数组元素的指针。</span></span><br><span class="line"><span class="type">int</span> arr[<span class="number">5</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="type">int</span> *ptr_arr = arr;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;ptr_arr is : &quot;</span> &lt;&lt; ptr_arr &lt;&lt; std::endl;</span><br><span class="line"><span class="type">int</span> firstElement = *ptr_arr;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;firstElement is &quot;</span> &lt;&lt; firstElement &lt;&lt; std::endl;</span><br><span class="line"><span class="comment">// 递增指针</span></span><br><span class="line">++ptr_arr; <span class="comment">// ptr 现在指向 arr[1]</span></span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;ptr_arr is : &quot;</span> &lt;&lt; ptr_arr &lt;&lt; std::endl;</span><br><span class="line"><span class="comment">// 访问新位置的值</span></span><br><span class="line"><span class="type">int</span> secondElement = *ptr_arr; <span class="comment">// secondElement 等于 2</span></span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;secondElement is &quot;</span> &lt;&lt; secondElement;</span><br></pre></td></tr></table></figure>

<p>上述程序输出</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ptr_arr is : 0x3160fffa30</span><br><span class="line">firstElement is 1</span><br><span class="line">ptr_arr is : 0x3160fffa34</span><br><span class="line">secondElement is 2</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.llfc.club/1726537913155.jpg" alt="https://cdn.llfc.club/1726537913155.jpg"></p>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><h4 id=""><a href="#" class="headerlink" title=""></a></h4><ul>
<li>指针必须在使用前被初始化，否则它们可能包含垃圾值，导致未定义行为。</li>
<li>指针运算（如递增和递减）仅适用于指向数组元素的指针。</li>
<li>指针的解引用操作必须确保指针不是空指针（<code>nullptr</code>），否则会导致运行时错误。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.limerence2017.com/2024/09/16/cppbase05/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="恋恋风辰的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/09/16/cppbase05/" itemprop="url">零基础C++(5) 引用类型</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2024-09-16T08:38:52+08:00">
                2024-09-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cppbase/" itemprop="url" rel="index">
                    <span itemprop="name">零基础C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="类型分类"><a href="#类型分类" class="headerlink" title="类型分类"></a>类型分类</h2><h3 id="1-内置类型（基本类型）"><a href="#1-内置类型（基本类型）" class="headerlink" title="1. 内置类型（基本类型）"></a>1. 内置类型（基本类型）</h3><p>内置类型是C++语言自带的基本数据类型，主要包括以下几种：</p>
<ul>
<li><strong>整型（Integer Types）</strong><ul>
<li><code>int</code>：标准整型，通常为4字节。</li>
<li><code>short</code>：短整型，通常为2字节。</li>
<li><code>long</code>：长整型，通常为4或8字节（取决于平台）。</li>
<li><code>long long</code>：更长的整型，通常为8字节。</li>
<li><code>unsigned</code>：无符号整型，不支持负数。</li>
<li><code>unsigned short</code>、<code>unsigned long</code>、<code>unsigned long long</code>：对应的无符号版本。</li>
</ul>
</li>
<li><strong>字符型（Character Types）</strong><ul>
<li><code>char</code>：字符型，通常为1字节。</li>
<li><code>wchar_t</code>：宽字符型，通常为2或4字节（用于表示Unicode字符）。</li>
<li><code>char16_t</code>、<code>char32_t</code>：用于表示UTF-16和UTF-32编码的字符。</li>
</ul>
</li>
<li><strong>浮点型（Floating Point Types）</strong><ul>
<li><code>float</code>：单精度浮点型，通常为4字节。</li>
<li><code>double</code>：双精度浮点型，通常为8字节。</li>
<li><code>long double</code>：扩展精度浮点型，通常为8字节或16字节（取决于平台）。</li>
</ul>
</li>
<li><strong>布尔型（Boolean Type）</strong><ul>
<li><code>bool</code>：布尔型，表示真（true）或假（false）。</li>
</ul>
</li>
</ul>
<h3 id="2-复合类型"><a href="#2-复合类型" class="headerlink" title="2. 复合类型"></a>2. 复合类型</h3><p>复合类型是由内置类型或其他复合类型组合而成的类型，主要包括以下几种：</p>
<ul>
<li><strong>数组（Array）</strong><ul>
<li>一组相同类型的数据元素，可以通过索引访问。</li>
</ul>
</li>
<li><strong>结构体（Struct）</strong><ul>
<li>一种用户定义的数据类型，可以包含不同类型的数据成员。</li>
</ul>
</li>
<li><strong>联合体（Union）</strong><ul>
<li>与结构体类似，但所有成员共享同一内存位置，只有一个成员可以在任何给定时间存储值。</li>
</ul>
</li>
<li><strong>枚举（Enum）</strong><ul>
<li>一种用户定义的类型，用于定义一组命名的整型常量。</li>
</ul>
</li>
<li><strong>类（Class）</strong><ul>
<li>C++的面向对象编程特性，允许定义包含数据和成员函数的复杂数据类型。</li>
</ul>
</li>
<li><strong>指针（Pointer）</strong><ul>
<li>指向其他类型的内存地址，可以用来动态分配内存和实现复杂的数据结构。</li>
</ul>
</li>
<li><strong>引用（Reference）</strong><ul>
<li>对现有变量的别名，提供了对变量的另一种访问方式。</li>
</ul>
</li>
</ul>
<h2 id="引用类型"><a href="#引用类型" class="headerlink" title="引用类型"></a>引用类型</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>C++ 中的引用类型是一种复合类型，它是对另一个变量的别名。在C++中使用引用，可以让我们直接访问和操作另一个变量的内存地址，而不需要通过指针的解引用操作。引用在语法上比指针更简洁，且在许多情况下更安全。</p>
<h4 id="变量内存演示"><a href="#变量内存演示" class="headerlink" title="变量内存演示"></a>变量内存演示</h4><p>上面的定义很多人看起来很吃力，那我们回想一下变量的存储。</p>
<p><img src="https://cdn.llfc.club/1726452128688.jpg" alt="https://cdn.llfc.club/1726452128688.jpg"></p>
<p>上面的图表示：</p>
<ul>
<li>定义一个变量a，并且初始化为100，编译器会为变量a开辟空间，绿色的是开辟的空间，存储100，这个空间的首地址为<code>0x2be3</code>,也就是变量a的地址。</li>
<li> 地址大家可以裂解为门牌号，我们可以通过门牌号找到绿色的家，a是绿色的家的名字，进而取出家里的物品，数据100可以理解为物品。</li>
<li>执行<code>b = a</code>，将a赋值给b后，编译器又开辟了一块空间，存储100，这个空间的首地址为<code>0x3f2b</code>。 打个比方，我们又创建了一个家，家的名字是b，家里也存储了100这个物品，但是这个家的地址和a的不一样。</li>
</ul>
<h4 id="引用内存演示"><a href="#引用内存演示" class="headerlink" title="引用内存演示"></a>引用内存演示</h4><p><img src="https://cdn.llfc.club/1726453490297.jpg" alt="https://cdn.llfc.club/1726453490297.jpg"></p>
<ul>
<li>我们同样定义了一个变量a，并为它开辟空间，存储100，空间的首地址为<code>0x2be3</code></li>
<li>我们定义了一个引用b，它是a的别名，所以b的地址和a的地址都一样，都是<code>0x2be3</code></li>
</ul>
<p>从上述图形可以看出，引用是变量的别名。</p>
<h3 id="写法"><a href="#写法" class="headerlink" title="写法"></a>写法</h3><p>引用的基本写法</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义变量a</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">100</span>;</span><br><span class="line"><span class="comment">// 定义引用b并且指向a, b就是a的别名</span></span><br><span class="line"><span class="type">int</span> &amp;b = a;</span><br></pre></td></tr></table></figure>

<p>大家能看到，在定义引用<code>b</code>的时候在<code>int</code>和<code>b</code>之间我们加了<code>&amp;</code>符号,  这个<code>int &amp;</code>表示的就是b是int类型的引用变量。</p>
<p>这里再提前告诉大家一个方法查看a和b地址是否相同， 当我们想输出a和b的地址的时候，只需要在a和b前加<code>&amp;</code>即可输出他们的地址</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">std::cout &lt;&lt; <span class="string">&quot;a的地址为：&quot;</span> &lt;&lt; &amp;a &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;b的地址为: &quot;</span> &lt;&lt; &amp;b &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<p>上面输出</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a的地址为：0x7ff65cae3000</span><br><span class="line">b的地址为: 0x7ff65cae3000</span><br></pre></td></tr></table></figure>

<p>可以看到a和b的地址相同。也证明了a和b是指向同一个地址空间。所以我们修改a的值，b的值也会变</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义变量a</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">100</span>;</span><br><span class="line"><span class="comment">// 定义引用b并且指向a, b就是a的别名</span></span><br><span class="line"><span class="type">int</span> &amp;b = a;</span><br><span class="line"><span class="comment">// 输出a和b的值</span></span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;a的值:&quot;</span> &lt;&lt; a &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;b的值: &quot;</span> &lt;&lt; b &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// a和b是指向同一个变量。所以我们修改a的值，b的值也会变</span></span><br><span class="line">a = <span class="number">200</span>;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;修改a的值后，a和b的值分别为:\n&quot;</span> &lt;&lt; a &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; b &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<p>程序输出如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a的值:100</span><br><span class="line">b的值: 100</span><br><span class="line">修改a的值后，a和b的值分别为:</span><br><span class="line">200</span><br><span class="line">200</span><br></pre></td></tr></table></figure>

<p>可以看到修改了a的值，b也跟着变化了，接下来我们修改b的值</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改b的值，a的值也会变</span></span><br><span class="line">b = <span class="number">300</span>;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;修改b的值后，a和b的值分别为:\n&quot;</span> &lt;&lt; a &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; b &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<p>程序输出</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">修改b的值后，a和b的值分别为:</span><br><span class="line">300</span><br><span class="line">300</span><br></pre></td></tr></table></figure>

<p>可以看到b的值修改了，a的值也变化了</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义c，存储a的值</span></span><br><span class="line"><span class="type">int</span> c = a;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;c的值:&quot;</span> &lt;&lt; c &lt;&lt; std::endl;</span><br><span class="line"><span class="comment">// 修改c的值</span></span><br><span class="line">c = <span class="number">400</span>;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;修改c的值后，c为:&quot;</span> &lt;&lt; c &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;修改c的值后，a和b的值分别为:\n&quot;</span> &lt;&lt; a &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; b &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<p>程序输出如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">修改c的值后，c为:400</span><br><span class="line">修改c的值后，a和b的值分别为:</span><br><span class="line">300</span><br><span class="line">300</span><br></pre></td></tr></table></figure>

<p>可以看到c为a的副本，修改c不影响到a和b。</p>
<h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h3><ol>
<li><strong>必须初始化</strong>：引用在创建时必须被初始化，它必须指向某个已存在的对象。</li>
<li><strong>一旦绑定，不可改变</strong>：引用一旦被初始化后，它将一直保持与其初始对象的绑定，不能改变为另一个对象的引用。</li>
<li><strong>没有空引用</strong>：引用必须指向某个对象，不能存在空引用。</li>
</ol>
<p>看下面的例子</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">100</span>;</span><br><span class="line">    <span class="type">int</span> &amp;b = a; <span class="comment">// b是a的引用</span></span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot;, b = &quot;</span> &lt;&lt; b &lt;&lt; std::endl; <span class="comment">// 输出: a = 100, b = 100</span></span><br><span class="line"></span><br><span class="line">    b = <span class="number">200</span>; <span class="comment">// 更改b的值也会更改a的值</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot;, b = &quot;</span> &lt;&lt; b &lt;&lt; std::endl; <span class="comment">// 输出: a = 200, b = 200</span></span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">    <span class="comment">// int c = 300;</span></span><br><span class="line">    <span class="comment">// 表示修改b的值为c的值</span></span><br><span class="line">    <span class="comment">// b = c; </span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ul>
<li>引用主要用于函数参数和返回值，以及类的成员变量等场景，以提供对原始数据的直接访问，从而提高程序的效率和可读性。</li>
<li>引用可以是<code>const</code>的，这表示你不能通过引用来修改它所指向的对象的值。</li>
<li>引用在内部实现上通常是通过指针来实现的，但它们在语法和用途上与指针有显著的不同。引用提供了更直观、更安全的访问方式。</li>
</ul>
<h2 id="左值引用和右值引用"><a href="#左值引用和右值引用" class="headerlink" title="左值引用和右值引用"></a>左值引用和右值引用</h2><p>在C++中，左值（<code>lvalue</code>）和右值（<code>rvalue</code>）是表达式的两种基本分类，它们决定了表达式的结果在内存中的位置和状态。左值通常指的是具有持久状态的对象，它们有明确的内存地址，可以被多次赋值。而右值通常是临时的、没有持久状态的值，它们通常没有内存地址，或者其内存地址在表达式结束后就变得无效。</p>
<p>C++11引入了右值引用（<code>rvalue reference</code>），用<code>T&amp;&amp;</code>表示，作为对左值引用（<code>lvalue reference</code>，用<code>T&amp;</code>表示）的补充。这一特性极大地增强了C++的表达能力，特别是在资源管理和性能方面。</p>
<h3 id="左值引用"><a href="#左值引用" class="headerlink" title="左值引用"></a>左值引用</h3><p>左值引用是C++98就有的特性，它允许我们为已存在的对象创建一个别名。左值引用必须被初始化为一个左值，即一个具有持久状态的对象。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span>&amp; b = a; <span class="comment">// b是a的左值引用</span></span><br></pre></td></tr></table></figure>

<h3 id="右值引用"><a href="#右值引用" class="headerlink" title="右值引用"></a>右值引用</h3><p>右值引用是C++11新增的特性，它允许我们为右值（即临时对象或即将被销毁的对象）创建一个引用。这样，我们就可以对右值进行更复杂的操作，比如移动语义（move semantics）。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>&amp;&amp; c = <span class="number">20</span>; <span class="comment">// c是整数字面量20的右值引用（但这种情况不常见，通常用于函数参数或返回值）</span></span><br><span class="line"></span><br><span class="line"><span class="function">std::string <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> std::<span class="built_in">string</span>(<span class="string">&quot;Hello, World!&quot;</span>); <span class="comment">// 返回的临时字符串是一个右值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">std::string &amp;&amp;d = <span class="built_in">foo</span>(); <span class="comment">// d是foo()返回的临时字符串的右值引用</span></span><br></pre></td></tr></table></figure>

<p>但请注意，直接绑定一个右值到右值引用（如<code>int&amp;&amp; c = 20;</code>）并不是右值引用的主要用途。右值引用的主要用途是作为函数参数（实现移动语义）和返回值（允许链式调用等）。</p>
<h3 id="移动语义和完美转发"><a href="#移动语义和完美转发" class="headerlink" title="移动语义和完美转发"></a>移动语义和完美转发</h3><p>右值引用的引入主要是为了支持移动语义（move semantics），它允许我们在对象被销毁前“窃取”其资源（如动态分配的内存、文件句柄等），而不是进行深拷贝。这可以显著提高性能，特别是在处理大型对象或容器时。</p>
<p>完美转发（perfect forwarding）是另一个与右值引用相关的概念，它允许我们将参数原封不动地传递给另一个函数，无论是左值还是右值。这通过模板和<code>std::forward</code>函数实现。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li>左值引用（<code>T&amp;</code>）是C++98就有的特性，用于为已存在的对象创建别名。</li>
<li>右值引用（<code>T&amp;&amp;</code>）是C++11新增的特性，用于为右值（即临时对象）创建引用，支持移动语义和完美转发等高级特性。</li>
<li>右值引用的主要用途不是直接绑定到字面量或简单的右值表达式上，而是在函数参数和返回值中，以实现更高效的资源管理和更灵活的代码编写方式。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.limerence2017.com/2024/09/14/cppbase04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="恋恋风辰的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/09/14/cppbase04/" itemprop="url">零基础C++(4) extern的作用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2024-09-14T17:10:54+08:00">
                2024-09-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cppbase/" itemprop="url" rel="index">
                    <span itemprop="name">零基础C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="重定义问题如何解决"><a href="#重定义问题如何解决" class="headerlink" title="重定义问题如何解决"></a>重定义问题如何解决</h2><h3 id="产生原因"><a href="#产生原因" class="headerlink" title="产生原因"></a>产生原因</h3><p>前文我们说过头文件只能用来做文件的声明，源文件用来做文件的实现。如果我们在头文件中定义变量会怎么样呢？</p>
<p>假设我们在<code>global.h</code>中定义了两个变量</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> DAY05_EXTERN_GLOBAL_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DAY05_EXTERN_GLOBAL_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="type">int</span> global_age = <span class="number">10</span>;</span><br><span class="line">std::string global_name = <span class="string">&quot;llfc&quot;</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">//DAY05_EXTERN_GLOBAL_H</span></span></span><br></pre></td></tr></table></figure>

<p>然后我们创建<code>global.cpp</code>包含<code>global.h</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;global.h&quot;</span></span></span><br></pre></td></tr></table></figure>

<p>然后我们在<code>main.cpp</code>中包含<code>global.h</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;global.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Hello, World!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;globbal name is&quot;</span> &lt;&lt; global_name &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;global age is &quot;</span> &lt;&lt; global_age &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们运行上述代码, 程序编译并未产生问题,但是链接产生问题了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[1/3] Building CXX object CMakeFiles/day05_extern.<span class="built_in">dir</span>/global.cpp.obj</span><br><span class="line">[2/3] Building CXX object CMakeFiles/day05_extern.<span class="built_in">dir</span>/main.cpp.obj</span><br><span class="line">[3/3] Linking CXX executable day05_extern.exe</span><br><span class="line">FAILED: day05_extern.exe </span><br></pre></td></tr></table></figure>

<p>再往下看</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">multiple definition of `global_age<span class="number">&#x27;</span>; CMakeFiles/day05_extern.dir/main.cpp.obj: /global.h:<span class="number">8</span>: first defined here</span><br><span class="line">multiple definition of `global_name[abi:cxx11]<span class="string">&#x27;; CMakeFiles/day05_extern.dir/main.cpp.obj:/global.h:9: first defined here</span></span><br></pre></td></tr></table></figure>

<p>上述报错的意思是在链接<code>main.cpp.obj</code>时发现<code>global_age</code>重定义，第一次定义在<code>global.h</code>这里。</p>
<p>同样链接<code>mian.cpp.obj</code>时发现global_name重定义，第一次定义在<code>global.h</code>。</p>
<p>因为<code>global.h</code>中定义了<code>global_age</code>，根据我们之前学习的预编译知识，只要是包含<code>global.h</code>的文件都会展开<code>global.h</code>，<code>main.cpp</code>展开了一次，<code>global.cpp</code>展开了一次</p>
<h3 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h3><h4 id="extern的作用"><a href="#extern的作用" class="headerlink" title="extern的作用"></a>extern的作用</h4><p>在C++中，<code>extern</code> 关键字用于声明一个变量或函数是在另一个文件或同一个文件的其他位置定义的。这主要用于处理全局变量或函数声明，确保在多个源文件中能够正确地链接到这些全局变量或函数的定义。</p>
<h4 id="解决办法-1"><a href="#解决办法-1" class="headerlink" title="解决办法"></a>解决办法</h4><p>可以采用<strong>extern</strong>关键字声明变量，然后将变量的定义放在<code>global.cpp</code>中,  这样<code>main.cpp</code>包含<code>global.h</code>就只会展开声明。声明可以重复声明，不会有问题。</p>
<p>在<code>global.h</code>中用extern声明两个变量</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> DAY05_EXTERN_GLOBAL_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DAY05_EXTERN_GLOBAL_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">extern</span> <span class="type">int</span> global_age ;</span><br><span class="line"><span class="keyword">extern</span> std::string global_name ;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">//DAY05_EXTERN_GLOBAL_H</span></span></span><br></pre></td></tr></table></figure>

<p>在<code>global.cpp</code>中定义这些变量</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;global.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">// 定义全局变量</span></span><br><span class="line">std::string global_name = <span class="string">&quot;John Doe&quot;</span>;</span><br><span class="line"><span class="type">int</span> global_age = <span class="number">30</span>;</span><br></pre></td></tr></table></figure>

<p>在<code>main.cpp</code>中包含<code>global.h</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;global.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Hello, World!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;globbal name is&quot;</span> &lt;&lt; global_name &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;global age is &quot;</span> &lt;&lt; global_age &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再次编译，运行成功</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hello, World!</span><br><span class="line">globbal name isJohn Doe</span><br><span class="line">global age is 30</span><br></pre></td></tr></table></figure>



<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li><p>头文件只做变量的声明，不能做变量的定义</p>
</li>
<li><p>头文件声明变量可以采用extern的方式</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/">&lt;</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/37/">37</a><a class="extend next" rel="next" href="/page/4/">&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">368</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/secondtonone1" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.zhihu.com/people/wang-wu-chen-32/activities" target="_blank" title="ZhiHu">
                    
                      <i class="fa fa-fw fa-ZhiHu"></i>ZhiHu</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">恋恋风辰</span>

  
  
 
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">本站访客数<span id="busuanzi_value_site_uv"></span>人</span>
 
 
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
