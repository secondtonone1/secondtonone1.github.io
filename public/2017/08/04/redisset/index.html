<!doctype html>
<html lang="zh-CN">
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta content="yes" name="apple-mobile-web-app-capable">
  <meta content="black" name="apple-mobile-web-app-status-bar-style">
  <meta content="telephone=no" name="format-detection">
  <meta name="keywords" content="C++ python 大并发网络 逆向">
  <meta name="description" content="重剑无锋，大巧不工">
  <meta name="author" content="恋恋风辰">

  
  <title>redis 配置和使用(C++)</title>
  

  <link rel="alternate" href="/atom.xml" title="恋恋风辰的个人博客" type="application/atom+xml">
  <link rel="canonical" href="http://www.limerence2017.com/2017/08/04/redisset/index.html">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="//at.alicdn.com/t/font_pb2xepysv85gsyvi.css">
  <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</head>


  <body>
    <aside class="aside">
  <nav class="aside-menu">
    <ul class="aside-list">
      
        
        <li class="aside-item"><i class="aside-menu-icon iconfont icon-wendang"></i><a href="/index.html" class="aside-menu-link" title="首页">首页</a></li>
        
      
        
        <li class="aside-item"><i class="aside-menu-icon iconfont icon-wendang1"></i><a href="/archives/index.html" class="aside-menu-link" title="所有文章">所有文章</a></li>
        
      
        
        <li class="aside-item"><i class="aside-menu-icon iconfont icon-biaoqian1"></i><a href="/tags/index.html" class="aside-menu-link" title="文章分类">文章分类</a></li>
        
      
        
        <li class="aside-item"><i class="aside-menu-icon iconfont icon-lianjie"></i><a href="/links/index.html" class="aside-menu-link" title="我和我的小伙伴">我和我的小伙伴</a></li>
        
      
        
        <li class="aside-item"><i class="aside-menu-icon iconfont icon-guanyu"></i><a href="/about/index.html" class="aside-menu-link" title="作者简介">作者简介</a></li>
        
      
        
        <li class="aside-item"><i class="aside-menu-icon iconfont icon-rss"></i><a href="/atom.xml" class="aside-menu-link" title="RSS">RSS</a></li>
        
      
    </ul>
  </nav>

  <article class="aside-show">
    
      <form class="search-from" id="search-from">
  <input class="search-text" id="search-text" type="text" name="searchText" value="" autocomplete="off">
  <button class="search-btn" id="search-btn" type="button"><i class="search-btn-icon iconfont icon-sousuo-sousuo"></i></button>
</form>

      <article class="search-data" id="search-data">
  <button class="search-close" id="search-close"><i class="search-close-icon iconfont icon-houdongfangiconfont10"></i></button>

  <div class="search-wrapper" id="search-wrapper"></div>
</article>

    
    <div class="aside-show-wrapper">
      <figure class="aside-avatar">
        <img src="/img/avatar.png" alt="avatar" class="aside-avatar-img">
        <figcaption class="aside-avatar-caption">
          恋恋风辰
          
          <strong class="aside-avatar-STRONG">个人博客</strong>
          
        </figcaption>
      </figure>
      <p class="aside-show-description">重剑无锋，大巧不工。</p>
      <ul class="aside-show-info">
        <li class="aside-show-item">
          <a href="javascript: void(0);" class="aside-show-link" title="微信" target="_blank"><i class="aside-show-icon iconfont icon-iconfontweixin"></i></a>
          <div class="aside-show-outside aside-show-outside_1">
            <img class="aside-show-IMG aside-show-IMG_1" src="/img/weixin.png" alt="微信">
          </div>
        </li>
        <li class="aside-show-item"><a href="https://www.zhihu.com/people/wang-wu-chen-32/activities" class="aside-show-link" title="知乎" target="_blank"><i class="aside-show-icon iconfont icon-zhihu"></i></a></li>
        <li class="aside-show-item"><a href="https://github.com/secondtonone1" class="aside-show-link" title="github" target="_blank"><i class="aside-show-icon iconfont icon-github"></i></a></li>
        <li class="aside-show-item">
          <a href="javascript: void(0);" class="aside-show-link" title="QQ" target="_blank"><i class="aside-show-icon iconfont icon-qq"></i></a>
          <div class="aside-show-outside">
            <img class="aside-show-IMG" src="/img/qq.png" alt="QQ">
          </div>
        </li>
      </ul>
    </div>
  </article>
</aside>


    <article class="main" id="main">
      <article class="post min-height">
  
  <header class="post-header">
    
    <h1 class="post-title">redis 配置和使用(C++)</h1>
    <p class="post-meta">
      <span class="post-time">2017-08-04</span>
      
      <a href="/categories/tech/" title="技术开发" class="post-categories">技术开发</a>
      
      
      <a href="/tags/C/"" title="C++" class="post-tags"><i class="post-tags-icon iconfont icon-biaoqian"></i>C++</a>
      
      <a href="/tags/网络编程/"" title="网络编程" class="post-tags"><i class="post-tags-icon iconfont icon-biaoqian"></i>网络编程</a>
      
      <a href="/tags/Linux环境编程/"" title="Linux环境编程" class="post-tags"><i class="post-tags-icon iconfont icon-biaoqian"></i>Linux环境编程</a>
      
    </p>
    
  </header>
  <div class="post-content"><h2 id="一、Redis简介："><a href="#一、Redis简介：" class="headerlink" title="一、Redis简介："></a>一、Redis简介：</h2><p><code>Redis</code>为<code>非关系型数据库</code>，Redis是一个<code>Key-Value</code>存储系统。它支持存储的value类型有：<code>string(字符串)</code>,<code>list(链表)</code>, <code>set(无序集合)</code>,<code>zset(sorted set有序集合)</code>和<code>hash</code>，Redis支持各种不同方式的排序。数据都是<code>缓存</code>在<code>内存</code>中的，它也可以周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件，并实现了<code>master-slave(主从)同步</code>。</p>
<h2 id="二、Redis安装和使用："><a href="#二、Redis安装和使用：" class="headerlink" title="二、Redis安装和使用："></a>二、Redis安装和使用：</h2><p>Redis下载地址，我下载的为最新版本：</p>
<p>wget <a href="wget http://download.redis.io/releases/redis-3.2.8.tar.gz">http://download.redis.io/releases/redis-3.2.8.tar.gz</a>  </p>
<p>解压安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ tar xzf redis-3.2.8.tar.gz</div><div class="line">$ <span class="built_in">cd</span> redis-3.2.8</div><div class="line">$ make</div></pre></td></tr></table></figure>
<p>make完后 redis-3.2.8目录下会出现redis-server和redis-cli<br>下面在src目录下启动redis服务.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$./redis-server</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>注意这种方式启动redis 使用的是默认配置。也可以通过启动参数告诉redis使用指定配置文件使用下面命令启动.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./redis-server redis.conf</div></pre></td></tr></table></figure></p>
<p>redis.conf是一个默认的配置文件。我们可以根据需要使用自己的配置文件。<br>启动redis服务进程后，就可以使用测试客户端程序redis-cli和redis服务交互了.<br>下面为官方提供的案例：<br>服务器启动：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">src/redis-server redis.conf</div></pre></td></tr></table></figure></p>
<p>客户端读写：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ src/redis-cli</div><div class="line">redis&gt; <span class="built_in">set</span> foo bar</div><div class="line">OK</div><div class="line">redis&gt; get foo</div><div class="line"><span class="string">"bar"</span></div></pre></td></tr></table></figure>
<p>redis.conf 为redis配置文件，有很多参数供用户修改，这里仅仅说明几个参数，其他的读者自行搜索。</p>
<p>port: 为redis启动的端口号，当需要启动多个redis服务器时修改该参数，可以启动多个服务。</p>
<p>bind ：绑定ip，设置后只接受自该ip的请求</p>
<p>databases ：设置数据库的个数，默认使用的数据库为0，redis有16个数据库，修改参数可写入不同的数据库。</p>
<p>requirepass ：设置登录时需要使用的密码。</p>
<p>下面修改requirepass  为 zjml123456&amp;&amp;REDIS,那么重启redis-server,放在后台运行。效果就是这样<br><img src="/2017/08/04/redisset/1.png" alt="1"><br>然后启动客户端使用密码登录并且查询数据<br><img src="/2017/08/04/redisset/2.png" alt="2"><br>使用密码命令为：auth 密码</p>
<p>设置key和value的命令为: set key value</p>
<p>取出key对应的value 为： get key</p>
<h2 id="使用C-访问redis"><a href="#使用C-访问redis" class="headerlink" title="使用C++访问redis:"></a>使用C++访问redis:</h2><p>使用redis接口之前需要将hireids.h 和libhiredis.a放到项目目录里，这两个文件在redis解压目录redis-3.2.8/deps/下,我这里写了一个demo，所以都放在demo的文件夹下了。</p>
<p>下面介绍redis提供的供C++访问的接口</p>
<p> 主要包括如下四个方法</p>
<ol>
<li>redisContext<em> redisConnect(const char </em>ip, int port)</li>
</ol>
<p>该函数用来连接redis数据库， 两个参数分别是redis数据库的ip和端口，端口号一般为6379。</p>
<ol>
<li>void <em>redisCommand(redisContext </em>c, const char *format…)</li>
</ol>
<p>该函数用于执行redis数据库中的命令，第一个参数为连接数据库返回的redisContext，剩下的参数为变参，如同C语言中的prinf()函数。此函数的返回值为void*，但是一般会强制转换为redisReply类型，以便做进一步的处理。根据redisReply中的type变量类型判断命令执行情况</p>
<p>REDIS_REPLY_STATUS：</p>
<p>返回执行结果为状态的命令。比如set命令的返回值的类型是REDIS_REPLY_STATUS，然后只有当返回信息是”OK”时，才表示该命令执行成功。</p>
<p>可以通过reply-&gt;str得到文字信息，通过reply-&gt;len得到信息长度。</p>
<p>REDIS_REPLY_ERROR：</p>
<p>返回错误。错误信息可以通过reply-&gt;str得到文字信息，通过reply-&gt;len得到信息长度。</p>
<p>REDIS_REPLY_INTEGER：</p>
<p>返回整型标识。可以通过reply-&gt;integer变量得到类型为long long的值。</p>
<p>REDIS_REPLY_NIL:</p>
<p>返回nil对象，说明不存在要访问的数据。</p>
<p>REDIS_REPLY_STRING:</p>
<p>返回字符串标识。可以通过reply-&gt;str得到具体值，通过reply-&gt;len得到信息长度。</p>
<p>REDIS_REPLY_ARRAY:</p>
<p>返回数据集标识。数据集中元素的数目可以通过reply-&gt;elements获得，每个元素是个redisReply对象，</p>
<p>元素值可以通过reply-&gt;element[..index..].*形式获得，用在获取多个数据结果的操作。</p>
<ol>
<li>void freeReplyObject(void *reply)</li>
</ol>
<p>释放redisCommand执行后返回的的redisReply所占用的内存。</p>
<ol>
<li>void redisFree(redisContext *c)</li>
</ol>
<p>释放redisConnect()所产生的连接。</p>
<p>下面是我封装的一个C++访问redis的类</p>
<p>RedisManager.h</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RedisManager</span> </span></div><div class="line"><span class="class">    &#123;</span></div><div class="line">       <span class="keyword">public</span>:</div><div class="line"></div><div class="line">        RedisManager();</div><div class="line">        <span class="keyword">virtual</span> ~RedisManager();</div><div class="line">        <span class="comment">//初始化函数</span></div><div class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">initial</span><span class="params">()</span></span>;</div><div class="line">        <span class="comment">//释放函数</span></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">release</span><span class="params">()</span></span>;</div><div class="line">        <span class="comment">//封装的set接口</span></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span> key, <span class="built_in">std</span>::<span class="built_in">string</span> value)</span></span>;</div><div class="line">        <span class="comment">//封装的get接口</span></div><div class="line">        <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">get</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span> key)</span></span>;</div><div class="line">        </div><div class="line">        <span class="keyword">private</span>:</div><div class="line">        </div><div class="line">        <span class="comment">//连接的缓存指针</span></div><div class="line">        redisContext* m_pConnect;</div><div class="line">        <span class="comment">//请求处理结果指针</span></div><div class="line">        redisReply* m_pReply;</div><div class="line">    &#125;;</div></pre></td></tr></table></figure>
<p>RedisManager.cpp</p>
<p>分别介绍几个接口：</p>
<p>构造函数和析构函数没写代码，下面是初始化函数：</p>
<p>初始化函数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">bool</span> RedisManager::initial()</div><div class="line">&#123;</div><div class="line">    <span class="comment">//redis服务器ip</span></div><div class="line">    <span class="keyword">const</span> <span class="keyword">char</span>*  redisIp = <span class="string">"192.168.1.40"</span>;</div><div class="line">    <span class="comment">//redis服务器端口</span></div><div class="line">    <span class="keyword">int</span>  redisPort = <span class="number">6379</span>;</div><div class="line">    <span class="comment">//连接redis服务器</span></div><div class="line">    m_pConnect = redisConnect(redisIp, redisPort);                    </div><div class="line">    m_pReply = <span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(!m_pConnect)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (m_pConnect != <span class="literal">NULL</span> &amp;&amp; m_pConnect-&gt;err) &#123;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">" redis connect failed!!!!"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//根据密码登录</span></div><div class="line">    m_pReply =(redisReply*) redisCommand(m_pConnect, <span class="string">"AUTH %s"</span>, mypass.c_str()); </div><div class="line">    <span class="keyword">if</span>(!m_pReply)</div><div class="line">    &#123;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"redis exe failed!!"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;    </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span>( !(m_pReply-&gt;type == REDIS_REPLY_STATUS &amp;&amp; strcasecmp(m_pReply-&gt;str,<span class="string">"OK"</span>)==<span class="number">0</span>))  </div><div class="line">    &#123; </div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">" redis auth failed!!!!"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">        freeReplyObject(m_pReply );</div><div class="line">        m_pReply = <span class="literal">NULL</span>;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    freeReplyObject(<span class="keyword">this</span>-&gt;m_pReply );</div><div class="line">    m_pReply = <span class="literal">NULL</span>;</div><div class="line">    </div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">" redis auth success!!!!"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>释放函数：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> RedisManager::release()</div><div class="line">&#123;</div><div class="line">    <span class="comment">//释放连接</span></div><div class="line">     freeReplyObject(m_pConnect);</div><div class="line">     m_pConnect = <span class="literal">NULL</span>;</div><div class="line">    m_pReply = <span class="literal">NULL</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>set函数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> RedisManager::<span class="built_in">set</span>(<span class="built_in">std</span>::<span class="built_in">string</span> key, <span class="built_in">std</span>::<span class="built_in">string</span> value)</div><div class="line">&#123;</div><div class="line">    <span class="comment">//设置key和value关系，插入redis</span></div><div class="line">    redisReply* r =(redisReply*)redisCommand(<span class="keyword">this</span>-&gt;m_pConnect, <span class="string">"SET %s %s"</span>, key.c_str(), value.c_str());   </div><div class="line">    <span class="keyword">if</span>(!r)</div><div class="line">    &#123;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"set redis faliled"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">        </div><div class="line">    <span class="comment">//执行失败</span></div><div class="line">    <span class="keyword">if</span>( !(r-&gt;type == REDIS_REPLY_STATUS &amp;&amp; strcasecmp(r-&gt;str,<span class="string">"OK"</span>)==<span class="number">0</span>))  </div><div class="line">    &#123;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"set redis faliled"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">        freeReplyObject(r );</div><div class="line">        <span class="keyword">return</span>;    </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"set redis success"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    freeReplyObject(r );</div><div class="line">&#125;</div><div class="line">``` </div><div class="line">get函数：</div><div class="line"></div><div class="line">``` cpp</div><div class="line"><span class="built_in">std</span>::<span class="built_in">string</span> RedisManager::get(<span class="built_in">std</span>::<span class="built_in">string</span> key)</div><div class="line">&#123;</div><div class="line">    <span class="comment">//根据key获取value</span></div><div class="line">    m_pReply = (redisReply*)redisCommand(<span class="keyword">this</span>-&gt;m_pConnect, <span class="string">"GET %s"</span>, key.c_str());</div><div class="line">    <span class="keyword">if</span>(!m_pReply)</div><div class="line">    &#123;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"get value failed"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">        <span class="keyword">return</span> <span class="string">""</span>;</div><div class="line">    &#125;</div><div class="line">     <span class="comment">//get成功返回结果为 REDIS_REPLY_STRING </span></div><div class="line">    <span class="keyword">if</span>( m_pReply-&gt;type != REDIS_REPLY_STRING )  </div><div class="line">    &#123;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"get redis faliled"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">        freeReplyObject(m_pReply );</div><div class="line">        m_pReply = <span class="literal">NULL</span>;</div><div class="line">        <span class="keyword">return</span> <span class="string">""</span>;    </div><div class="line">    &#125;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"get redis success"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> valuestr = m_pReply-&gt;str;</div><div class="line">    freeReplyObject(m_pReply );</div><div class="line">    m_pReply = <span class="literal">NULL</span>;</div><div class="line">     </div><div class="line">    <span class="keyword">return</span> valuestr ;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>main 函数为：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">    RedisManager * redisManager = <span class="keyword">new</span> RedisManager();   </div><div class="line">    <span class="keyword">if</span>(redisManager)</div><div class="line">    &#123;</div><div class="line">        redisManager-&gt;initial();</div><div class="line">    </div><div class="line">        edisManager-&gt;<span class="built_in">set</span>(<span class="string">"test"</span>,<span class="string">"nice to meet u!"</span>);</div><div class="line">    </div><div class="line">        <span class="built_in">std</span>::<span class="built_in">string</span> valueStr = redisManager-&gt;get(<span class="string">"1sdfd"</span>);</div><div class="line">        </div><div class="line">        <span class="built_in">cout</span> &lt;&lt; valueStr &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">        </div><div class="line">        redisManager-&gt;release();    </div><div class="line">        <span class="keyword">delete</span> redisManager;        </div><div class="line">    &#125;</div><div class="line">        </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>源码下载地址：</p>
<p><a href="http://download.csdn.net/detail/secondtonone1/9826761" target="_blank" rel="external">http://download.csdn.net/detail/secondtonone1/9826761</a></p>
</div>
    
      <p class="post-copyright">若无特别说明，本文系原创，<a class="post-copyright-link" href="https://creativecommons.org/licenses/by/4.0/deed.zh" title="署名-非商业性使用 4.0 (CC BY-NC 4.0)" target="_blank">署名-非商业性使用 4.0 (CC BY-NC 4.0)</a>协议，转载文章请注明来自<a class="post-copyright-link" href="/" title="恋恋风辰的个人博客" target="_blank">恋恋风辰的个人博客</a>，或链接上原文地址：<a class="post-copyright-link" href="http://www.limerence2017.com/2017/08/04/redisset/" title="http://www.limerence2017.com/2017/08/04/redisset/" target="_blank">http://www.limerence2017.com/2017/08/04/redisset/</a></p>

      
      <div class="toc-wrapper">
        <div class="toc-scroll">
          <div class="toc-middle">
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、Redis简介："><span class="toc-text">一、Redis简介：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、Redis安装和使用："><span class="toc-text">二、Redis安装和使用：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用C-访问redis"><span class="toc-text">使用C++访问redis:</span></a></li></ol>
          </div>
        </div>
      </div>
    
  
</article>

      <footer class="footer">
  <p class="footer-text">驱动于 <a href="https://hexo.io/zh-cn/" class="footer-link" title="Hexo">Hexo</a>，主题由 <a href="/about" class="footer-link" title="恋恋风辰">恋恋风辰</a> 设计移植而来</p>
  <p class="footer-text">&copy; 2016 - 2017 <a href="/about" class="footer-link" title="恋恋风辰">恋恋风辰</a> 保留部分版权</p>
</footer>

    </article>

    <script src="/js/to-top.js"></script>
    <script src="/js/search.js"></script>
  </body>
</html>
